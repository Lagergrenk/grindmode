{"version":3,"file":"Nutrition-C7uvI9QU.js","sources":["../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/circle-alert.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/pen.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/save.js","../../node_modules/lucide-react/dist/esm/icons/square-pen.js","../../node_modules/lucide-react/dist/esm/icons/utensils.js","../../src/components/ui/form-error.tsx","../../src/features/nutrition/components/forms/MealsDetailsForm.tsx","../../src/features/nutrition/components/forms/MealForm.tsx","../../src/shared/utils/validateFood.ts","../../src/lib/USDAApi.ts","../../src/features/nutrition/components/forms/FoodItemForm.tsx","../../src/features/nutrition/components/AddNewMeal.tsx","../../src/shared/utils/calculateTotalNutrients.ts","../../src/features/nutrition/components/cards/MealCard.tsx","../../src/features/nutrition/components/DateSelector.tsx","../../src/features/nutrition/components/foodsearch/FoodSearchBar.tsx","../../src/features/nutrition/components/foodsearch/FoodSearchItem.tsx","../../node_modules/@radix-ui/react-scroll-area/dist/index.mjs","../../src/components/ui/scroll-area.tsx","../../src/features/nutrition/components/foodsearch/FoodSearchResults.tsx","../../src/features/nutrition/components/foodsearch/FoodSearch.tsx","../../src/features/nutrition/components/forms/FormGroup.tsx","../../src/features/nutrition/components/lists/FoodsList.tsx","../../src/features/nutrition/components/lists/MealsList.tsx","../../src/components/ui/textarea.tsx","../../src/features/nutrition/components/NutritionNotes.tsx","../../src/features/nutrition/hooks/useMealOperations.ts","../../src/features/nutrition/pages/Nutrition.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n];\nconst CircleAlert = createLucideIcon(\"circle-alert\", __iconNode);\n\nexport { __iconNode, CircleAlert as default };\n//# sourceMappingURL=circle-alert.js.map\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n];\nconst Clock = createLucideIcon(\"clock\", __iconNode);\n\nexport { __iconNode, Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst Pen = createLucideIcon(\"pen\", __iconNode);\n\nexport { __iconNode, Pen as default };\n//# sourceMappingURL=pen.js.map\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n];\nconst Plus = createLucideIcon(\"plus\", __iconNode);\n\nexport { __iconNode, Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z\",\n      key: \"1c8476\"\n    }\n  ],\n  [\"path\", { d: \"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7\", key: \"1ydtos\" }],\n  [\"path\", { d: \"M7 3v4a1 1 0 0 0 1 1h7\", key: \"t51u73\" }]\n];\nconst Save = createLucideIcon(\"save\", __iconNode);\n\nexport { __iconNode, Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\", key: \"1m0v6g\" }],\n  [\n    \"path\",\n    {\n      d: \"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z\",\n      key: \"ohrbg2\"\n    }\n  ]\n];\nconst SquarePen = createLucideIcon(\"square-pen\", __iconNode);\n\nexport { __iconNode, SquarePen as default };\n//# sourceMappingURL=square-pen.js.map\n","/**\n * @license lucide-react v0.503.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2\", key: \"cjf0a3\" }],\n  [\"path\", { d: \"M7 2v20\", key: \"1473qp\" }],\n  [\"path\", { d: \"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7\", key: \"j28e5\" }]\n];\nconst Utensils = createLucideIcon(\"utensils\", __iconNode);\n\nexport { __iconNode, Utensils as default };\n//# sourceMappingURL=utensils.js.map\n","import { AlertCircle } from 'lucide-react';\r\nimport { cn } from '@/shared/utils/classMerger';\r\n\r\ninterface IFormErrorProps {\r\n  message: string;\r\n  className?: string;\r\n}\r\n\r\nexport const FormError = ({ message, className }: IFormErrorProps) => {\r\n  if (!message) return null;\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'flex items-center gap-2 text-destructive text-sm',\r\n        className,\r\n      )}\r\n    >\r\n      <AlertCircle className=\"h-4 w-4\" />\r\n      <span>{message}</span>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Input } from '@/components/ui/input';\r\nimport { FormGroup } from '@/features/nutrition';\r\n\r\ninterface IMealDetailsFormProps {\r\n  name: string;\r\n  time: string;\r\n  onNameChange: (value: string) => void;\r\n  onTimeChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n}\r\n\r\nconst MEAL_OPTIONS = [\r\n  { value: 'breakfast', label: 'Breakfast' },\r\n  { value: 'lunch', label: 'Lunch' },\r\n  { value: 'dinner', label: 'Dinner' },\r\n  { value: 'snack', label: 'Snack' },\r\n  { value: 'other', label: 'Other' },\r\n];\r\n\r\nexport const MealDetailsForm: React.FC<IMealDetailsFormProps> = ({\r\n  name,\r\n  time,\r\n  onNameChange,\r\n  onTimeChange,\r\n}) => {\r\n  return (\r\n    <div className=\"grid grid-cols-2 gap-2\">\r\n      <FormGroup>\r\n        <Label htmlFor=\"meal-name\">Meal Type</Label>\r\n        <Select value={name} onValueChange={onNameChange}>\r\n          <SelectTrigger id=\"meal-name\" className=\"max-w-[180px]\">\r\n            <SelectValue placeholder=\"Select meal type\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            {MEAL_OPTIONS.map((option) => (\r\n              <SelectItem key={option.value} value={option.value}>\r\n                {option.label}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n      </FormGroup>\r\n\r\n      <FormGroup>\r\n        <Label htmlFor=\"meal-time\">Time</Label>\r\n        <Input\r\n          id=\"meal-time\"\r\n          type=\"time\"\r\n          value={time}\r\n          onChange={onTimeChange}\r\n          className=\"max-w-[180px]\"\r\n        />\r\n      </FormGroup>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { MealDetailsForm } from './MealsDetailsForm';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardFooter,\r\n  CardHeader,\r\n  CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Utensils } from 'lucide-react';\r\nimport { FormError } from '@/components/ui/form-error';\r\nimport { Timestamp } from 'firebase/firestore';\r\nimport {\r\n  formatTimeStampToTimeString,\r\n  formatTimeStringToTimestamp,\r\n} from '@/shared/utils/format';\r\n\r\ninterface IMealFormProps {\r\n  onSubmit: (mealData: { name: string; time: Timestamp }) => Promise<void>;\r\n  onCancel: () => void;\r\n  initialMeal?: { name: string; time: Timestamp };\r\n  isEditing?: boolean;\r\n}\r\n\r\nexport const MealForm: React.FC<IMealFormProps> = ({\r\n  onSubmit,\r\n  onCancel,\r\n  initialMeal,\r\n  isEditing = false,\r\n}) => {\r\n  // Form state\r\n  const [mealName, setMealName] = useState<string>(initialMeal?.name || '');\r\n  const [mealTime, setMealTime] = useState<Timestamp>(\r\n    initialMeal?.time || Timestamp.now(),\r\n  );\r\n  const [formErrors, setFormErrors] = useState({ mealName: '' });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Form validation\r\n  const validateForm = () => {\r\n    const errors = { mealName: '' };\r\n    let isValid = true;\r\n\r\n    if (!mealName) {\r\n      errors.mealName = 'Meal type is required';\r\n      isValid = false;\r\n    }\r\n\r\n    setFormErrors(errors);\r\n    return isValid;\r\n  };\r\n\r\n  // Form submission\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) return;\r\n\r\n    try {\r\n      setIsSubmitting(true);\r\n\r\n      await onSubmit({\r\n        name: mealName,\r\n        time: mealTime,\r\n      });\r\n    } catch (error) {\r\n      console.error('Error submitting meal form:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Meal details handlers\r\n  const handleMealNameChange = (value: string) => {\r\n    setMealName(value);\r\n    if (value) {\r\n      setFormErrors((prev) => ({ ...prev, mealName: '' }));\r\n    }\r\n  };\r\n\r\n  const handleMealTimeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setMealTime(formatTimeStringToTimestamp(e.target.value));\r\n  };\r\n\r\n  return (\r\n    <Card className=\"w-full\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <Utensils className=\"h-5 w-5\" />\r\n          {isEditing ? 'Edit Meal' : 'Add New Meal'}\r\n        </CardTitle>\r\n      </CardHeader>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <CardContent className=\"space-y-4\">\r\n          <MealDetailsForm\r\n            name={mealName}\r\n            time={formatTimeStampToTimeString(mealTime)}\r\n            onNameChange={handleMealNameChange}\r\n            onTimeChange={handleMealTimeChange}\r\n          />\r\n\r\n          {formErrors.mealName && <FormError message={formErrors.mealName} />}\r\n        </CardContent>\r\n\r\n        <CardFooter className=\"flex justify-end gap-2 border-t pt-4 mt-1\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={onCancel}\r\n            disabled={isSubmitting}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button type=\"submit\" disabled={isSubmitting}>\r\n            {isSubmitting\r\n              ? 'Saving...'\r\n              : isEditing\r\n                ? 'Save Changes'\r\n                : 'Save Meal'}\r\n          </Button>\r\n        </CardFooter>\r\n      </form>\r\n    </Card>\r\n  );\r\n};\r\n","import { IFoodItem } from '@/features/nutrition/types';\r\n\r\n// Validate form fields\r\nexport const validateFoodForm = (formData: IFoodItem) => {\r\n  const newErrors = {\r\n    name: '',\r\n    quantity: '',\r\n    calories: '',\r\n    protein: '',\r\n    carbs: '',\r\n    fat: '',\r\n  };\r\n\r\n  let isValid = true;\r\n\r\n  if (!formData.name.trim()) {\r\n    newErrors.name = 'Food name is required';\r\n    isValid = false;\r\n  }\r\n\r\n  if (formData.quantity <= 0) {\r\n    newErrors.quantity = 'Quantity must be greater than 0';\r\n    isValid = false;\r\n  }\r\n\r\n  if (formData.calories < 0) {\r\n    newErrors.calories = 'Calories cannot be negative';\r\n    isValid = false;\r\n  }\r\n\r\n  if (formData.protein < 0) {\r\n    newErrors.protein = 'Protein cannot be negative';\r\n    isValid = false;\r\n  }\r\n\r\n  if (formData.carbs < 0) {\r\n    newErrors.carbs = 'Carbs cannot be negative';\r\n    isValid = false;\r\n  }\r\n\r\n  if (formData.fat < 0) {\r\n    newErrors.fat = 'Fat cannot be negative';\r\n    isValid = false;\r\n  }\r\n\r\n  return { isValid, newErrors };\r\n};\r\n","import { IFoodSearchResult, INutrientInfo } from '@/features/nutrition';\r\nimport { IImportMeta } from '../../vite-env';\r\n\r\nconst VITE_USDA_API_KEY: IImportMeta = import.meta.env.VITE_USDA_API_KEY;\r\nconst USDA_API_BASE_URL: IImportMeta = import.meta.env.VITE_USDA_API_BASE_URL;\r\n\r\n// Nutrient IDs from USDA API\r\nconst NUTRIENT_IDS = {\r\n  calories: 1008, // Energy (kcal)\r\n  protein: 1003, // Protein\r\n  carbs: 1005, // Carbohydrates\r\n  fat: 1004, // Total lipids (fat)\r\n  fiber: 1079, // Fiber\r\n  sugar: 2000, // Sugars\r\n  sodium: 1093, // Sodium\r\n};\r\n\r\nexport const usdaApi = {\r\n  /**\r\n   * Search for foods by name/description\r\n   */\r\n  searchFoods: async (\r\n    query: string,\r\n    pageSize = 20,\r\n  ): Promise<IFoodSearchResult[]> => {\r\n    try {\r\n      const response = await fetch(\r\n        `${USDA_API_BASE_URL}/foods/search?api_key=${VITE_USDA_API_KEY}&query=${encodeURIComponent(\r\n          query,\r\n        )}&pageSize=${pageSize}`,\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`USDA API error: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      return data.foods || [];\r\n    } catch (error) {\r\n      console.error('Error searching foods:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get detailed information about a specific food by its FDC ID\r\n   */\r\n  getFoodDetails: async (fdcId: number): Promise<IFoodSearchResult> => {\r\n    try {\r\n      const response = await fetch(\r\n        `${USDA_API_BASE_URL}/food/${fdcId}?api_key=${VITE_USDA_API_KEY}`,\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`USDA API error: ${response.status}`);\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error(`Error getting food details for ID ${fdcId}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Extract common nutrient values from food data\r\n   */\r\n  extractNutrients: (food: IFoodSearchResult): INutrientInfo => {\r\n    const nutrients = {\r\n      calories: 0,\r\n      protein: 0,\r\n      carbs: 0,\r\n      fat: 0,\r\n      fiber: 0,\r\n      sugar: 0,\r\n      sodium: 0,\r\n    };\r\n\r\n    food.foodNutrients.forEach((nutrient) => {\r\n      switch (nutrient.nutrientId) {\r\n        case NUTRIENT_IDS.calories:\r\n          nutrients.calories = nutrient.value;\r\n          break;\r\n        case NUTRIENT_IDS.protein:\r\n          nutrients.protein = nutrient.value;\r\n          break;\r\n        case NUTRIENT_IDS.carbs:\r\n          nutrients.carbs = nutrient.value;\r\n          break;\r\n        case NUTRIENT_IDS.fat:\r\n          nutrients.fat = nutrient.value;\r\n          break;\r\n        case NUTRIENT_IDS.fiber:\r\n          nutrients.fiber = nutrient.value;\r\n          break;\r\n        case NUTRIENT_IDS.sugar:\r\n          nutrients.sugar = nutrient.value;\r\n          break;\r\n        case NUTRIENT_IDS.sodium:\r\n          nutrients.sodium = nutrient.value;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n\r\n    return nutrients;\r\n  },\r\n};\r\n","import React, { useState } from 'react';\r\nimport {\r\n  IFoodItem,\r\n  IFoodSearchResult,\r\n  FormGroup,\r\n  FoodSearch,\r\n} from '@/features/nutrition';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { AlertCircle } from 'lucide-react';\r\nimport { validateFoodForm } from '@/shared/utils/validateFood';\r\nimport { usdaApi } from '@/lib/USDAApi';\r\n\r\ninterface IFoodItemFormProps {\r\n  onSubmit: (foodItem: IFoodItem) => void;\r\n  onCancel: () => void;\r\n  initValues?: IFoodItem;\r\n}\r\n\r\nconst UNIT_OPTIONS = [\r\n  { value: 'g', label: 'grams (g)' },\r\n  { value: 'ml', label: 'milliliters (ml)' },\r\n];\r\n\r\nconst NUTRITION_FIELDS = [\r\n  { id: 'calories', label: 'Calories', placeholder: '165', unit: '' },\r\n  { id: 'protein', label: 'Protein', placeholder: '31', unit: 'g' },\r\n  { id: 'carbs', label: 'Carbs', placeholder: '0', unit: 'g' },\r\n  { id: 'fat', label: 'Fat', placeholder: '3.6', unit: 'g' },\r\n];\r\n\r\nexport const FoodItemForm: React.FC<IFoodItemFormProps> = ({\r\n  onSubmit,\r\n  onCancel,\r\n  initValues,\r\n}) => {\r\n  // Form state\r\n  const [formData, setFormData] = useState<IFoodItem>({\r\n    name: initValues?.name || '',\r\n    quantity: initValues?.quantity || 100,\r\n    calories: initValues?.calories || 0,\r\n    protein: initValues?.protein || 0,\r\n    carbs: initValues?.carbs || 0,\r\n    fat: initValues?.fat || 0,\r\n    unit: initValues?.unit || 'g',\r\n  });\r\n\r\n  // Form validation state\r\n  const [errors, setErrors] = useState({\r\n    name: '',\r\n    quantity: '',\r\n    calories: '',\r\n    protein: '',\r\n    carbs: '',\r\n    fat: '',\r\n  });\r\n\r\n  // Handle food selection from search\r\n  const handleSelectFood = (food: IFoodSearchResult) => {\r\n    const nutrients = usdaApi.extractNutrients(food);\r\n\r\n    setFormData({\r\n      ...formData,\r\n      name: food.description,\r\n      quantity: 100, // Default to 100g serving\r\n      calories: Math.round(nutrients.calories || 0),\r\n      protein: Math.round(nutrients.protein || 0),\r\n      carbs: Math.round(nutrients.carbs || 0),\r\n      fat: Math.round(nutrients.fat || 0),\r\n    });\r\n\r\n    // Clear any existing errors since we're setting valid data\r\n    setErrors({\r\n      name: '',\r\n      quantity: '',\r\n      calories: '',\r\n      protein: '',\r\n      carbs: '',\r\n      fat: '',\r\n    });\r\n  };\r\n\r\n  // Handle input changes for text and numeric fields\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { id, value } = e.target;\r\n    const field = id.replace('food-', '');\r\n\r\n    // Convert numeric fields to numbers\r\n    const numericFields = ['quantity', 'calories', 'protein', 'carbs', 'fat'];\r\n    const processedValue = numericFields.includes(field)\r\n      ? parseFloat(value) || 0\r\n      : value;\r\n\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [field]: processedValue,\r\n    }));\r\n\r\n    // Clear error when field is updated\r\n    if (errors[field as keyof typeof errors]) {\r\n      setErrors((prev) => ({\r\n        ...prev,\r\n        [field]: '',\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Handle unit selection\r\n  const handleUnitChange = (value: string) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      unit: value,\r\n    }));\r\n  };\r\n\r\n  // Submit form\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    const validationErrors = validateFoodForm(formData);\r\n    setErrors(validationErrors.newErrors);\r\n    if (!validationErrors.isValid) return;\r\n\r\n    onSubmit(formData);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      {/* Food Search */}\r\n      <div className=\"mb-6\">\r\n        <Label className=\"text-sm font-medium block mb-2\">\r\n          Search USDA Food Database\r\n        </Label>\r\n        <FoodSearch\r\n          onSelectFood={handleSelectFood}\r\n          buttonLabel=\"Select\"\r\n          autoFocus={!initValues}\r\n        />\r\n        <p className=\"text-xs text-muted-foreground mt-1\">\r\n          Search for foods to automatically fill nutrition information\r\n        </p>\r\n      </div>\r\n\r\n      {/* Food Name */}\r\n      <FormGroup>\r\n        <Label htmlFor=\"food-name\" className=\"text-sm font-medium\">\r\n          Food Name\r\n        </Label>\r\n        <Input\r\n          id=\"food-name\"\r\n          placeholder=\"e.g., Chicken Breast\"\r\n          value={formData.name}\r\n          onChange={handleInputChange}\r\n          className={errors.name ? 'border-destructive' : ''}\r\n        />\r\n        {errors.name && (\r\n          <div className=\"flex items-center mt-1 text-destructive text-xs\">\r\n            <AlertCircle className=\"h-3 w-3 mr-1\" />\r\n            <span>{errors.name}</span>\r\n          </div>\r\n        )}\r\n      </FormGroup>\r\n\r\n      {/* Quantity and Unit */}\r\n      <div className=\"grid grid-cols-2 gap-3\">\r\n        <FormGroup>\r\n          <Label htmlFor=\"food-quantity\" className=\"text-sm font-medium\">\r\n            Quantity\r\n          </Label>\r\n          <Input\r\n            id=\"food-quantity\"\r\n            type=\"number\"\r\n            placeholder=\"100\"\r\n            value={formData.quantity === 0 ? '' : formData.quantity}\r\n            onChange={handleInputChange}\r\n            min=\"0\"\r\n            step=\"any\"\r\n            className={errors.quantity ? 'border-destructive' : ''}\r\n          />\r\n          {errors.quantity && (\r\n            <div className=\"flex items-center mt-1 text-destructive text-xs\">\r\n              <AlertCircle className=\"h-3 w-3 mr-1\" />\r\n              <span>{errors.quantity}</span>\r\n            </div>\r\n          )}\r\n        </FormGroup>\r\n\r\n        <FormGroup>\r\n          <Label htmlFor=\"food-unit\" className=\"text-sm font-medium\">\r\n            Unit\r\n          </Label>\r\n          <Select value={formData.unit} onValueChange={handleUnitChange}>\r\n            <SelectTrigger id=\"food-unit\">\r\n              <SelectValue placeholder=\"Select unit\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {UNIT_OPTIONS.map((option) => (\r\n                <SelectItem key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </FormGroup>\r\n      </div>\r\n\r\n      {/* Nutrition Information */}\r\n      <div>\r\n        <h3 className=\"text-sm font-medium mb-2\">Nutrition Information</h3>\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          {NUTRITION_FIELDS.map((field) => (\r\n            <FormGroup key={field.id}>\r\n              <Label\r\n                htmlFor={`food-${field.id}`}\r\n                className=\"text-sm font-medium\"\r\n              >\r\n                {field.label}\r\n                {field.unit ? ` (${field.unit})` : ''}\r\n              </Label>\r\n              <Input\r\n                id={`food-${field.id}`}\r\n                type=\"number\"\r\n                placeholder={field.placeholder}\r\n                value={\r\n                  formData[field.id as keyof typeof formData] === 0\r\n                    ? ''\r\n                    : formData[field.id as keyof typeof formData]\r\n                }\r\n                onChange={handleInputChange}\r\n                min=\"0\"\r\n                step=\"any\"\r\n                className={\r\n                  errors[field.id as keyof typeof errors]\r\n                    ? 'border-destructive'\r\n                    : ''\r\n                }\r\n              />\r\n              {errors[field.id as keyof typeof errors] && (\r\n                <div className=\"flex items-center mt-1 text-destructive text-xs\">\r\n                  <AlertCircle className=\"h-3 w-3 mr-1\" />\r\n                  <span>{errors[field.id as keyof typeof errors]}</span>\r\n                </div>\r\n              )}\r\n            </FormGroup>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Form Actions */}\r\n      <div className=\"flex justify-end gap-2 pt-2\">\r\n        <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={onCancel}>\r\n          Cancel\r\n        </Button>\r\n        <Button type=\"submit\" size=\"sm\">\r\n          {initValues ? 'Update' : 'Add'} Food Item\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { MealForm } from './forms/MealForm';\r\nimport { FoodItemForm } from './forms/FoodItemForm';\r\nimport { IFoodItem, IMeal } from '@/features/nutrition/types';\r\nimport { Timestamp } from 'firebase/firestore';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  CardTitle,\r\n  CardFooter,\r\n} from '@/components/ui/card';\r\nimport { PlusCircle, Edit, Trash2, ArrowLeft, Check, X } from 'lucide-react';\r\nimport { Badge } from '@/components/ui/badge';\r\n\r\ninterface IMealData {\r\n  name: string;\r\n  time: Timestamp;\r\n}\r\n\r\ninterface IAddNewMealProps {\r\n  onSubmit: (mealData: IMeal) => Promise<void>;\r\n  onCancel: () => void;\r\n  initialMeal?: IMeal;\r\n  isEditing?: boolean;\r\n}\r\n\r\nexport const AddNewMeal: React.FC<IAddNewMealProps> = ({\r\n  onSubmit,\r\n  onCancel,\r\n  initialMeal,\r\n  isEditing = false,\r\n}) => {\r\n  // States for meal creation workflow\r\n  const [step, setStep] = useState<'meal' | 'food'>('meal');\r\n  const [mealData, setMealData] = useState<IMealData>({\r\n    name: initialMeal?.name || '',\r\n    time: initialMeal?.time || Timestamp.now(),\r\n  });\r\n  const [foodItems, setFoodItems] = useState<IFoodItem[]>(\r\n    initialMeal?.foods || [],\r\n  );\r\n\r\n  // States for food item editing\r\n  const [isEditingFood, setIsEditingFood] = useState(false);\r\n  const [currentFoodItem, setCurrentFoodItem] = useState<IFoodItem | null>(\r\n    null,\r\n  );\r\n  const [editingFoodIndex, setEditingFoodIndex] = useState<number | null>(null);\r\n\r\n  // Loading state\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Handle meal form submission\r\n  const handleMealSubmit = async (data: IMealData) => {\r\n    setMealData(data);\r\n    setStep('food');\r\n  };\r\n\r\n  // Add a new food item\r\n  const handleAddFood = () => {\r\n    setIsEditingFood(true);\r\n    setCurrentFoodItem(null);\r\n    setEditingFoodIndex(null);\r\n  };\r\n\r\n  // Edit an existing food item\r\n  const handleEditFood = (index: number) => {\r\n    setIsEditingFood(true);\r\n    setCurrentFoodItem(foodItems[index]);\r\n    setEditingFoodIndex(index);\r\n  };\r\n\r\n  // Remove a food item\r\n  const handleRemoveFood = (index: number) => {\r\n    setFoodItems((prev) => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  // Handle food form submission\r\n  const handleFoodSubmit = (foodItem: IFoodItem) => {\r\n    if (editingFoodIndex !== null) {\r\n      // Update existing food item\r\n      setFoodItems((prev) =>\r\n        prev.map((item, i) => (i === editingFoodIndex ? foodItem : item)),\r\n      );\r\n    } else {\r\n      // Add new food item\r\n      setFoodItems((prev) => [...prev, foodItem]);\r\n    }\r\n\r\n    // Reset editing state\r\n    setIsEditingFood(false);\r\n    setCurrentFoodItem(null);\r\n    setEditingFoodIndex(null);\r\n  };\r\n\r\n  // Cancel food editing\r\n  const handleFoodCancel = () => {\r\n    setIsEditingFood(false);\r\n    setCurrentFoodItem(null);\r\n    setEditingFoodIndex(null);\r\n  };\r\n\r\n  // Go back to meal details\r\n  const handleBackToMeal = () => {\r\n    setStep('meal');\r\n  };\r\n\r\n  // Final submission of the complete meal\r\n  const handleFinalize = async () => {\r\n    if (!mealData || foodItems.length === 0) return;\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const completeMeal: IMeal = {\r\n        id: initialMeal?.id || `meal-${Date.now()}`,\r\n        name: mealData.name,\r\n        time: mealData.time,\r\n        foods: foodItems,\r\n      };\r\n\r\n      await onSubmit(completeMeal);\r\n    } catch (error) {\r\n      console.error('Error submitting meal:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const totals = foodItems.reduce(\r\n    (acc, food) => {\r\n      acc.calories += (food.calories * food.quantity) / 100;\r\n      acc.protein += (food.protein * food.quantity) / 100;\r\n      acc.carbs += (food.carbs * food.quantity) / 100;\r\n      acc.fat += (food.fat * food.quantity) / 100;\r\n      return acc;\r\n    },\r\n    { calories: 0, protein: 0, carbs: 0, fat: 0 },\r\n  );\r\n\r\n  return (\r\n    <Card className=\"w-full\">\r\n      <CardHeader>\r\n        <CardTitle>\r\n          {isEditing ? 'Edit Meal' : 'Add New Meal'}\r\n          {step === 'food' && (\r\n            <Badge className=\"ml-2\">{foodItems.length} items</Badge>\r\n          )}\r\n        </CardTitle>\r\n      </CardHeader>\r\n\r\n      <CardContent>\r\n        {step === 'meal' ? (\r\n          <MealForm\r\n            onSubmit={handleMealSubmit}\r\n            onCancel={onCancel}\r\n            initialMeal={mealData}\r\n            isEditing={isEditing}\r\n          />\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {/* Meal summary */}\r\n            <div className=\"bg-muted p-3 rounded-md flex justify-between items-center\">\r\n              <div>\r\n                <h3 className=\"text-sm font-medium capitalize\">\r\n                  {mealData.name}\r\n                </h3>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {new Date(mealData.time.toMillis()).toLocaleTimeString([], {\r\n                    hour: '2-digit',\r\n                    minute: '2-digit',\r\n                  })}\r\n                </p>\r\n              </div>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={handleBackToMeal}>\r\n                <Edit className=\"h-4 w-4 mr-2\" />\r\n                Edit\r\n              </Button>\r\n            </div>\r\n\r\n            {isEditingFood ? (\r\n              <div className=\"border rounded-lg p-4\">\r\n                <FoodItemForm\r\n                  onSubmit={handleFoodSubmit}\r\n                  onCancel={handleFoodCancel}\r\n                  initValues={currentFoodItem || undefined}\r\n                />\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {foodItems.length > 0 && (\r\n                  <div className=\"space-y-2\">\r\n                    {/* Food items list */}\r\n                    {foodItems.map((food, index) => (\r\n                      <div\r\n                        key={index}\r\n                        className=\"border rounded-lg p-3 flex justify-between items-center\"\r\n                      >\r\n                        <div>\r\n                          <p className=\"font-medium\">{food.name}</p>\r\n                          <div className=\"flex gap-3 text-sm text-muted-foreground\">\r\n                            <span>\r\n                              {food.quantity} {food.unit}\r\n                            </span>\r\n                            <span>{food.calories} kcal</span>\r\n                            <span>{food.protein}g protein</span>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex gap-1\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleEditFood(index)}\r\n                            className=\"h-8 w-8 p-0\"\r\n                          >\r\n                            <Edit className=\"h-4 w-4\" />\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleRemoveFood(index)}\r\n                            className=\"h-8 w-8 p-0 text-destructive hover:bg-destructive/10\"\r\n                          >\r\n                            <Trash2 className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n\r\n                    {/* Nutrition totals */}\r\n                    <div className=\"bg-secondary/40 p-3 rounded-lg\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"font-medium text-sm\">\r\n                          Total calories:\r\n                        </span>\r\n                        <span className=\"font-medium text-sm\">\r\n                          {totals.calories} kcal\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"font-medium text-sm\">\r\n                          Total protein:\r\n                        </span>\r\n\r\n                        <span className=\"font-medium text-sm\">\r\n                          {totals.protein}g\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"font-medium text-sm\">\r\n                          Total carbs:\r\n                        </span>\r\n                        <span className=\"font-medium text-sm\">\r\n                          {totals.carbs}g\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"font-medium text-sm\">Total fat:</span>\r\n                        <span className=\"font-medium text-sm\">\r\n                          {totals.fat}g\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Add new food button */}\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"w-full\"\r\n                  onClick={handleAddFood}\r\n                >\r\n                  <PlusCircle className=\"h-4 w-4 mr-2\" />\r\n                  {foodItems.length ? 'Add Another Food' : 'Add Food Item'}\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n\r\n      {step === 'food' && !isEditingFood && (\r\n        <CardFooter className=\"border-t pt-4 flex justify-between\">\r\n          <Button variant=\"ghost\" onClick={onCancel} disabled={isSubmitting}>\r\n            <X className=\"h-4 w-4 mr-2\" />\r\n            Cancel\r\n          </Button>\r\n\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={handleBackToMeal}\r\n              disabled={isSubmitting}\r\n            >\r\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n              Back\r\n            </Button>\r\n            <Button\r\n              onClick={handleFinalize}\r\n              disabled={foodItems.length === 0 || isSubmitting}\r\n            >\r\n              <Check className=\"h-4 w-4 mr-2\" />\r\n              {isSubmitting\r\n                ? 'Saving...'\r\n                : isEditing\r\n                  ? 'Update Meal'\r\n                  : 'Add Meal'}\r\n            </Button>\r\n          </div>\r\n        </CardFooter>\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n","import { IMeal } from '@/features/nutrition/types';\r\n\r\ntype Nutrients = 'calories' | 'protein' | 'carbs' | 'fat';\r\nexport const calculateTotal = (meals: IMeal[], nutrient: Nutrients): number => {\r\n  return meals.reduce((total, meal) => {\r\n    return (\r\n      total +\r\n      meal.foods.reduce((mealTotal, food) => {\r\n        return mealTotal + food[nutrient] * (food.quantity / 100);\r\n      }, 0)\r\n    );\r\n  }, 0);\r\n};\r\n","import React from 'react';\r\nimport { IMeal, FoodsList } from '@/features/nutrition/index';\r\nimport { calculateTotal } from '@/shared/utils/calculateTotalNutrients';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Clock, Edit2, Trash2, ChevronDown, ChevronUp } from 'lucide-react';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { useState } from 'react';\r\nimport { cn } from '@/shared/utils/classMerger';\r\n\r\ninterface IMealCardProps {\r\n  meal: IMeal;\r\n  className?: string;\r\n  onEdit?: (meal: IMeal) => Promise<void>;\r\n  onDelete?: () => Promise<void>;\r\n}\r\n\r\nexport const MealCard: React.FC<IMealCardProps> = ({\r\n  meal,\r\n  className,\r\n  onEdit,\r\n  onDelete,\r\n}) => {\r\n  const [expanded, setExpanded] = useState(false);\r\n\r\n  // Calculate total calories and protein from all foods in the meal\r\n  const totalCalories = calculateTotal([meal], 'calories');\r\n  const totalProtein = calculateTotal([meal], 'protein');\r\n\r\n  // Format timestamp to readable time\r\n  const formattedTime = meal.time\r\n    ? new Date(meal.time.toDate()).toLocaleTimeString([], {\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n      })\r\n    : 'No time set';\r\n\r\n  const toggleExpanded = () => setExpanded((prev) => !prev);\r\n\r\n  return (\r\n    <Card className={cn('overflow-hidden', className)}>\r\n      <CardHeader className=\"py-3 px-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <CardTitle className=\"text-base capitalize flex items-center\">\r\n            {meal.name}\r\n            <Badge variant=\"outline\" className=\"ml-2 font-normal text-xs\">\r\n              {formattedTime}\r\n            </Badge>\r\n          </CardTitle>\r\n\r\n          <div className=\"flex items-center gap-1\">\r\n            {onEdit && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                className=\"h-8 w-8 p-0\"\r\n                onClick={() => onEdit(meal)}\r\n              >\r\n                <Edit2 className=\"h-4 w-4\" />\r\n                <span className=\"sr-only\">Edit</span>\r\n              </Button>\r\n            )}\r\n\r\n            {onDelete && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={onDelete}\r\n                className=\"h-8 w-8 p-0 text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n              >\r\n                <Trash2 className=\"h-4 w-4\" />\r\n                <span className=\"sr-only\">Delete</span>\r\n              </Button>\r\n            )}\r\n\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={toggleExpanded}\r\n              className=\"h-8 w-8 p-0 ml-1\"\r\n            >\r\n              {expanded ? (\r\n                <ChevronUp className=\"h-4 w-4\" />\r\n              ) : (\r\n                <ChevronDown className=\"h-4 w-4\" />\r\n              )}\r\n              <span className=\"sr-only\">\r\n                {expanded ? 'Collapse' : 'Expand'}\r\n              </span>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"px-4 pb-4 pt-0\">\r\n        <div className=\"flex items-center justify-between text-sm mb-2\">\r\n          <div className=\"flex items-center text-muted-foreground\">\r\n            <Clock className=\"h-3.5 w-3.5 mr-1.5\" />\r\n            <span>{formattedTime}</span>\r\n          </div>\r\n\r\n          <div className=\"flex gap-3\">\r\n            <span className=\"font-medium\">{totalCalories} kcal</span>\r\n            <span className=\"font-medium\">{totalProtein}g protein</span>\r\n          </div>\r\n        </div>\r\n\r\n        {expanded && meal.foods.length > 0 && (\r\n          <div className=\"pt-2 mt-2 border-t\">\r\n            <FoodsList foods={meal.foods} />\r\n          </div>\r\n        )}\r\n\r\n        {expanded && meal.foods.length === 0 && (\r\n          <div className=\"py-3 text-center bg-muted/30 rounded-md mt-2\">\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              No food items in this meal\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {!expanded && meal.foods.length > 0 && (\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={toggleExpanded}\r\n            className=\"w-full mt-1 border border-dashed text-muted-foreground\"\r\n          >\r\n            Show {meal.foods.length} food item{meal.foods.length > 1 ? 's' : ''}\r\n          </Button>\r\n        )}\r\n        {expanded && meal.foods.length > 0 && (\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={toggleExpanded}\r\n            className=\"w-full mt-1 border border-dashed text-muted-foreground\"\r\n          >\r\n            Hide\r\n          </Button>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\r\n\r\ninterface IDateSelectorProps {\r\n  selectedDate: Date;\r\n  onDateChange: (date: Date) => void;\r\n}\r\n\r\nexport const DateSelector: React.FC<IDateSelectorProps> = ({\r\n  selectedDate,\r\n  onDateChange,\r\n}) => {\r\n  const formatDisplayDate = (date: Date): string => {\r\n    const options: Intl.DateTimeFormatOptions = {\r\n      weekday: 'short',\r\n      month: 'short',\r\n      day: 'numeric',\r\n    };\r\n    return date.toLocaleDateString('en-US', options);\r\n  };\r\n\r\n  const handlePreviousDay = () => {\r\n    const newDate = new Date(selectedDate);\r\n    newDate.setDate(selectedDate.getDate() - 1);\r\n    onDateChange(newDate);\r\n  };\r\n\r\n  const handleNextDay = () => {\r\n    const newDate = new Date(selectedDate);\r\n    newDate.setDate(selectedDate.getDate() + 1);\r\n    onDateChange(newDate);\r\n  };\r\n\r\n  const isToday = (date: Date): boolean => {\r\n    const today = new Date();\r\n    return (\r\n      date.getDate() === today.getDate() &&\r\n      date.getMonth() === today.getMonth() &&\r\n      date.getFullYear() === today.getFullYear()\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Card className=\"mb-4 shadow-sm\">\r\n      <CardContent className=\"p-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={handlePreviousDay}\r\n            aria-label=\"Previous day\"\r\n          >\r\n            <ChevronLeft />\r\n          </Button>\r\n\r\n          <div className=\"flex flex-col items-center\">\r\n            <span className=\"font-medium\">\r\n              {formatDisplayDate(selectedDate)}\r\n            </span>\r\n            {isToday(selectedDate) && (\r\n              <span className=\"text-xs text-primary\">Today</span>\r\n            )}\r\n          </div>\r\n\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={handleNextDay}\r\n            aria-label=\"Next day\"\r\n          >\r\n            <ChevronRight />\r\n          </Button>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Loader2, Search, X } from 'lucide-react';\r\n\r\ninterface IFoodSearchBarProps {\r\n  query: string;\r\n  onQueryChange: (query: string) => void;\r\n  onSearch: () => void;\r\n  onClear: () => void;\r\n  isLoading: boolean;\r\n  onKeyDown?: (e: React.KeyboardEvent<HTMLInputElement>) => void;\r\n\r\n  inputRef: React.RefObject<HTMLInputElement | null>;\r\n}\r\n\r\nexport const FoodSearchBar: React.FC<IFoodSearchBarProps> = ({\r\n  query,\r\n  onQueryChange,\r\n  onSearch,\r\n  onClear,\r\n  isLoading,\r\n  onKeyDown,\r\n  inputRef,\r\n}) => {\r\n  return (\r\n    <div className=\"flex items-center gap-2\">\r\n      <div className=\"relative flex-1\">\r\n        <Input\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          placeholder=\"Search for a food...\"\r\n          value={query}\r\n          onChange={(e) => onQueryChange(e.target.value)}\r\n          onKeyDown={onKeyDown}\r\n          className=\"pr-8\"\r\n        />\r\n        {query && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClear}\r\n            className=\"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n          </button>\r\n        )}\r\n      </div>\r\n      <Button\r\n        type=\"button\"\r\n        variant=\"secondary\"\r\n        size=\"sm\"\r\n        onClick={onSearch}\r\n        disabled={isLoading || !query.trim() || query.trim().length < 2}\r\n      >\r\n        {isLoading ? (\r\n          <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n        ) : (\r\n          <Search className=\"h-4 w-4\" />\r\n        )}\r\n        <span className=\"sr-only\">Search</span>\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Plus } from 'lucide-react';\r\nimport { IFoodSearchResult } from '@/features/nutrition/types';\r\nimport { usdaApi } from '@/lib/USDAApi';\r\n\r\ninterface IFoodSearchItemProps {\r\n  food: IFoodSearchResult;\r\n  onSelect: (food: IFoodSearchResult) => void;\r\n  buttonLabel?: string;\r\n}\r\n\r\nexport const FoodSearchItem: React.FC<IFoodSearchItemProps> = ({\r\n  food,\r\n  onSelect,\r\n  buttonLabel = 'Add',\r\n}) => {\r\n  const nutrients = usdaApi.extractNutrients(food);\r\n\r\n  return (\r\n    <div className=\"p-3 hover:bg-accent/50 transition-colors\">\r\n      <div className=\"flex justify-between items-start\">\r\n        <div className=\"flex-1 cursor-pointer\" onClick={() => onSelect(food)}>\r\n          <h4 className=\"font-medium text-sm\">{food.description}</h4>\r\n          {food.brandOwner && (\r\n            <p className=\"text-xs text-muted-foreground truncate max-w-[90%]\">\r\n              {food.brandOwner}\r\n            </p>\r\n          )}\r\n          <div className=\"flex flex-wrap gap-x-3 gap-y-1 mt-1 text-xs text-muted-foreground\">\r\n            <span className=\"font-medium text-foreground\">\r\n              {Math.round(nutrients.calories)} cal\r\n            </span>\r\n            <span>P: {nutrients.protein.toFixed(1)}g</span>\r\n            <span>C: {nutrients.carbs.toFixed(1)}g</span>\r\n            <span>F: {nutrients.fat.toFixed(1)}g</span>\r\n          </div>\r\n        </div>\r\n        <Button\r\n          size=\"sm\"\r\n          variant=\"ghost\"\r\n          onClick={() => onSelect(food)}\r\n          className=\"h-7 px-2\"\r\n        >\r\n          <Plus className=\"h-3.5 w-3.5 mr-1\" />\r\n          {buttonLabel}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","\"use client\";\n\n// src/scroll-area.tsx\nimport * as React2 from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\nimport { clamp } from \"@radix-ui/number\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\n\n// src/use-state-machine.ts\nimport * as React from \"react\";\nfunction useStateMachine(initialState, machine) {\n  return React.useReducer((state, event) => {\n    const nextState = machine[state][event];\n    return nextState ?? state;\n  }, initialState);\n}\n\n// src/scroll-area.tsx\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar SCROLL_AREA_NAME = \"ScrollArea\";\nvar [createScrollAreaContext, createScrollAreaScope] = createContextScope(SCROLL_AREA_NAME);\nvar [ScrollAreaProvider, useScrollAreaContext] = createScrollAreaContext(SCROLL_AREA_NAME);\nvar ScrollArea = React2.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeScrollArea,\n      type = \"hover\",\n      dir,\n      scrollHideDelay = 600,\n      ...scrollAreaProps\n    } = props;\n    const [scrollArea, setScrollArea] = React2.useState(null);\n    const [viewport, setViewport] = React2.useState(null);\n    const [content, setContent] = React2.useState(null);\n    const [scrollbarX, setScrollbarX] = React2.useState(null);\n    const [scrollbarY, setScrollbarY] = React2.useState(null);\n    const [cornerWidth, setCornerWidth] = React2.useState(0);\n    const [cornerHeight, setCornerHeight] = React2.useState(0);\n    const [scrollbarXEnabled, setScrollbarXEnabled] = React2.useState(false);\n    const [scrollbarYEnabled, setScrollbarYEnabled] = React2.useState(false);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setScrollArea(node));\n    const direction = useDirection(dir);\n    return /* @__PURE__ */ jsx(\n      ScrollAreaProvider,\n      {\n        scope: __scopeScrollArea,\n        type,\n        dir: direction,\n        scrollHideDelay,\n        scrollArea,\n        viewport,\n        onViewportChange: setViewport,\n        content,\n        onContentChange: setContent,\n        scrollbarX,\n        onScrollbarXChange: setScrollbarX,\n        scrollbarXEnabled,\n        onScrollbarXEnabledChange: setScrollbarXEnabled,\n        scrollbarY,\n        onScrollbarYChange: setScrollbarY,\n        scrollbarYEnabled,\n        onScrollbarYEnabledChange: setScrollbarYEnabled,\n        onCornerWidthChange: setCornerWidth,\n        onCornerHeightChange: setCornerHeight,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            dir: direction,\n            ...scrollAreaProps,\n            ref: composedRefs,\n            style: {\n              position: \"relative\",\n              // Pass corner sizes as CSS vars to reduce re-renders of context consumers\n              [\"--radix-scroll-area-corner-width\"]: cornerWidth + \"px\",\n              [\"--radix-scroll-area-corner-height\"]: cornerHeight + \"px\",\n              ...props.style\n            }\n          }\n        )\n      }\n    );\n  }\n);\nScrollArea.displayName = SCROLL_AREA_NAME;\nvar VIEWPORT_NAME = \"ScrollAreaViewport\";\nvar ScrollAreaViewport = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeScrollArea, children, nonce, ...viewportProps } = props;\n    const context = useScrollAreaContext(VIEWPORT_NAME, __scopeScrollArea);\n    const ref = React2.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref, context.onViewportChange);\n    return /* @__PURE__ */ jsxs(Fragment, { children: [\n      /* @__PURE__ */ jsx(\n        \"style\",\n        {\n          dangerouslySetInnerHTML: {\n            __html: `[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}`\n          },\n          nonce\n        }\n      ),\n      /* @__PURE__ */ jsx(\n        Primitive.div,\n        {\n          \"data-radix-scroll-area-viewport\": \"\",\n          ...viewportProps,\n          ref: composedRefs,\n          style: {\n            /**\n             * We don't support `visible` because the intention is to have at least one scrollbar\n             * if this component is used and `visible` will behave like `auto` in that case\n             * https://developer.mozilla.org/en-US/docs/Web/CSS/overflow#description\n             *\n             * We don't handle `auto` because the intention is for the native implementation\n             * to be hidden if using this component. We just want to ensure the node is scrollable\n             * so could have used either `scroll` or `auto` here. We picked `scroll` to prevent\n             * the browser from having to work out whether to render native scrollbars or not,\n             * we tell it to with the intention of hiding them in CSS.\n             */\n            overflowX: context.scrollbarXEnabled ? \"scroll\" : \"hidden\",\n            overflowY: context.scrollbarYEnabled ? \"scroll\" : \"hidden\",\n            ...props.style\n          },\n          children: /* @__PURE__ */ jsx(\"div\", { ref: context.onContentChange, style: { minWidth: \"100%\", display: \"table\" }, children })\n        }\n      )\n    ] });\n  }\n);\nScrollAreaViewport.displayName = VIEWPORT_NAME;\nvar SCROLLBAR_NAME = \"ScrollAreaScrollbar\";\nvar ScrollAreaScrollbar = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { forceMount, ...scrollbarProps } = props;\n    const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n    const { onScrollbarXEnabledChange, onScrollbarYEnabledChange } = context;\n    const isHorizontal = props.orientation === \"horizontal\";\n    React2.useEffect(() => {\n      isHorizontal ? onScrollbarXEnabledChange(true) : onScrollbarYEnabledChange(true);\n      return () => {\n        isHorizontal ? onScrollbarXEnabledChange(false) : onScrollbarYEnabledChange(false);\n      };\n    }, [isHorizontal, onScrollbarXEnabledChange, onScrollbarYEnabledChange]);\n    return context.type === \"hover\" ? /* @__PURE__ */ jsx(ScrollAreaScrollbarHover, { ...scrollbarProps, ref: forwardedRef, forceMount }) : context.type === \"scroll\" ? /* @__PURE__ */ jsx(ScrollAreaScrollbarScroll, { ...scrollbarProps, ref: forwardedRef, forceMount }) : context.type === \"auto\" ? /* @__PURE__ */ jsx(ScrollAreaScrollbarAuto, { ...scrollbarProps, ref: forwardedRef, forceMount }) : context.type === \"always\" ? /* @__PURE__ */ jsx(ScrollAreaScrollbarVisible, { ...scrollbarProps, ref: forwardedRef }) : null;\n  }\n);\nScrollAreaScrollbar.displayName = SCROLLBAR_NAME;\nvar ScrollAreaScrollbarHover = React2.forwardRef((props, forwardedRef) => {\n  const { forceMount, ...scrollbarProps } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const [visible, setVisible] = React2.useState(false);\n  React2.useEffect(() => {\n    const scrollArea = context.scrollArea;\n    let hideTimer = 0;\n    if (scrollArea) {\n      const handlePointerEnter = () => {\n        window.clearTimeout(hideTimer);\n        setVisible(true);\n      };\n      const handlePointerLeave = () => {\n        hideTimer = window.setTimeout(() => setVisible(false), context.scrollHideDelay);\n      };\n      scrollArea.addEventListener(\"pointerenter\", handlePointerEnter);\n      scrollArea.addEventListener(\"pointerleave\", handlePointerLeave);\n      return () => {\n        window.clearTimeout(hideTimer);\n        scrollArea.removeEventListener(\"pointerenter\", handlePointerEnter);\n        scrollArea.removeEventListener(\"pointerleave\", handlePointerLeave);\n      };\n    }\n  }, [context.scrollArea, context.scrollHideDelay]);\n  return /* @__PURE__ */ jsx(Presence, { present: forceMount || visible, children: /* @__PURE__ */ jsx(\n    ScrollAreaScrollbarAuto,\n    {\n      \"data-state\": visible ? \"visible\" : \"hidden\",\n      ...scrollbarProps,\n      ref: forwardedRef\n    }\n  ) });\n});\nvar ScrollAreaScrollbarScroll = React2.forwardRef((props, forwardedRef) => {\n  const { forceMount, ...scrollbarProps } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const isHorizontal = props.orientation === \"horizontal\";\n  const debounceScrollEnd = useDebounceCallback(() => send(\"SCROLL_END\"), 100);\n  const [state, send] = useStateMachine(\"hidden\", {\n    hidden: {\n      SCROLL: \"scrolling\"\n    },\n    scrolling: {\n      SCROLL_END: \"idle\",\n      POINTER_ENTER: \"interacting\"\n    },\n    interacting: {\n      SCROLL: \"interacting\",\n      POINTER_LEAVE: \"idle\"\n    },\n    idle: {\n      HIDE: \"hidden\",\n      SCROLL: \"scrolling\",\n      POINTER_ENTER: \"interacting\"\n    }\n  });\n  React2.useEffect(() => {\n    if (state === \"idle\") {\n      const hideTimer = window.setTimeout(() => send(\"HIDE\"), context.scrollHideDelay);\n      return () => window.clearTimeout(hideTimer);\n    }\n  }, [state, context.scrollHideDelay, send]);\n  React2.useEffect(() => {\n    const viewport = context.viewport;\n    const scrollDirection = isHorizontal ? \"scrollLeft\" : \"scrollTop\";\n    if (viewport) {\n      let prevScrollPos = viewport[scrollDirection];\n      const handleScroll = () => {\n        const scrollPos = viewport[scrollDirection];\n        const hasScrollInDirectionChanged = prevScrollPos !== scrollPos;\n        if (hasScrollInDirectionChanged) {\n          send(\"SCROLL\");\n          debounceScrollEnd();\n        }\n        prevScrollPos = scrollPos;\n      };\n      viewport.addEventListener(\"scroll\", handleScroll);\n      return () => viewport.removeEventListener(\"scroll\", handleScroll);\n    }\n  }, [context.viewport, isHorizontal, send, debounceScrollEnd]);\n  return /* @__PURE__ */ jsx(Presence, { present: forceMount || state !== \"hidden\", children: /* @__PURE__ */ jsx(\n    ScrollAreaScrollbarVisible,\n    {\n      \"data-state\": state === \"hidden\" ? \"hidden\" : \"visible\",\n      ...scrollbarProps,\n      ref: forwardedRef,\n      onPointerEnter: composeEventHandlers(props.onPointerEnter, () => send(\"POINTER_ENTER\")),\n      onPointerLeave: composeEventHandlers(props.onPointerLeave, () => send(\"POINTER_LEAVE\"))\n    }\n  ) });\n});\nvar ScrollAreaScrollbarAuto = React2.forwardRef((props, forwardedRef) => {\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const { forceMount, ...scrollbarProps } = props;\n  const [visible, setVisible] = React2.useState(false);\n  const isHorizontal = props.orientation === \"horizontal\";\n  const handleResize = useDebounceCallback(() => {\n    if (context.viewport) {\n      const isOverflowX = context.viewport.offsetWidth < context.viewport.scrollWidth;\n      const isOverflowY = context.viewport.offsetHeight < context.viewport.scrollHeight;\n      setVisible(isHorizontal ? isOverflowX : isOverflowY);\n    }\n  }, 10);\n  useResizeObserver(context.viewport, handleResize);\n  useResizeObserver(context.content, handleResize);\n  return /* @__PURE__ */ jsx(Presence, { present: forceMount || visible, children: /* @__PURE__ */ jsx(\n    ScrollAreaScrollbarVisible,\n    {\n      \"data-state\": visible ? \"visible\" : \"hidden\",\n      ...scrollbarProps,\n      ref: forwardedRef\n    }\n  ) });\n});\nvar ScrollAreaScrollbarVisible = React2.forwardRef((props, forwardedRef) => {\n  const { orientation = \"vertical\", ...scrollbarProps } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const thumbRef = React2.useRef(null);\n  const pointerOffsetRef = React2.useRef(0);\n  const [sizes, setSizes] = React2.useState({\n    content: 0,\n    viewport: 0,\n    scrollbar: { size: 0, paddingStart: 0, paddingEnd: 0 }\n  });\n  const thumbRatio = getThumbRatio(sizes.viewport, sizes.content);\n  const commonProps = {\n    ...scrollbarProps,\n    sizes,\n    onSizesChange: setSizes,\n    hasThumb: Boolean(thumbRatio > 0 && thumbRatio < 1),\n    onThumbChange: (thumb) => thumbRef.current = thumb,\n    onThumbPointerUp: () => pointerOffsetRef.current = 0,\n    onThumbPointerDown: (pointerPos) => pointerOffsetRef.current = pointerPos\n  };\n  function getScrollPosition(pointerPos, dir) {\n    return getScrollPositionFromPointer(pointerPos, pointerOffsetRef.current, sizes, dir);\n  }\n  if (orientation === \"horizontal\") {\n    return /* @__PURE__ */ jsx(\n      ScrollAreaScrollbarX,\n      {\n        ...commonProps,\n        ref: forwardedRef,\n        onThumbPositionChange: () => {\n          if (context.viewport && thumbRef.current) {\n            const scrollPos = context.viewport.scrollLeft;\n            const offset = getThumbOffsetFromScroll(scrollPos, sizes, context.dir);\n            thumbRef.current.style.transform = `translate3d(${offset}px, 0, 0)`;\n          }\n        },\n        onWheelScroll: (scrollPos) => {\n          if (context.viewport) context.viewport.scrollLeft = scrollPos;\n        },\n        onDragScroll: (pointerPos) => {\n          if (context.viewport) {\n            context.viewport.scrollLeft = getScrollPosition(pointerPos, context.dir);\n          }\n        }\n      }\n    );\n  }\n  if (orientation === \"vertical\") {\n    return /* @__PURE__ */ jsx(\n      ScrollAreaScrollbarY,\n      {\n        ...commonProps,\n        ref: forwardedRef,\n        onThumbPositionChange: () => {\n          if (context.viewport && thumbRef.current) {\n            const scrollPos = context.viewport.scrollTop;\n            const offset = getThumbOffsetFromScroll(scrollPos, sizes);\n            thumbRef.current.style.transform = `translate3d(0, ${offset}px, 0)`;\n          }\n        },\n        onWheelScroll: (scrollPos) => {\n          if (context.viewport) context.viewport.scrollTop = scrollPos;\n        },\n        onDragScroll: (pointerPos) => {\n          if (context.viewport) context.viewport.scrollTop = getScrollPosition(pointerPos);\n        }\n      }\n    );\n  }\n  return null;\n});\nvar ScrollAreaScrollbarX = React2.forwardRef((props, forwardedRef) => {\n  const { sizes, onSizesChange, ...scrollbarProps } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const [computedStyle, setComputedStyle] = React2.useState();\n  const ref = React2.useRef(null);\n  const composeRefs = useComposedRefs(forwardedRef, ref, context.onScrollbarXChange);\n  React2.useEffect(() => {\n    if (ref.current) setComputedStyle(getComputedStyle(ref.current));\n  }, [ref]);\n  return /* @__PURE__ */ jsx(\n    ScrollAreaScrollbarImpl,\n    {\n      \"data-orientation\": \"horizontal\",\n      ...scrollbarProps,\n      ref: composeRefs,\n      sizes,\n      style: {\n        bottom: 0,\n        left: context.dir === \"rtl\" ? \"var(--radix-scroll-area-corner-width)\" : 0,\n        right: context.dir === \"ltr\" ? \"var(--radix-scroll-area-corner-width)\" : 0,\n        [\"--radix-scroll-area-thumb-width\"]: getThumbSize(sizes) + \"px\",\n        ...props.style\n      },\n      onThumbPointerDown: (pointerPos) => props.onThumbPointerDown(pointerPos.x),\n      onDragScroll: (pointerPos) => props.onDragScroll(pointerPos.x),\n      onWheelScroll: (event, maxScrollPos) => {\n        if (context.viewport) {\n          const scrollPos = context.viewport.scrollLeft + event.deltaX;\n          props.onWheelScroll(scrollPos);\n          if (isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos)) {\n            event.preventDefault();\n          }\n        }\n      },\n      onResize: () => {\n        if (ref.current && context.viewport && computedStyle) {\n          onSizesChange({\n            content: context.viewport.scrollWidth,\n            viewport: context.viewport.offsetWidth,\n            scrollbar: {\n              size: ref.current.clientWidth,\n              paddingStart: toInt(computedStyle.paddingLeft),\n              paddingEnd: toInt(computedStyle.paddingRight)\n            }\n          });\n        }\n      }\n    }\n  );\n});\nvar ScrollAreaScrollbarY = React2.forwardRef((props, forwardedRef) => {\n  const { sizes, onSizesChange, ...scrollbarProps } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const [computedStyle, setComputedStyle] = React2.useState();\n  const ref = React2.useRef(null);\n  const composeRefs = useComposedRefs(forwardedRef, ref, context.onScrollbarYChange);\n  React2.useEffect(() => {\n    if (ref.current) setComputedStyle(getComputedStyle(ref.current));\n  }, [ref]);\n  return /* @__PURE__ */ jsx(\n    ScrollAreaScrollbarImpl,\n    {\n      \"data-orientation\": \"vertical\",\n      ...scrollbarProps,\n      ref: composeRefs,\n      sizes,\n      style: {\n        top: 0,\n        right: context.dir === \"ltr\" ? 0 : void 0,\n        left: context.dir === \"rtl\" ? 0 : void 0,\n        bottom: \"var(--radix-scroll-area-corner-height)\",\n        [\"--radix-scroll-area-thumb-height\"]: getThumbSize(sizes) + \"px\",\n        ...props.style\n      },\n      onThumbPointerDown: (pointerPos) => props.onThumbPointerDown(pointerPos.y),\n      onDragScroll: (pointerPos) => props.onDragScroll(pointerPos.y),\n      onWheelScroll: (event, maxScrollPos) => {\n        if (context.viewport) {\n          const scrollPos = context.viewport.scrollTop + event.deltaY;\n          props.onWheelScroll(scrollPos);\n          if (isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos)) {\n            event.preventDefault();\n          }\n        }\n      },\n      onResize: () => {\n        if (ref.current && context.viewport && computedStyle) {\n          onSizesChange({\n            content: context.viewport.scrollHeight,\n            viewport: context.viewport.offsetHeight,\n            scrollbar: {\n              size: ref.current.clientHeight,\n              paddingStart: toInt(computedStyle.paddingTop),\n              paddingEnd: toInt(computedStyle.paddingBottom)\n            }\n          });\n        }\n      }\n    }\n  );\n});\nvar [ScrollbarProvider, useScrollbarContext] = createScrollAreaContext(SCROLLBAR_NAME);\nvar ScrollAreaScrollbarImpl = React2.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeScrollArea,\n    sizes,\n    hasThumb,\n    onThumbChange,\n    onThumbPointerUp,\n    onThumbPointerDown,\n    onThumbPositionChange,\n    onDragScroll,\n    onWheelScroll,\n    onResize,\n    ...scrollbarProps\n  } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, __scopeScrollArea);\n  const [scrollbar, setScrollbar] = React2.useState(null);\n  const composeRefs = useComposedRefs(forwardedRef, (node) => setScrollbar(node));\n  const rectRef = React2.useRef(null);\n  const prevWebkitUserSelectRef = React2.useRef(\"\");\n  const viewport = context.viewport;\n  const maxScrollPos = sizes.content - sizes.viewport;\n  const handleWheelScroll = useCallbackRef(onWheelScroll);\n  const handleThumbPositionChange = useCallbackRef(onThumbPositionChange);\n  const handleResize = useDebounceCallback(onResize, 10);\n  function handleDragScroll(event) {\n    if (rectRef.current) {\n      const x = event.clientX - rectRef.current.left;\n      const y = event.clientY - rectRef.current.top;\n      onDragScroll({ x, y });\n    }\n  }\n  React2.useEffect(() => {\n    const handleWheel = (event) => {\n      const element = event.target;\n      const isScrollbarWheel = scrollbar?.contains(element);\n      if (isScrollbarWheel) handleWheelScroll(event, maxScrollPos);\n    };\n    document.addEventListener(\"wheel\", handleWheel, { passive: false });\n    return () => document.removeEventListener(\"wheel\", handleWheel, { passive: false });\n  }, [viewport, scrollbar, maxScrollPos, handleWheelScroll]);\n  React2.useEffect(handleThumbPositionChange, [sizes, handleThumbPositionChange]);\n  useResizeObserver(scrollbar, handleResize);\n  useResizeObserver(context.content, handleResize);\n  return /* @__PURE__ */ jsx(\n    ScrollbarProvider,\n    {\n      scope: __scopeScrollArea,\n      scrollbar,\n      hasThumb,\n      onThumbChange: useCallbackRef(onThumbChange),\n      onThumbPointerUp: useCallbackRef(onThumbPointerUp),\n      onThumbPositionChange: handleThumbPositionChange,\n      onThumbPointerDown: useCallbackRef(onThumbPointerDown),\n      children: /* @__PURE__ */ jsx(\n        Primitive.div,\n        {\n          ...scrollbarProps,\n          ref: composeRefs,\n          style: { position: \"absolute\", ...scrollbarProps.style },\n          onPointerDown: composeEventHandlers(props.onPointerDown, (event) => {\n            const mainPointer = 0;\n            if (event.button === mainPointer) {\n              const element = event.target;\n              element.setPointerCapture(event.pointerId);\n              rectRef.current = scrollbar.getBoundingClientRect();\n              prevWebkitUserSelectRef.current = document.body.style.webkitUserSelect;\n              document.body.style.webkitUserSelect = \"none\";\n              if (context.viewport) context.viewport.style.scrollBehavior = \"auto\";\n              handleDragScroll(event);\n            }\n          }),\n          onPointerMove: composeEventHandlers(props.onPointerMove, handleDragScroll),\n          onPointerUp: composeEventHandlers(props.onPointerUp, (event) => {\n            const element = event.target;\n            if (element.hasPointerCapture(event.pointerId)) {\n              element.releasePointerCapture(event.pointerId);\n            }\n            document.body.style.webkitUserSelect = prevWebkitUserSelectRef.current;\n            if (context.viewport) context.viewport.style.scrollBehavior = \"\";\n            rectRef.current = null;\n          })\n        }\n      )\n    }\n  );\n});\nvar THUMB_NAME = \"ScrollAreaThumb\";\nvar ScrollAreaThumb = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { forceMount, ...thumbProps } = props;\n    const scrollbarContext = useScrollbarContext(THUMB_NAME, props.__scopeScrollArea);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || scrollbarContext.hasThumb, children: /* @__PURE__ */ jsx(ScrollAreaThumbImpl, { ref: forwardedRef, ...thumbProps }) });\n  }\n);\nvar ScrollAreaThumbImpl = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeScrollArea, style, ...thumbProps } = props;\n    const scrollAreaContext = useScrollAreaContext(THUMB_NAME, __scopeScrollArea);\n    const scrollbarContext = useScrollbarContext(THUMB_NAME, __scopeScrollArea);\n    const { onThumbPositionChange } = scrollbarContext;\n    const composedRef = useComposedRefs(\n      forwardedRef,\n      (node) => scrollbarContext.onThumbChange(node)\n    );\n    const removeUnlinkedScrollListenerRef = React2.useRef(void 0);\n    const debounceScrollEnd = useDebounceCallback(() => {\n      if (removeUnlinkedScrollListenerRef.current) {\n        removeUnlinkedScrollListenerRef.current();\n        removeUnlinkedScrollListenerRef.current = void 0;\n      }\n    }, 100);\n    React2.useEffect(() => {\n      const viewport = scrollAreaContext.viewport;\n      if (viewport) {\n        const handleScroll = () => {\n          debounceScrollEnd();\n          if (!removeUnlinkedScrollListenerRef.current) {\n            const listener = addUnlinkedScrollListener(viewport, onThumbPositionChange);\n            removeUnlinkedScrollListenerRef.current = listener;\n            onThumbPositionChange();\n          }\n        };\n        onThumbPositionChange();\n        viewport.addEventListener(\"scroll\", handleScroll);\n        return () => viewport.removeEventListener(\"scroll\", handleScroll);\n      }\n    }, [scrollAreaContext.viewport, debounceScrollEnd, onThumbPositionChange]);\n    return /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": scrollbarContext.hasThumb ? \"visible\" : \"hidden\",\n        ...thumbProps,\n        ref: composedRef,\n        style: {\n          width: \"var(--radix-scroll-area-thumb-width)\",\n          height: \"var(--radix-scroll-area-thumb-height)\",\n          ...style\n        },\n        onPointerDownCapture: composeEventHandlers(props.onPointerDownCapture, (event) => {\n          const thumb = event.target;\n          const thumbRect = thumb.getBoundingClientRect();\n          const x = event.clientX - thumbRect.left;\n          const y = event.clientY - thumbRect.top;\n          scrollbarContext.onThumbPointerDown({ x, y });\n        }),\n        onPointerUp: composeEventHandlers(props.onPointerUp, scrollbarContext.onThumbPointerUp)\n      }\n    );\n  }\n);\nScrollAreaThumb.displayName = THUMB_NAME;\nvar CORNER_NAME = \"ScrollAreaCorner\";\nvar ScrollAreaCorner = React2.forwardRef(\n  (props, forwardedRef) => {\n    const context = useScrollAreaContext(CORNER_NAME, props.__scopeScrollArea);\n    const hasBothScrollbarsVisible = Boolean(context.scrollbarX && context.scrollbarY);\n    const hasCorner = context.type !== \"scroll\" && hasBothScrollbarsVisible;\n    return hasCorner ? /* @__PURE__ */ jsx(ScrollAreaCornerImpl, { ...props, ref: forwardedRef }) : null;\n  }\n);\nScrollAreaCorner.displayName = CORNER_NAME;\nvar ScrollAreaCornerImpl = React2.forwardRef((props, forwardedRef) => {\n  const { __scopeScrollArea, ...cornerProps } = props;\n  const context = useScrollAreaContext(CORNER_NAME, __scopeScrollArea);\n  const [width, setWidth] = React2.useState(0);\n  const [height, setHeight] = React2.useState(0);\n  const hasSize = Boolean(width && height);\n  useResizeObserver(context.scrollbarX, () => {\n    const height2 = context.scrollbarX?.offsetHeight || 0;\n    context.onCornerHeightChange(height2);\n    setHeight(height2);\n  });\n  useResizeObserver(context.scrollbarY, () => {\n    const width2 = context.scrollbarY?.offsetWidth || 0;\n    context.onCornerWidthChange(width2);\n    setWidth(width2);\n  });\n  return hasSize ? /* @__PURE__ */ jsx(\n    Primitive.div,\n    {\n      ...cornerProps,\n      ref: forwardedRef,\n      style: {\n        width,\n        height,\n        position: \"absolute\",\n        right: context.dir === \"ltr\" ? 0 : void 0,\n        left: context.dir === \"rtl\" ? 0 : void 0,\n        bottom: 0,\n        ...props.style\n      }\n    }\n  ) : null;\n});\nfunction toInt(value) {\n  return value ? parseInt(value, 10) : 0;\n}\nfunction getThumbRatio(viewportSize, contentSize) {\n  const ratio = viewportSize / contentSize;\n  return isNaN(ratio) ? 0 : ratio;\n}\nfunction getThumbSize(sizes) {\n  const ratio = getThumbRatio(sizes.viewport, sizes.content);\n  const scrollbarPadding = sizes.scrollbar.paddingStart + sizes.scrollbar.paddingEnd;\n  const thumbSize = (sizes.scrollbar.size - scrollbarPadding) * ratio;\n  return Math.max(thumbSize, 18);\n}\nfunction getScrollPositionFromPointer(pointerPos, pointerOffset, sizes, dir = \"ltr\") {\n  const thumbSizePx = getThumbSize(sizes);\n  const thumbCenter = thumbSizePx / 2;\n  const offset = pointerOffset || thumbCenter;\n  const thumbOffsetFromEnd = thumbSizePx - offset;\n  const minPointerPos = sizes.scrollbar.paddingStart + offset;\n  const maxPointerPos = sizes.scrollbar.size - sizes.scrollbar.paddingEnd - thumbOffsetFromEnd;\n  const maxScrollPos = sizes.content - sizes.viewport;\n  const scrollRange = dir === \"ltr\" ? [0, maxScrollPos] : [maxScrollPos * -1, 0];\n  const interpolate = linearScale([minPointerPos, maxPointerPos], scrollRange);\n  return interpolate(pointerPos);\n}\nfunction getThumbOffsetFromScroll(scrollPos, sizes, dir = \"ltr\") {\n  const thumbSizePx = getThumbSize(sizes);\n  const scrollbarPadding = sizes.scrollbar.paddingStart + sizes.scrollbar.paddingEnd;\n  const scrollbar = sizes.scrollbar.size - scrollbarPadding;\n  const maxScrollPos = sizes.content - sizes.viewport;\n  const maxThumbPos = scrollbar - thumbSizePx;\n  const scrollClampRange = dir === \"ltr\" ? [0, maxScrollPos] : [maxScrollPos * -1, 0];\n  const scrollWithoutMomentum = clamp(scrollPos, scrollClampRange);\n  const interpolate = linearScale([0, maxScrollPos], [0, maxThumbPos]);\n  return interpolate(scrollWithoutMomentum);\n}\nfunction linearScale(input, output) {\n  return (value) => {\n    if (input[0] === input[1] || output[0] === output[1]) return output[0];\n    const ratio = (output[1] - output[0]) / (input[1] - input[0]);\n    return output[0] + ratio * (value - input[0]);\n  };\n}\nfunction isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos) {\n  return scrollPos > 0 && scrollPos < maxScrollPos;\n}\nvar addUnlinkedScrollListener = (node, handler = () => {\n}) => {\n  let prevPosition = { left: node.scrollLeft, top: node.scrollTop };\n  let rAF = 0;\n  (function loop() {\n    const position = { left: node.scrollLeft, top: node.scrollTop };\n    const isHorizontalScroll = prevPosition.left !== position.left;\n    const isVerticalScroll = prevPosition.top !== position.top;\n    if (isHorizontalScroll || isVerticalScroll) handler();\n    prevPosition = position;\n    rAF = window.requestAnimationFrame(loop);\n  })();\n  return () => window.cancelAnimationFrame(rAF);\n};\nfunction useDebounceCallback(callback, delay) {\n  const handleCallback = useCallbackRef(callback);\n  const debounceTimerRef = React2.useRef(0);\n  React2.useEffect(() => () => window.clearTimeout(debounceTimerRef.current), []);\n  return React2.useCallback(() => {\n    window.clearTimeout(debounceTimerRef.current);\n    debounceTimerRef.current = window.setTimeout(handleCallback, delay);\n  }, [handleCallback, delay]);\n}\nfunction useResizeObserver(element, onResize) {\n  const handleResize = useCallbackRef(onResize);\n  useLayoutEffect(() => {\n    let rAF = 0;\n    if (element) {\n      const resizeObserver = new ResizeObserver(() => {\n        cancelAnimationFrame(rAF);\n        rAF = window.requestAnimationFrame(handleResize);\n      });\n      resizeObserver.observe(element);\n      return () => {\n        window.cancelAnimationFrame(rAF);\n        resizeObserver.unobserve(element);\n      };\n    }\n  }, [element, handleResize]);\n}\nvar Root = ScrollArea;\nvar Viewport = ScrollAreaViewport;\nvar Scrollbar = ScrollAreaScrollbar;\nvar Thumb = ScrollAreaThumb;\nvar Corner = ScrollAreaCorner;\nexport {\n  Corner,\n  Root,\n  ScrollArea,\n  ScrollAreaCorner,\n  ScrollAreaScrollbar,\n  ScrollAreaThumb,\n  ScrollAreaViewport,\n  Scrollbar,\n  Thumb,\n  Viewport,\n  createScrollAreaScope\n};\n//# sourceMappingURL=index.mjs.map\n","'use client';\n\nimport * as React from 'react';\nimport * as ScrollAreaPrimitive from '@radix-ui/react-scroll-area';\n\nimport { cn } from '@/shared/utils/classMerger';\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn('relative overflow-hidden', className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n));\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName;\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = 'vertical', ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      'flex touch-none select-none transition-colors',\n      orientation === 'vertical' &&\n        'h-full w-2.5 border-l border-l-transparent p-[1px]',\n      orientation === 'horizontal' &&\n        'h-2.5 flex-col border-t border-t-transparent p-[1px]',\n      className,\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n));\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName;\n\nexport { ScrollArea, ScrollBar };\n","import { forwardRef } from 'react';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Loader2 } from 'lucide-react';\r\nimport { IFoodSearchResult } from '@/features/nutrition/types';\r\nimport { FoodSearchItem } from './FoodSearchItem';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\n\r\ninterface IFoodSearchResultsProps {\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  results: IFoodSearchResult[];\r\n  onSelectFood: (food: IFoodSearchResult) => void;\r\n  buttonLabel?: string;\r\n  showInline?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport const FoodSearchResults = forwardRef<\r\n  HTMLDivElement,\r\n  IFoodSearchResultsProps\r\n>(\r\n  (\r\n    {\r\n      isLoading,\r\n      error,\r\n      results,\r\n      onSelectFood,\r\n      buttonLabel = 'Add',\r\n      showInline = false,\r\n      className = '',\r\n    },\r\n    ref,\r\n  ) => {\r\n    return (\r\n      <Card\r\n        ref={ref}\r\n        className={`${showInline ? '' : 'absolute z-50 left-0 right-0 top-[calc(100%+0.5rem)]'} shadow-md ${className}`}\r\n      >\r\n        <CardContent className=\"p-0 overflow-hidden\">\r\n          {\r\n            isLoading ? (\r\n              <div className=\"flex items-center justify-center p-4 text-sm text-muted-foreground\">\r\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                Searching...\r\n              </div>\r\n            ) : error ? (\r\n              <div className=\"p-4 text-sm text-destructive\">{error}</div>\r\n            ) : results.length > 0 ? (\r\n              <ScrollArea className=\"max-h-64 overflow-y-scroll\">\r\n                {results.map((food) => (\r\n                  <FoodSearchItem\r\n                    key={food.fdcId}\r\n                    food={food}\r\n                    onSelect={onSelectFood}\r\n                    buttonLabel={buttonLabel}\r\n                  />\r\n                ))}\r\n              </ScrollArea>\r\n            ) : null /* No message for empty results */\r\n          }\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  },\r\n);\r\n\r\nFoodSearchResults.displayName = 'FoodSearchResults';\r\n","import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { IFoodSearchResult } from '@/features/nutrition/types';\r\nimport { usdaApi } from '@/lib/USDAApi';\r\nimport { useDebounce } from '@/hooks/useDebounce';\r\nimport { FoodSearchBar } from './FoodSearchBar';\r\nimport { FoodSearchResults } from './FoodSearchResults';\r\n\r\ninterface IFoodSearchProps {\r\n  onSelectFood: (food: IFoodSearchResult) => void;\r\n  buttonLabel?: string;\r\n  autoFocus?: boolean;\r\n  showInline?: boolean;\r\n}\r\n\r\nexport const FoodSearch: React.FC<IFoodSearchProps> = ({\r\n  onSelectFood,\r\n  buttonLabel = 'Add',\r\n  autoFocus = false,\r\n  showInline = false,\r\n}) => {\r\n  const [query, setQuery] = useState('');\r\n  const [results, setResults] = useState<IFoodSearchResult[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Debounce search query to prevent excessive API calls\r\n  const debouncedQuery = useDebounce(query, 300);\r\n\r\n  // Handle clicks outside of dropdown to close it\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent) {\r\n      if (\r\n        dropdownRef.current &&\r\n        !dropdownRef.current.contains(event.target as Node) &&\r\n        inputRef.current !== event.target\r\n      ) {\r\n        setShowDropdown(false);\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  // Focus input on mount if autoFocus is true\r\n  useEffect(() => {\r\n    if (autoFocus && inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [autoFocus]);\r\n\r\n  const handleSearch = useCallback(async () => {\r\n    if (!query.trim() || query.trim().length < 2) return;\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setShowDropdown(true);\r\n\r\n    try {\r\n      const foods = await usdaApi.searchFoods(query);\r\n      setResults(foods);\r\n\r\n      if (foods.length === 0) {\r\n        setError('No foods found matching your search.');\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to search foods. Please try again.');\r\n      console.error(err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [query]);\r\n\r\n  const clearSearch = () => {\r\n    setQuery('');\r\n    setResults([]);\r\n    setError(null);\r\n    setShowDropdown(false);\r\n    if (inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  };\r\n\r\n  const handleSelectFood = (food: IFoodSearchResult) => {\r\n    setShowDropdown(false);\r\n    onSelectFood(food);\r\n    if (!showInline) {\r\n      clearSearch();\r\n    } else {\r\n      setResults([]);\r\n      setError(null);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Enter' && query.trim()) {\r\n      e.preventDefault();\r\n      handleSearch();\r\n    } else if (e.key === 'Escape') {\r\n      setShowDropdown(false);\r\n    }\r\n  };\r\n\r\n  // Auto-search when query changes (with debounce)\r\n  useEffect(() => {\r\n    if (debouncedQuery.trim().length >= 2) {\r\n      handleSearch();\r\n    }\r\n  }, [debouncedQuery, handleSearch]);\r\n\r\n  return (\r\n    <div className=\"relative w-full\">\r\n      <FoodSearchBar\r\n        inputRef={inputRef}\r\n        query={query}\r\n        onQueryChange={setQuery}\r\n        onSearch={handleSearch}\r\n        onClear={clearSearch}\r\n        isLoading={isLoading}\r\n        onKeyDown={handleKeyDown}\r\n      />\r\n\r\n      {showDropdown && (\r\n        <FoodSearchResults\r\n          ref={dropdownRef}\r\n          isLoading={isLoading}\r\n          error={error}\r\n          results={results}\r\n          onSelectFood={handleSelectFood}\r\n          buttonLabel={buttonLabel}\r\n          showInline={showInline}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { cn } from '@/shared/utils/classMerger';\r\nimport { AlertCircle } from 'lucide-react';\r\n\r\ninterface IFormGroupProps {\r\n  children: React.ReactNode;\r\n  errorMessage?: string;\r\n  className?: string;\r\n}\r\n\r\nexport const FormGroup: React.FC<IFormGroupProps> = ({\r\n  children,\r\n  errorMessage,\r\n  className,\r\n}) => {\r\n  return (\r\n    <div className={cn('space-y-2', className)}>\r\n      {children}\r\n      {errorMessage && (\r\n        <div className=\"flex items-center gap-1 text-destructive text-xs\">\r\n          <AlertCircle className=\"h-3 w-3\" />\r\n          <span>{errorMessage}</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { IFoodItem } from '@/features/nutrition/index';\r\nimport { Badge } from '@/components/ui/badge';\r\n\r\ninterface IFoodsListProps {\r\n  foods: IFoodItem[];\r\n  className?: string;\r\n}\r\n\r\nexport const FoodsList: React.FC<IFoodsListProps> = ({\r\n  foods,\r\n  className = '',\r\n}) => {\r\n  if (!foods || foods.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`space-y-2 ${className}`}>\r\n      {foods.map((food, index) => (\r\n        <div\r\n          key={`food-${index}`}\r\n          className=\"bg-background border rounded-md p-3\"\r\n        >\r\n          <div className=\"flex justify-between items-start\">\r\n            <div>\r\n              <h5 className=\"font-medium text-sm\">{food.name}</h5>\r\n              <div className=\"flex flex-wrap gap-x-3 gap-y-1 mt-1 text-xs text-muted-foreground\">\r\n                <span>\r\n                  {food.quantity} {food.unit}\r\n                </span>\r\n                <span>{food.calories} calories</span>\r\n                <span>{food.protein}g protein</span>\r\n              </div>\r\n            </div>\r\n\r\n            <Badge variant=\"outline\" className=\"text-xs\">\r\n              {index + 1}\r\n            </Badge>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { IMeal, MealCard } from '@/features/nutrition';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Utensils, Loader2, PlusCircle } from 'lucide-react';\r\nimport { Button, Skeleton } from '@/components/ui';\r\n\r\ninterface IMealsListProps {\r\n  meals: IMeal[];\r\n  onDeleteMeal: (index: number) => Promise<void>;\r\n  onEditMeal: (index: number, meal: IMeal) => Promise<void>;\r\n  onAddMeal?: () => void;\r\n  isLoading?: boolean;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport const MealsList: React.FC<IMealsListProps> = ({\r\n  meals,\r\n  onDeleteMeal,\r\n  onEditMeal,\r\n  onAddMeal,\r\n  isLoading = false,\r\n  children,\r\n}) => {\r\n  const SKELETON_COUNT = 3;\r\n\r\n  return (\r\n    <Card className=\"w-full\">\r\n      <CardHeader className=\"pb-3 flex flex-row items-center justify-between\">\r\n        <CardTitle className=\"text-lg flex items-center gap-2\">\r\n          <Utensils className=\"h-5 w-5\" />\r\n          {isLoading && (\r\n            <Loader2 className=\"h-4 w-4 ml-2 animate-spin text-muted-foreground\" />\r\n          )}\r\n        </CardTitle>\r\n\r\n        {/* Add Meal Button */}\r\n        {onAddMeal && (\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onAddMeal}\r\n            className=\"h-8 gap-1\"\r\n          >\r\n            <PlusCircle className=\"h-3.5 w-3.5\" />\r\n            <span>Add Meal</span>\r\n          </Button>\r\n        )}\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"space-y-3\">\r\n        {isLoading ? (\r\n          <div className=\"space-y-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n            {Array(SKELETON_COUNT)\r\n              .fill(0)\r\n              .map((_, index) => (\r\n                <Card\r\n                  key={`skeleton-${index}`}\r\n                  className=\"h-[180px] overflow-hidden\"\r\n                >\r\n                  <div className=\"p-4 h-full flex flex-col\">\r\n                    <Skeleton className=\"h-5 w-3/4 mb-2\" />\r\n                    <Skeleton className=\"h-4 w-1/2 mb-4\" />\r\n                    <div className=\"flex space-x-2 mb-3\">\r\n                      <Skeleton className=\"h-4 w-16\" />\r\n                      <Skeleton className=\"h-4 w-16\" />\r\n                    </div>\r\n                    <div className=\"flex-1\" />\r\n                    <div className=\"flex justify-between items-center pt-2 mt-auto\">\r\n                      <Skeleton className=\"h-4 w-16\" />\r\n                      <div className=\"flex space-x-2\">\r\n                        <Skeleton className=\"h-8 w-8 rounded-md\" />\r\n                        <Skeleton className=\"h-8 w-8 rounded-md\" />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              ))}\r\n          </div>\r\n        ) : meals.length > 0 ? (\r\n          <div className=\"space-y-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n            {meals.map((meal, index) => (\r\n              <MealCard\r\n                key={`meal-${meal.id || index}`}\r\n                meal={meal}\r\n                onDelete={() => onDeleteMeal(index)}\r\n                onEdit={() => onEditMeal(index, meal)}\r\n                className=\"h-full\"\r\n              />\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"py-8 text-center border-dashed border rounded-md bg-muted/40\">\r\n            <p className=\"text-muted-foreground\">No meals logged.</p>\r\n          </div>\r\n        )}\r\n\r\n        {children && <div className=\"pt-3\">{children}</div>}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","import * as React from 'react';\n\nimport { cn } from '@/shared/utils/classMerger';\n\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Textarea };\n","import React from 'react';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardFooter,\r\n  CardHeader,\r\n  CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { EditIcon, SaveIcon, XIcon } from 'lucide-react';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\n\r\ninterface INutritionNotesProps {\r\n  notes: string;\r\n  isLoading?: boolean;\r\n  onChange: (newNotes: string) => Promise<boolean>;\r\n}\r\n\r\nexport const NutritionNotes: React.FC<INutritionNotesProps> = ({\r\n  notes,\r\n  isLoading = false,\r\n  onChange,\r\n}) => {\r\n  const [editedNotes, setEditedNotes] = React.useState<string>(notes);\r\n  const [isEditing, setIsEditing] = React.useState<boolean>(false);\r\n  const [isSaving, setIsSaving] = React.useState<boolean>(false);\r\n\r\n  React.useEffect(() => {\r\n    setEditedNotes(notes);\r\n  }, [notes]);\r\n\r\n  const handleEdit = () => {\r\n    setEditedNotes(notes);\r\n    setIsEditing(true);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditedNotes(notes);\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setIsSaving(true);\r\n    try {\r\n      await onChange(editedNotes);\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      console.error('Failed to save notes:', error);\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center justify-between\">\r\n            <Skeleton className=\"h-4 w-16\" />\r\n            <Skeleton className=\"w-20\" />\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <Skeleton className=\"w-full\" />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center justify-between\">\r\n          <span>Notes</span>\r\n          {!isEditing && (\r\n            <Button variant=\"outline\" size=\"sm\" onClick={handleEdit}>\r\n              <EditIcon className=\"mr-2\" />\r\n              {notes ? 'Edit' : 'Add Notes'}\r\n            </Button>\r\n          )}\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {isEditing ? (\r\n          <Textarea\r\n            value={editedNotes}\r\n            onChange={(e) => setEditedNotes(e.target.value)}\r\n            placeholder=\"Add your notes here...\"\r\n            className=\"resize-none\"\r\n          />\r\n        ) : (\r\n          <div>\r\n            {notes ? (\r\n              <p className=\"whitespace-pre-wrap\">{notes}</p>\r\n            ) : (\r\n              <p className=\"text-muted-foreground italic\">\r\n                No notes added yet.\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n      {isEditing && (\r\n        <CardFooter className=\"flex justify-end gap-2\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={handleCancel}\r\n            disabled={isSaving}\r\n          >\r\n            <XIcon className=\"mr-1\" />\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            variant=\"default\"\r\n            size=\"sm\"\r\n            onClick={handleSave}\r\n            disabled={isSaving}\r\n          >\r\n            <SaveIcon className=\"mr-1\" />\r\n            {isSaving ? 'Saving...' : 'Save'}\r\n          </Button>\r\n        </CardFooter>\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n","import { useCallback, useState } from 'react';\r\nimport { IMeal, INutritionEntry } from '@/features/nutrition/types';\r\nimport {\r\n  addNutritionEntry,\r\n  getNutritionEntryById,\r\n  updateNutritionEntry,\r\n} from '@/features/nutrition/firestore';\r\nimport { calculateTotal } from '@/shared/utils/calculateTotalNutrients';\r\n\r\ninterface IMealOperationsProps {\r\n  nutritionEntry?: INutritionEntry;\r\n\r\n  onEntryUpdated: (updatedEntry?: INutritionEntry) => void;\r\n}\r\n\r\nexport const useMealOperations = ({\r\n  nutritionEntry,\r\n  onEntryUpdated,\r\n}: IMealOperationsProps) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const createNewEntryWithMeal = useCallback(\r\n    async (meal: IMeal): Promise<boolean> => {\r\n      const dailyTotals = {\r\n        calories: calculateTotal([meal], 'calories'),\r\n        protein: calculateTotal([meal], 'protein'),\r\n        carbs: calculateTotal([meal], 'carbs'),\r\n        fat: calculateTotal([meal], 'fat'),\r\n      };\r\n\r\n      try {\r\n        const newEntryId = await addNutritionEntry({\r\n          meals: [meal],\r\n          dailyTotals,\r\n        });\r\n\r\n        if (!newEntryId) {\r\n          setError('Failed to create nutrition entry');\r\n          return false;\r\n        }\r\n\r\n        const newEntry = await getNutritionEntryById(newEntryId);\r\n        if (!newEntry) {\r\n          setError('Failed to fetch new nutrition entry');\r\n          return false;\r\n        }\r\n\r\n        onEntryUpdated(newEntry);\r\n        return true;\r\n      } catch (error) {\r\n        console.error('Error creating nutrition entry:', error);\r\n        setError('Failed to create new nutrition entry');\r\n        return false;\r\n      }\r\n    },\r\n    [onEntryUpdated],\r\n  );\r\n\r\n  const addMealToExistingEntry = useCallback(\r\n    async (meal: IMeal): Promise<boolean> => {\r\n      if (!nutritionEntry || !nutritionEntry.id) {\r\n        setError('Missing nutrition entry');\r\n        return false;\r\n      }\r\n\r\n      const updatedMeals = [...(nutritionEntry.meals || []), meal];\r\n\r\n      const dailyTotals = {\r\n        calories: calculateTotal(updatedMeals, 'calories'),\r\n        protein: calculateTotal(updatedMeals, 'protein'),\r\n        carbs: calculateTotal(updatedMeals, 'carbs'),\r\n        fat: calculateTotal(updatedMeals, 'fat'),\r\n      };\r\n\r\n      const success = await updateNutritionEntry(nutritionEntry.id, {\r\n        meals: updatedMeals,\r\n        dailyTotals,\r\n      });\r\n\r\n      if (!success) {\r\n        setError('Failed to add meal to existing entry');\r\n        return false;\r\n      }\r\n\r\n      const updatedEntry: INutritionEntry = {\r\n        ...nutritionEntry,\r\n        meals: updatedMeals,\r\n        dailyTotals,\r\n      };\r\n      onEntryUpdated(updatedEntry);\r\n      return true;\r\n    },\r\n    [nutritionEntry, onEntryUpdated],\r\n  );\r\n\r\n  const addMeal = useCallback(\r\n    async (meal: IMeal): Promise<boolean> => {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      try {\r\n        if (!nutritionEntry?.id) {\r\n          return await createNewEntryWithMeal(meal);\r\n        }\r\n        return await addMealToExistingEntry(meal);\r\n      } catch (error) {\r\n        console.error('Error in addMeal operation:', error);\r\n        setError('An error occurred while processing the meal');\r\n        return false;\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [nutritionEntry, createNewEntryWithMeal, addMealToExistingEntry],\r\n  );\r\n  // Edit an existing meal\r\n  const editMeal = useCallback(\r\n    async (index: number, updatedMeal: IMeal): Promise<boolean> => {\r\n      if (!nutritionEntry?.id || !nutritionEntry.meals) {\r\n        setError('Cannot edit meal: No nutrition entry or meals exist');\r\n        return false;\r\n      }\r\n\r\n      if (index < 0 || index >= nutritionEntry.meals.length) {\r\n        setError('Invalid meal index');\r\n        return false;\r\n      }\r\n\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        // Create new meals array with the updated meal\r\n        const updatedMeals = [...nutritionEntry.meals];\r\n        updatedMeals[index] = updatedMeal;\r\n        // Calculate new totals\r\n        const dailyTotals = {\r\n          calories: calculateTotal(updatedMeals, 'calories'),\r\n          protein: calculateTotal(updatedMeals, 'protein'),\r\n          carbs: calculateTotal(updatedMeals, 'carbs'),\r\n          fat: calculateTotal(updatedMeals, 'fat'),\r\n        };\r\n\r\n        // Update the entry\r\n        const success = await updateNutritionEntry(nutritionEntry.id, {\r\n          meals: updatedMeals,\r\n          dailyTotals,\r\n        });\r\n\r\n        if (success) {\r\n          const updatedEntry = {\r\n            ...nutritionEntry,\r\n            meals: updatedMeals,\r\n            dailyTotals,\r\n          };\r\n          onEntryUpdated(updatedEntry); // Trigger refresh in parent\r\n          return true;\r\n        }\r\n\r\n        setError('Failed to update meal');\r\n        return false;\r\n      } catch (err) {\r\n        console.error('Error editing meal:', err);\r\n        setError('An error occurred while editing the meal');\r\n        return false;\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [nutritionEntry, onEntryUpdated],\r\n  );\r\n\r\n  // Delete a meal\r\n  const deleteMeal = useCallback(\r\n    async (index: number): Promise<boolean> => {\r\n      if (!nutritionEntry?.id || !nutritionEntry.meals) {\r\n        setError('Cannot delete meal: No nutrition entry or meals exist');\r\n        return false;\r\n      }\r\n\r\n      if (index < 0 || index >= nutritionEntry.meals.length) {\r\n        setError('Invalid meal index');\r\n        return false;\r\n      }\r\n\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        // Create new meals array without the deleted meal\r\n        const updatedMeals = nutritionEntry.meals.filter((_, i) => i !== index);\r\n\r\n        // Calculate new totals\r\n        const dailyTotals = {\r\n          calories: calculateTotal(updatedMeals, 'calories'),\r\n          protein: calculateTotal(updatedMeals, 'protein'),\r\n          carbs: calculateTotal(updatedMeals, 'carbs'),\r\n          fat: calculateTotal(updatedMeals, 'fat'),\r\n        };\r\n\r\n        // Update the entry\r\n        const success = await updateNutritionEntry(nutritionEntry.id, {\r\n          meals: updatedMeals,\r\n          dailyTotals,\r\n        });\r\n\r\n        if (success) {\r\n          const updatedEntry = {\r\n            ...nutritionEntry,\r\n            meals: updatedMeals,\r\n            dailyTotals,\r\n          };\r\n          onEntryUpdated(updatedEntry); // Trigger refresh in parent\r\n          return true;\r\n        }\r\n\r\n        setError('Failed to delete meal');\r\n        return false;\r\n      } catch (err) {\r\n        console.error('Error deleting meal:', err);\r\n        setError('An error occurred while deleting the meal');\r\n        return false;\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [nutritionEntry, onEntryUpdated],\r\n  );\r\n\r\n  return {\r\n    addMeal,\r\n    editMeal,\r\n    deleteMeal,\r\n    isLoading,\r\n    error,\r\n  };\r\n};\r\n","import React, { useState, useCallback } from 'react';\r\nimport {\r\n  IMeal,\r\n  MealsList,\r\n  DateSelector,\r\n  NutritionNotes,\r\n  useNutritionEntry,\r\n  useMealOperations,\r\n  AddNewMeal,\r\n} from '@/features/nutrition';\r\n\r\n/**\r\n * Nutrition tracking page component\r\n */\r\nexport const Nutrition: React.FC = () => {\r\n  const [selectedDate, setSelectedDate] = useState<Date>(new Date());\r\n  const [formMode, setFormMode] = useState<'hidden' | 'add' | 'edit'>('hidden');\r\n  const [selectedMeal, setSelectedMeal] = useState<IMeal | undefined>(\r\n    undefined,\r\n  );\r\n  const [selectedIndex, setSelectedIndex] = useState<number>(-1);\r\n\r\n  const {\r\n    selectedDateNutritionEntries,\r\n    isLoading: isNutritionLoading,\r\n    refreshData,\r\n    updateNotes,\r\n  } = useNutritionEntry(selectedDate);\r\n\r\n  // Get the current day's nutrition entry\r\n  const nutritionEntry = selectedDateNutritionEntries[0];\r\n\r\n  const {\r\n    addMeal,\r\n    editMeal,\r\n    deleteMeal,\r\n    isLoading: isMealOperationLoading,\r\n  } = useMealOperations({\r\n    nutritionEntry,\r\n    onEntryUpdated: (updatedEntry) => {\r\n      if (updatedEntry) {\r\n        refreshData(updatedEntry);\r\n      } else {\r\n        refreshData();\r\n      }\r\n    },\r\n  });\r\n  const isLoading = isNutritionLoading || isMealOperationLoading;\r\n  // Handle date selection change\r\n  const handleDateChange = useCallback((date: Date) => {\r\n    setSelectedDate(date);\r\n    setFormMode('hidden');\r\n    setSelectedMeal(undefined);\r\n  }, []);\r\n\r\n  // Open form to add a new meal\r\n  const handleOpenAddMealForm = () => {\r\n    setFormMode('add');\r\n    setSelectedMeal(undefined);\r\n    setSelectedIndex(-1);\r\n  };\r\n\r\n  // Open form to edit an existing meal\r\n  const handleOpenEditMealForm = async (\r\n    index: number,\r\n    meal: IMeal,\r\n  ): Promise<void> => {\r\n    setSelectedMeal(meal);\r\n    setSelectedIndex(index);\r\n    setFormMode('edit');\r\n    return Promise.resolve();\r\n  };\r\n\r\n  // Handle meal form submission (add or edit)\r\n  const handleMealFormSubmit = async (meal: IMeal): Promise<void> => {\r\n    try {\r\n      let success = false;\r\n      if (formMode === 'add') {\r\n        success = await addMeal(meal);\r\n      } else if (formMode === 'edit' && selectedIndex !== -1) {\r\n        success = await editMeal(selectedIndex, meal);\r\n      }\r\n\r\n      if (success) {\r\n        setFormMode('hidden');\r\n        setSelectedMeal(undefined);\r\n        setSelectedIndex(-1);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error handling meal submission:', error);\r\n    }\r\n  };\r\n\r\n  // Cancel the meal form\r\n  const handleCancelForm = () => {\r\n    setFormMode('hidden');\r\n    setSelectedMeal(undefined);\r\n    setSelectedIndex(-1);\r\n  };\r\n\r\n  const isFormVisible = formMode !== 'hidden';\r\n  const meals = nutritionEntry?.meals || [];\r\n\r\n  return (\r\n    <div className=\"nutrition-page space-y-4\">\r\n      {/* Date Selector */}\r\n      <div className=\"container mx-auto px-4 max-w-md\">\r\n        <DateSelector\r\n          selectedDate={selectedDate}\r\n          onDateChange={handleDateChange}\r\n        />\r\n      </div>\r\n\r\n      {/* Meals List or Add/Edit Meal Form */}\r\n      <div\r\n        className={\r\n          isFormVisible\r\n            ? 'container mx-auto px-4 max-w-md'\r\n            : 'container mx-auto px-4'\r\n        }\r\n      >\r\n        {isFormVisible ? (\r\n          <AddNewMeal\r\n            onSubmit={handleMealFormSubmit}\r\n            onCancel={handleCancelForm}\r\n            initialMeal={selectedMeal}\r\n            isEditing={formMode === 'edit'}\r\n          />\r\n        ) : (\r\n          <>\r\n            <MealsList\r\n              meals={meals}\r\n              onEditMeal={handleOpenEditMealForm}\r\n              onDeleteMeal={async (index) => {\r\n                await deleteMeal(index);\r\n              }}\r\n              onAddMeal={handleOpenAddMealForm}\r\n              isLoading={isLoading}\r\n            />\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* Nutrition Notes */}\r\n      <div className=\"container mx-auto px-4 max-w-md pb-8\">\r\n        <NutritionNotes\r\n          notes={nutritionEntry?.notes || ''}\r\n          onChange={(newNotes) =>\r\n            updateNotes(nutritionEntry?.id || '', newNotes)\r\n          }\r\n          isLoading={isLoading}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":["__iconNode","ArrowLeft","createLucideIcon","CircleAlert","Clock","Pen","Plus","Save","SquarePen","Utensils","FormError","message","className","jsxs","cn","jsx","AlertCircle","MEAL_OPTIONS","MealDetailsForm","name","time","onNameChange","onTimeChange","FormGroup","Label","Select","SelectTrigger","SelectValue","SelectContent","option","SelectItem","Input","MealForm","onSubmit","onCancel","initialMeal","isEditing","mealName","setMealName","useState","mealTime","setMealTime","Timestamp","formErrors","setFormErrors","isSubmitting","setIsSubmitting","validateForm","errors","isValid","handleSubmit","e","error","handleMealNameChange","value","prev","handleMealTimeChange","formatTimeStringToTimestamp","Card","CardHeader","CardTitle","CardContent","formatTimeStampToTimeString","CardFooter","Button","validateFoodForm","formData","newErrors","VITE_USDA_API_KEY","USDA_API_BASE_URL","NUTRIENT_IDS","usdaApi","query","pageSize","response","fdcId","food","nutrients","nutrient","UNIT_OPTIONS","NUTRITION_FIELDS","FoodItemForm","initValues","setFormData","setErrors","handleSelectFood","handleInputChange","id","field","processedValue","handleUnitChange","validationErrors","FoodSearch","AddNewMeal","step","setStep","mealData","setMealData","foodItems","setFoodItems","isEditingFood","setIsEditingFood","currentFoodItem","setCurrentFoodItem","editingFoodIndex","setEditingFoodIndex","handleMealSubmit","data","handleAddFood","handleEditFood","index","handleRemoveFood","_","i","handleFoodSubmit","foodItem","item","handleFoodCancel","handleBackToMeal","handleFinalize","completeMeal","totals","acc","Badge","Edit","Trash2","PlusCircle","X","Check","calculateTotal","meals","total","meal","mealTotal","MealCard","onEdit","onDelete","expanded","setExpanded","totalCalories","totalProtein","formattedTime","toggleExpanded","Edit2","ChevronUp","ChevronDown","FoodsList","DateSelector","selectedDate","onDateChange","formatDisplayDate","date","options","handlePreviousDay","newDate","handleNextDay","isToday","today","ChevronLeft","ChevronRight","FoodSearchBar","onQueryChange","onSearch","onClear","isLoading","onKeyDown","inputRef","Loader2","Search","FoodSearchItem","onSelect","buttonLabel","useStateMachine","initialState","machine","React.useReducer","state","event","SCROLL_AREA_NAME","createScrollAreaContext","createScrollAreaScope","createContextScope","ScrollAreaProvider","useScrollAreaContext","ScrollArea","React2.forwardRef","props","forwardedRef","__scopeScrollArea","type","dir","scrollHideDelay","scrollAreaProps","scrollArea","setScrollArea","React2.useState","viewport","setViewport","content","setContent","scrollbarX","setScrollbarX","scrollbarY","setScrollbarY","cornerWidth","setCornerWidth","cornerHeight","setCornerHeight","scrollbarXEnabled","setScrollbarXEnabled","scrollbarYEnabled","setScrollbarYEnabled","composedRefs","useComposedRefs","node","direction","useDirection","Primitive","VIEWPORT_NAME","ScrollAreaViewport","children","nonce","viewportProps","context","ref","React2.useRef","Fragment","SCROLLBAR_NAME","ScrollAreaScrollbar","forceMount","scrollbarProps","onScrollbarXEnabledChange","onScrollbarYEnabledChange","isHorizontal","React2.useEffect","ScrollAreaScrollbarHover","ScrollAreaScrollbarScroll","ScrollAreaScrollbarAuto","ScrollAreaScrollbarVisible","visible","setVisible","hideTimer","handlePointerEnter","handlePointerLeave","Presence","debounceScrollEnd","useDebounceCallback","send","scrollDirection","prevScrollPos","handleScroll","scrollPos","composeEventHandlers","handleResize","isOverflowX","isOverflowY","useResizeObserver","orientation","thumbRef","pointerOffsetRef","sizes","setSizes","thumbRatio","getThumbRatio","commonProps","thumb","pointerPos","getScrollPosition","getScrollPositionFromPointer","ScrollAreaScrollbarX","offset","getThumbOffsetFromScroll","ScrollAreaScrollbarY","onSizesChange","computedStyle","setComputedStyle","composeRefs","ScrollAreaScrollbarImpl","getThumbSize","maxScrollPos","isScrollingWithinScrollbarBounds","toInt","ScrollbarProvider","useScrollbarContext","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize","scrollbar","setScrollbar","rectRef","prevWebkitUserSelectRef","handleWheelScroll","useCallbackRef","handleThumbPositionChange","handleDragScroll","x","y","handleWheel","element","THUMB_NAME","ScrollAreaThumb","thumbProps","scrollbarContext","ScrollAreaThumbImpl","style","scrollAreaContext","composedRef","removeUnlinkedScrollListenerRef","listener","addUnlinkedScrollListener","thumbRect","CORNER_NAME","ScrollAreaCorner","hasBothScrollbarsVisible","ScrollAreaCornerImpl","cornerProps","width","setWidth","height","setHeight","hasSize","height2","_a","width2","viewportSize","contentSize","ratio","scrollbarPadding","thumbSize","pointerOffset","thumbSizePx","thumbCenter","thumbOffsetFromEnd","minPointerPos","maxPointerPos","scrollRange","linearScale","maxThumbPos","scrollClampRange","scrollWithoutMomentum","clamp","input","output","handler","prevPosition","rAF","loop","position","isHorizontalScroll","isVerticalScroll","callback","delay","handleCallback","debounceTimerRef","React2.useCallback","useLayoutEffect","resizeObserver","Root","Viewport","Corner","React.forwardRef","ScrollAreaPrimitive.Root","ScrollAreaPrimitive.Viewport","ScrollBar","ScrollAreaPrimitive.Corner","ScrollAreaPrimitive.ScrollAreaScrollbar","ScrollAreaPrimitive.ScrollAreaThumb","FoodSearchResults","forwardRef","results","onSelectFood","showInline","autoFocus","setQuery","setResults","setIsLoading","setError","showDropdown","setShowDropdown","dropdownRef","useRef","debouncedQuery","useDebounce","useEffect","handleClickOutside","handleSearch","useCallback","foods","err","clearSearch","handleKeyDown","errorMessage","MealsList","onDeleteMeal","onEditMeal","onAddMeal","Skeleton","Textarea","NutritionNotes","notes","onChange","editedNotes","setEditedNotes","React","setIsEditing","isSaving","setIsSaving","handleEdit","handleCancel","handleSave","EditIcon","XIcon","SaveIcon","useMealOperations","nutritionEntry","onEntryUpdated","createNewEntryWithMeal","dailyTotals","newEntryId","addNutritionEntry","newEntry","getNutritionEntryById","addMealToExistingEntry","updatedMeals","updateNutritionEntry","updatedEntry","addMeal","editMeal","updatedMeal","deleteMeal","Nutrition","setSelectedDate","formMode","setFormMode","selectedMeal","setSelectedMeal","selectedIndex","setSelectedIndex","selectedDateNutritionEntries","isNutritionLoading","refreshData","updateNotes","useNutritionEntry","isMealOperationLoading","handleDateChange","handleOpenAddMealForm","handleOpenEditMealForm","handleMealFormSubmit","success","handleCancelForm","isFormVisible","newNotes"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,20]}