import{C as P,a as D,b as S,i as U,c as A,L as Y,A as V,j as R,k as _,l as B,m as $,n as q,I as G,o as K,p as J,q as Q,B as g,r as X,s as Z,u as ee,f as se,t as ae}from"./index-Dh6OigyZ.js";import{v as Ue,x as Ae,z as Te,w as Ee,y as ke}from"./index-Dh6OigyZ.js";import{j as e,R as T,r as x}from"./vendor-react-b1n3RH4y.js";import{S as j,a as f,b as p,c as w,d as N}from"./select-E4jjsNR2.js";import{v as te,av as le,aw as k,U as H,ax as ne,ay as re,q as ie,az as oe,u as ce,aA as de,aB as me,aC as I,aD as he,aE as F}from"./vendor-26V6_GIG.js";import"./vendor-firebase-BgMWbdUj.js";const L=({title:r,description:l,children:t})=>e.jsxs(P,{children:[e.jsxs(D,{children:[e.jsx(S,{children:r}),e.jsx(U,{children:l})]}),e.jsx(A,{className:"space-y-6",children:e.jsx("div",{className:"grid gap-4",children:t})})]}),b=({icon:r,label:l,description:t,inputId:i,children:d})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r,e.jsxs("div",{children:[e.jsx(Y,{htmlFor:i,children:l}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t})]})]}),d]}),ue=[1,2,3,4,5,6,7],xe=["kg","lb"],ge=["cm","ft"],je=["DD/MM/YYYY","MM/DD/YYYY","YYYY-MM-DD"],fe=({dateFormat:r,heightUnit:l,weightUnit:t,workoutDaysPerWeek:i=3,onDateFormatChange:d,onHeightUnitChange:c,onWeightUnitChange:m,onWorkoutDaysChange:o})=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(L,{title:"Workout Preferences",description:"Customize your workout planning settings",children:e.jsx(b,{icon:e.jsx(te,{className:"h-5 w-5 text-muted-foreground"}),label:"Workout Days Per Week",description:"How many days per week you plan to work out",inputId:"workout-days",children:e.jsxs(j,{value:(i==null?void 0:i.toString())||"3",onValueChange:s=>o(parseInt(s)),children:[e.jsx(f,{className:"w-40",id:"workout-days",children:e.jsx(p,{placeholder:"Days Per Week"})}),e.jsx(w,{children:ue.map(s=>e.jsxs(N,{value:s.toString(),children:[s," ",s===1?"day":"days"]},s))})]})})}),e.jsxs(L,{title:"Units & Formatting",description:"Customize measurement units and date formats",children:[e.jsx(b,{icon:e.jsx(le,{className:"h-5 w-5 text-muted-foreground"}),label:"Date Format",description:"How dates should be displayed",inputId:"date-format",children:e.jsxs(j,{value:r,onValueChange:d,children:[e.jsx(f,{className:"w-40",children:e.jsx(p,{placeholder:"Date Format"})}),e.jsx(w,{children:je.map(s=>e.jsx(N,{value:s,children:s},s))})]})}),e.jsx(b,{icon:e.jsx(k,{className:"h-5 w-5 text-muted-foreground"}),label:"Height Unit",description:"Choose your preferred height measurement",inputId:"height-unit",children:e.jsxs(j,{value:l,onValueChange:c,children:[e.jsx(f,{className:"w-40",children:e.jsx(p,{placeholder:"Height Unit"})}),e.jsx(w,{children:ge.map(s=>e.jsx(N,{value:s,children:s==="cm"?"Centimeters (cm)":"Feet (ft)"},s))})]})}),e.jsx(b,{icon:e.jsx(k,{className:"h-5 w-5 text-muted-foreground"}),label:"Weight Unit",description:"Choose your preferred weight measurement",inputId:"weight-unit",children:e.jsxs(j,{value:t,onValueChange:m,children:[e.jsx(f,{className:"w-40",children:e.jsx(p,{placeholder:"Weight Unit"})}),e.jsx(w,{children:xe.map(s=>e.jsx(N,{value:s,children:s==="kg"?"Kilograms (kg)":"Pounds (lb)"},s))})]})})]})]}),C=({icon:r,label:l,value:t,action:i})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r,e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:l}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t})]})]}),i]}),v=({trigger:r,title:l,description:t,fields:i,onSubmit:d,cancelLabel:c="Cancel",actionLabel:m="Update"})=>{const[o,s]=T.useState({}),n=a=>{s({...o,[a.target.name]:a.target.value})},u=()=>{d(o)};return e.jsxs(V,{children:[e.jsx(R,{asChild:!0,children:r}),e.jsxs(_,{className:"w-full max-w-md",children:[e.jsxs(B,{children:[e.jsx($,{children:l}),e.jsx(q,{children:t})]}),i.map(a=>e.jsxs("div",{className:"mb-4",children:[e.jsx(Y,{htmlFor:a.name,className:"block mb-2",children:a.label}),e.jsx(G,{id:a.name,type:a.type||"text",name:a.name,className:"w-full",onChange:n,value:o[a.name]||""})]},a.name)),e.jsxs(K,{children:[e.jsx(J,{children:c}),e.jsx(Q,{type:"submit",onClick:u,children:m})]})]})]})},pe=({email:r,displayName:l,isLoading:t,onChangeEmail:i,onChangePassword:d,onSignOut:c,onDeleteAccount:m})=>{const o=n=>{n==="DELETE"?m():alert('Please type "DELETE" to confirm account deletion.')},s=(n,u)=>{if(n!==u){alert("Passwords do not match!");return}d(n)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(P,{children:[e.jsxs(D,{children:[e.jsx(S,{children:"Account Information"}),e.jsx(U,{children:"Manage your personal account details"})]}),e.jsxs(A,{className:"space-y-6",children:[e.jsx(C,{icon:e.jsx(H,{className:"h-5 w-5 text-muted-foreground"}),label:"Name",value:l||"Not set"}),e.jsx(C,{icon:e.jsx(ne,{className:"h-5 w-5 text-muted-foreground"}),label:"Password",value:"********",action:e.jsx(v,{trigger:e.jsx(g,{variant:"outline",size:"sm",disabled:t,children:"Change"}),title:"Change Password",description:"Please enter your new password.",onSubmit:n=>s(n.newPassword,n.confirmPassword),fields:[{name:"newPassword",label:"New Password",type:"password"},{name:"confirmPassword",label:"Confirm Password",type:"password"}],actionLabel:"Update Password"})}),e.jsx(C,{icon:e.jsx(re,{className:"h-5 w-5 text-muted-foreground"}),label:"Email",value:r||"Not set",action:e.jsx(v,{trigger:e.jsx(g,{variant:"outline",size:"sm",disabled:t,children:"Change"}),title:"Change Email",description:"Please enter your new email address.",fields:[{name:"newEmail",label:"New Email",type:"email"}],actionLabel:"Update Email",onSubmit:n=>i(n.newEmail),cancelLabel:"Cancel"})})]})]}),e.jsxs(P,{children:[e.jsxs(D,{children:[e.jsx(S,{children:"Account Management"}),e.jsx(U,{children:"Manage your account access and data"})]}),e.jsxs(A,{className:"flex flex-col gap-4",children:[e.jsxs(g,{variant:"outline",className:"w-full sm:w-auto flex items-center gap-2",onClick:c,disabled:t,children:[e.jsx(ie,{className:"h-4 w-4"}),"Sign out"]}),e.jsx(v,{trigger:e.jsxs(g,{variant:"destructive",className:"w-full sm:w-auto flex items-center gap-2",disabled:t,children:[e.jsx(oe,{className:"h-4 w-4"}),"Delete account"]}),title:"Are you absolutely sure?",description:"This action cannot be undone. This will permanently delete your account and remove your data from our servers.",actionLabel:"Delete account",cancelLabel:"Cancel",onSubmit:n=>o(n.confirmDelete),fields:[{name:"confirmDelete",label:'Type "DELETE" to confirm',type:"text"}]})]})]})]})},we=()=>{const[r,l]=x.useState(null),[t,i]=x.useState(!0),[d,c]=x.useState(null),[m,o]=x.useState(!1),s=async()=>{try{i(!0);const a=await Z();l(a)}catch(a){c(`Failed to fetch profile: ${a}`)}finally{i(!1)}},n=x.useCallback(async a=>{o(!0),c(null);try{await X(a),l(h=>h?{...h,...a}:null)}catch(h){c(`Failed to update profile: ${h}`)}finally{o(!1)}},[]),u=x.useCallback(async()=>{c(null);try{await s()}catch(a){c(`Failed to refresh profile: ${a}`)}},[]);return{profile:r,isLoading:t,error:d,isSaving:m,updateProfile:n,refreshProfile:u}},Pe=()=>{const r=ce(),{logout:l,deleteProfile:t}=ee(),[i,d]=T.useState(!1),[c,m]=T.useState("profile"),{state:{userPreferences:o},setDateFormat:s,setHeightUnit:n,setWeightUnit:u,setWorkoutDaysPerWeek:a}=se(),{profile:h,refreshProfile:E}=we();x.useEffect(()=>{E()},[E]);const M=()=>{l&&(l(),r("/login"))},W=()=>{console.log("Change email clicked")},z=y=>{console.log("Change password clicked",y)},O=async()=>{if(t){d(!0);try{await t(),await ae(),r("/login")}finally{d(!1)}}};return h?e.jsx("div",{className:"container mx-auto py-6 max-w-4xl",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Profile"})}),e.jsxs(de,{value:c,onValueChange:m,className:"w-full",children:[e.jsxs(me,{className:"grid grid-cols-2 mb-8",children:[e.jsxs(I,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(H,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Account"})]}),e.jsxs(I,{value:"preferences",className:"flex items-center gap-2",children:[e.jsx(he,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Preferences"})]})]}),e.jsx(F,{value:"preferences",children:e.jsx(fe,{dateFormat:o.dateFormat,heightUnit:o.heightUnit,weightUnit:o.weightUnit,workoutDaysPerWeek:o.workoutDaysPerWeek,onDateFormatChange:s,onHeightUnitChange:n,onWeightUnitChange:u,onWorkoutDaysChange:a})}),e.jsx(F,{value:"profile",children:e.jsx(pe,{email:h.email,displayName:h.displayName,isLoading:i,onChangeEmail:W,onChangePassword:y=>z(y),onSignOut:M,onDeleteAccount:O})})]})]})}):e.jsx("div",{className:"p-6",children:"Loading user data..."})};export{L as PreferenceSection,fe as PreferencesSettings,Pe as Profile,v as ProfileAlertDialog,pe as ProfileSettings,Ue as createUserProfile,Ae as createUserProfileDoc,ae as deleteUserProfile,Te as deleteUserProfileDoc,Z as getUserProfile,Ee as getUserProfileDoc,X as updateUserProfile,ke as updateUserProfileDoc,we as useProfileState};
