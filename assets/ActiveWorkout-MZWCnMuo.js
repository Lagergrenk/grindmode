import{r as c,j as e,w as D,y as k,k as $,C as R,b as I,d as W,B as f,p as T,e as V,I as C,aE as O,G as p,a2 as _,a3 as F,a4 as M,a5 as z,a6 as B,a7 as L,a8 as G,a9 as H,aa as X}from"./index-BA0ZVT4u.js";import{u as U}from"./useActiveWorkout-86o5ZFzF.js";import{C as Z}from"./checkbox-Ch_-sNL4.js";import{C as q}from"./chevron-up-CWcSeuNY.js";import{C as J}from"./circle-plus-DiFL8X-_.js";import"./index-D4tgiEuy.js";function K(s){const r=Q(s),n=c.forwardRef((a,t)=>{const{children:i,...d}=a,l=c.Children.toArray(i),o=l.find(ee);if(o){const u=o.props.children,h=l.map(m=>m===o?c.Children.count(u)>1?c.Children.only(null):c.isValidElement(u)?u.props.children:null:m);return e.jsx(r,{...d,ref:t,children:c.isValidElement(u)?c.cloneElement(u,void 0,h):null})}return e.jsx(r,{...d,ref:t,children:i})});return n.displayName=`${s}.Slot`,n}function Q(s){const r=c.forwardRef((n,a)=>{const{children:t,...i}=n,d=c.isValidElement(t)?re(t):void 0,l=D(d,a);if(c.isValidElement(t)){const o=se(i,t.props);return t.type!==c.Fragment&&(o.ref=l),c.cloneElement(t,o)}return c.Children.count(t)>1?c.Children.only(null):null});return r.displayName=`${s}.SlotClone`,r}var Y=Symbol("radix.slottable");function ee(s){return c.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===Y}function se(s,r){const n={...r};for(const a in r){const t=s[a],i=r[a];/^on[A-Z]/.test(a)?t&&i?n[a]=(...l)=>{const o=i(...l);return t(...l),o}:t&&(n[a]=t):a==="style"?n[a]={...t,...i}:a==="className"&&(n[a]=[t,i].filter(Boolean).join(" "))}return{...s,...n}}function re(s){var a,t;let r=(a=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:a.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?s.ref:(r=(t=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:t.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}var te=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],S=te.reduce((s,r)=>{const n=K(`Primitive.${r}`),a=c.forwardRef((t,i)=>{const{asChild:d,...l}=t,o=d?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...l,ref:i})});return a.displayName=`Primitive.${r}`,{...s,[r]:a}},{}),v="Progress",g=100,[ae,ye]=k(v),[ne,oe]=ae(v),b=c.forwardRef((s,r)=>{const{__scopeProgress:n,value:a=null,max:t,getValueLabel:i=le,...d}=s;(t||t===0)&&!y(t)&&console.error(ie(`${t}`,"Progress"));const l=y(t)?t:g;a!==null&&!w(a,l)&&console.error(ce(`${a}`,"Progress"));const o=w(a,l)?a:null,u=x(o)?i(o,l):void 0;return e.jsx(ne,{scope:n,value:o,max:l,children:e.jsx(S.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":x(o)?o:void 0,"aria-valuetext":u,role:"progressbar","data-state":A(o,l),"data-value":o??void 0,"data-max":l,...d,ref:r})})});b.displayName=v;var P="ProgressIndicator",E=c.forwardRef((s,r)=>{const{__scopeProgress:n,...a}=s,t=oe(P,n);return e.jsx(S.div,{"data-state":A(t.value,t.max),"data-value":t.value??void 0,"data-max":t.max,...a,ref:r})});E.displayName=P;function le(s,r){return`${Math.round(s/r*100)}%`}function A(s,r){return s==null?"indeterminate":s===r?"complete":"loading"}function x(s){return typeof s=="number"}function y(s){return x(s)&&!isNaN(s)&&s>0}function w(s,r){return x(s)&&!isNaN(s)&&s<=r&&s>=0}function ie(s,r){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${r}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${g}\`.`}function ce(s,r){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${r}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${g} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var de=b,ue=E;function me({className:s,value:r,...n}){return e.jsx(de,{"data-slot":"progress",className:$("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...n,children:e.jsx(ue,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})})}const pe=({exercise:s,exerciseIndex:r,onUpdateSet:n,onAddSet:a})=>{const[t,i]=c.useState(!1);return e.jsxs(R,{className:"mb-4",children:[e.jsx(I,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(W,{className:"text-lg",children:s.name}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>i(!t),className:"h-8 w-8 p-0",children:t?e.jsx(q,{size:16}):e.jsx(T,{size:16})})]})}),t&&e.jsx(V,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-12 text-sm font-medium text-muted-foreground",children:[e.jsx("div",{className:"col-span-1",children:"Set"}),e.jsx("div",{className:"col-span-4",children:"Weight (kg)"}),e.jsx("div",{className:"col-span-4",children:"Reps"}),e.jsx("div",{className:"col-span-3",children:"Done"})]}),s.sets.map((d,l)=>e.jsxs("div",{className:"grid grid-cols-12 items-center",children:[e.jsx("div",{className:"col-span-1",children:l+1}),e.jsx("div",{className:"col-span-4",children:e.jsx(C,{type:"number",value:d.weight,onChange:o=>n(r,l,{weight:parseFloat(o.target.value)||0}),className:"h-8"})}),e.jsx("div",{className:"col-span-4",children:e.jsx(C,{type:"number",value:d.reps,onChange:o=>n(r,l,{reps:parseInt(o.target.value)||0}),className:"h-8"})}),e.jsx("div",{className:"col-span-3 flex justify-center",children:e.jsx(Z,{checked:d.isCompleted,onCheckedChange:o=>n(r,l,{isCompleted:o===!0})})})]},l)),e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>a(r),className:"w-full mt-2",children:[e.jsx(J,{size:16,className:"mr-1"})," Add Set"]})]})})]})},fe=({stats:s})=>{const r=s.totalSets>0?Math.round(s.totalCompletedSets/s.totalSets*100):0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium",children:[s.totalCompletedSets," of ",s.totalSets," sets completed"]}),e.jsxs("span",{className:"text-sm font-medium",children:[r,"%"]})]}),e.jsx(me,{value:r,className:"h-2"})]})},xe=({startTime:s,className:r=""})=>{const[n,a]=c.useState(0);c.useEffect(()=>{if(!s)return;const i=()=>{const o=Math.floor((new Date().getTime()-s.getTime())/1e3);a(o)};i();const d=setInterval(i,1e3);return()=>clearInterval(d)},[s]);const t=i=>{const d=Math.floor(i/3600),l=Math.floor(i%3600/60),o=i%60;return`${d>0?`${d}:`:""}${l.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`};return e.jsx("div",{className:`text-lg font-mono ${r}`,children:s?t(n):"00:00"})},we=()=>{var m;const{workoutId:s}=O(),{workout:r,loading:n,error:a,updateSet:t,addSet:i,finishWorkout:d,calculateStats:l}=U(s),[o,u]=c.useState(!1);if(n)return e.jsxs("div",{className:"container py-8 space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(p,{className:"h-8 w-1/3"}),e.jsx(p,{className:"h-8 w-1/4"})]}),e.jsx(p,{className:"h-4 w-full"}),e.jsx(p,{className:"h-32 w-full"}),e.jsx(p,{className:"h-32 w-full"})]});if(a||!r)return e.jsx("div",{className:"container py-8",children:e.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:[e.jsxs("p",{children:["Error: ",a||"Workout not found"]}),e.jsx(f,{variant:"outline",className:"mt-4",onClick:()=>window.history.back(),children:"Go Back"})]})});const h=l();return e.jsx("div",{className:"container py-8",children:e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:r.name}),e.jsx(xe,{startTime:(m=r.startTime)==null?void 0:m.toDate(),className:"text-xl font-mono"})]}),e.jsx(fe,{stats:h}),e.jsx("div",{className:"space-y-4",children:r.exercises.map((j,N)=>e.jsx(pe,{exercise:j,exerciseIndex:N,onUpdateSet:t,onAddSet:i},j.exerciseId||N))}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsxs(_,{open:o,onOpenChange:u,children:[e.jsx(F,{asChild:!0,children:e.jsx(f,{size:"lg",className:"px-8",children:"Finish Workout"})}),e.jsxs(M,{children:[e.jsxs(z,{children:[e.jsx(B,{children:"Finish Workout"}),e.jsx(L,{children:"Are you sure you want to finish this workout? This action cannot be undone."})]}),e.jsxs(G,{children:[e.jsx(H,{children:"Cancel"}),e.jsx(X,{onClick:d,children:"Finish"})]})]})]})})]})})};export{we as ActiveWorkoutPage};
//# sourceMappingURL=ActiveWorkout-MZWCnMuo.js.map
