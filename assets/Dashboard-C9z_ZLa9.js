import{c as $,t as j,a as I,j as e,C as R,b as H,d as O,B as g,e as U,L as B,r as x,g as P,W as V,s as _,f as q,h as Q,D as G,U as J,u as K,i as X}from"./index-CKYx6VMo.js";import{f as Y,u as Z}from"./useNutritionEntry-j5PvYS2E.js";import{C as T}from"./circle-plus-DuBbghJC.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],se=$("arrow-right",ee);function te(s,t){const r=j(s);return isNaN(t)?I(s,NaN):(r.setDate(r.getDate()+t),r)}function oe(s,t){const r=+j(s),[a,o]=[+j(t.start),+j(t.end)].sort((l,d)=>l-d);return r>=a&&r<=o}const y=({title:s,subtitle:t,value:r,unit:a,className:o=""})=>e.jsxs("div",{className:`border rounded-md p-3 flex justify-between items-center ${o}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s}),t&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t})]}),r!==void 0&&e.jsxs("p",{className:"text-lg font-semibold",children:[r,a&&e.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:a})]})]}),f=({label:s,value:t,unit:r,valueSize:a="lg",className:o=""})=>{const l={sm:"text-sm",md:"text-md",lg:"text-lg",xl:"text-xl"};return e.jsxs("div",{className:o,children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:s}),e.jsxs("p",{className:`${l[a]} font-bold`,children:[t,r&&e.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-1",children:r})]})]})},S=({children:s,className:t=""})=>e.jsx("div",{className:`flex items-center justify-between ${t}`,children:s}),D=({title:s,actionLabel:t,actionIcon:r,onAction:a,isLoading:o=!1,loadingText:l="Loading data...",className:d="",children:h})=>e.jsxs(R,{className:d,children:[e.jsx(H,{className:"pb-2",children:e.jsxs(O,{className:"text-lg flex justify-between items-center",children:[e.jsx("span",{children:s}),a&&e.jsxs(g,{size:"sm",variant:"outline",onClick:a,className:"flex items-center gap-1 h-8",disabled:o,children:[r,t]})]})}),e.jsx(U,{children:o?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(B,{className:"h-5 w-5 animate-spin mr-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:l})]}):h})]}),re=()=>{const[s,t]=x.useState([]),[r,a]=x.useState(!0),[o,l]=x.useState(null),[d,h]=x.useState({today:{completed:!1,duration:0,exercises:0},weekly:{workouts:0,totalDuration:0},recentWorkouts:[]});x.useEffect(()=>{(async()=>{try{a(!0);const i=await P(V.COMPLETED);t(i),p(i),l(null)}catch(i){console.error("Error fetching completed workouts:",i),l("Failed to load workout data")}finally{a(!1)}})()},[]);const p=m=>{const i=new Date,k=_(i,{weekStartsOn:1}),N=new Date;N.setHours(0,0,0,0);const E=te(N,1),w=m.filter(c=>{var u;const n=(u=c.endTime)==null?void 0:u.toDate();return n&&n>=N&&n<E}),F=w.reduce((c,n)=>c+(n.duration||0),0),z=w.reduce((c,n)=>c+n.exercises.length,0),b=m.filter(c=>{var u;const n=(u=c.endTime)==null?void 0:u.toDate();return n&&oe(n,{start:k,end:i})}),A=b.reduce((c,n)=>c+(n.duration||0),0),M=[...m].sort((c,n)=>{var v,W,C,L;const u=((W=(v=c.endTime)==null?void 0:v.toDate())==null?void 0:W.getTime())||0;return(((L=(C=n.endTime)==null?void 0:C.toDate())==null?void 0:L.getTime())||0)-u}).slice(0,3);h({today:{completed:w.length>0,duration:Math.round(F/60),exercises:z},weekly:{workouts:b.length,totalDuration:Math.round(A/60)},recentWorkouts:M})};return{isLoading:r,error:o,completedWorkouts:s,workoutSummary:d}},ae=({userName:s})=>{const t=new Date,r={weekday:"long",year:"numeric",month:"long",day:"numeric"},a=t.toLocaleDateString("en-US",r);return e.jsx("header",{className:"mb-6 space-y-2",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Welcome back, ",s]}),e.jsx("p",{className:"text-muted-foreground",children:"Track your fitness journey and reach your goals"})]}),e.jsxs("div",{className:"mt-2 sm:mt-0 flex items-center text-sm text-muted-foreground",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:a})]})]})})},ne=({nutritionData:s,isLoading:t=!1,latestEntries:r=[],onLogFood:a})=>{var l,d;const o=r[0];return e.jsx(D,{title:"Nutrition",actionLabel:"Log",actionIcon:e.jsx(T,{className:"h-4 w-4 mr-1"}),onAction:a,isLoading:t,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(S,{children:[e.jsx(f,{label:"Today",value:(s==null?void 0:s.today.calories.toFixed(0))||"0",unit:"cal",valueSize:"lg"}),e.jsx(f,{label:"Protein",value:(s==null?void 0:s.today.protein.toFixed(0))||"0",unit:"g",valueSize:"md",className:"text-right"})]}),o&&e.jsxs("div",{className:"pt-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Last Entry"}),e.jsx(y,{title:o.date?Y(o.date.toDate()):"Recent",subtitle:`${((l=o.meals)==null?void 0:l.length)||0} meals logged`,value:((d=o.dailyTotals)==null?void 0:d.calories.toFixed(0))||"0",unit:"cal"})]}),s&&s.weekly.daysTracked>0&&e.jsxs("div",{className:"pt-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Weekly Average"}),e.jsx(y,{title:`${s.weekly.averageCalories.toFixed(0)} cal/day`,subtitle:`${s.weekly.daysTracked} days tracked this week`})]})]})})},le=({workoutData:s={today:{completed:!1,duration:0,exercises:0},weekly:{workouts:0,totalDuration:0},recentWorkouts:[]},isLoading:t=!1,onLogWorkout:r,onViewHistory:a})=>e.jsx(D,{title:"Workouts",actionLabel:"Log",actionIcon:e.jsx(T,{className:"h-4 w-4 mr-1"}),onAction:r,isLoading:t,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(S,{children:[e.jsx(f,{label:"This Week",value:s.weekly.workouts,unit:"workouts"}),e.jsx(f,{label:"Total Time",value:s.weekly.totalDuration,unit:"min",className:"text-right"})]}),e.jsx("div",{className:"pt-2",children:s.today.completed?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Today's Workout"}),e.jsx(y,{title:"Completed",subtitle:`${s.today.exercises} exercises`,value:s.today.duration,unit:"min"})]}):e.jsx(y,{title:"No workout yet today",subtitle:"Log your workout to track progress"})}),s.recentWorkouts.length>0&&e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Recent Workouts"}),e.jsx(g,{variant:"ghost",size:"sm",className:"p-0 h-auto",onClick:a,children:e.jsxs("span",{className:"text-xs flex items-center",children:["View all ",e.jsx(se,{className:"h-3 w-3 ml-1"})]})})]}),s.recentWorkouts.map(o=>e.jsxs("div",{className:"border-b border-border pb-2 last:border-0 mb-2 last:mb-0",children:[e.jsx("p",{className:"text-sm font-medium",children:o.name}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:o.endTime?Q(o.endTime.toDate(),"MMM d"):"Date unknown"}),e.jsxs("span",{children:[o.exercises.length," exercise",o.exercises.length!==1?"s":""]})]})]},o.id))]})]})}),ce=({onAddWorkout:s,onLogFood:t})=>e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsxs(g,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:s,children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Workout"})]}),e.jsxs(g,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:t,children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:"Log Food"})]})]}),he=()=>{const s=K(),{user:t}=X(),[r]=x.useState(()=>new Date),{isLoading:a,allNutritionEntries:o,nutritionSummary:l}=Z(r),{isLoading:d,error:h,workoutSummary:p}=re(),m=()=>{s("/workoutplanner")},i=()=>{s("/nutrition")},k=()=>{s("/workouts")};return e.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[e.jsx(ae,{userName:(t==null?void 0:t.displayName)||"User"}),e.jsx(ce,{onAddWorkout:m,onLogFood:i}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(le,{onLogWorkout:m,isLoading:d,workoutData:p,onViewHistory:k,error:h}),e.jsx(ne,{isLoading:a,nutritionData:l,latestEntries:o.slice(0,3),onLogFood:i})]})]})};export{he as Dashboard};
//# sourceMappingURL=Dashboard-C9z_ZLa9.js.map
