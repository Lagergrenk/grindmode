const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DsaUjBRd.js","assets/vendor-react-BG_21XCX.js","assets/vendor-DdkT1QD4.js","assets/useNutritionEntry-ie2rJQF5.js","assets/vendor-firebase-TzzhK1Gx.js","assets/Nutrition-Uzz3yPd2.js","assets/select-DYDsfMQd.js","assets/useDebounce-Do5wFUDK.js","assets/index-ClgWgxLO.js","assets/index-DnIYC_Xi.js"])))=>i.map(i=>d[i]);
var Le=Object.defineProperty;var Re=(s,t,r)=>t in s?Le(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var ne=(s,t,r)=>Re(s,typeof t!="symbol"?t+"":t,r);import{r as u,j as e,R as F,e as Ie}from"./vendor-react-BG_21XCX.js";import{i as Ue,g as We,a as Te,b as Fe,o as Me,d as Oe,u as Ge,s as _e,c as ze,e as qe,f as $e,G as Be,h as Ve,j as E,k as K,T as C,l as Ye,m as he,n as fe,p as O,q as He,r as G,t as oe,v as _,w as H,x as J}from"./vendor-firebase-TzzhK1Gx.js";import{t as Je,c as Ze,R as Ke,a as Q,b as Qe,I as Xe,S as xe,d as et,T as tt,P as st,C as rt,L as at,e as nt,f as ot,O as ge,h as it,i as pe,j as we,D as be,A as je,k as ye,l as lt,m as ct,u as $,n as dt,U as ut,p as mt,M as ht,q as ft,N as xt,s as gt,v as ie,w as pt,x as wt,y as bt,z as jt,B as yt,E as X,F as T,G as B,H as ee,J as ve,K as vt,Q as Nt,V as kt,W as Pt,X as St,Y as y,Z as Ct,$ as Dt}from"./vendor-DdkT1QD4.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();const Et={isAuthenticated:!1,isLoading:!0,user:null,error:null,login:async()=>{},loginWithGoogle:async()=>{},signup:async()=>{},logout:async()=>{},updateProfile:async()=>{},deleteProfile:async()=>{}},Ne=u.createContext(Et),At={apiKey:"AIzaSyC-DVPD-4CjDQ0nYOjg5y2hMOy1zjx6VeU",authDomain:"grindmode-5d2bb.firebaseapp.com",projectId:"grindmode-5d2bb",storageBucket:"grindmode-5d2bb.firebasestorage.app",messagingSenderId:"1096214127157",appId:"1:1096214127157:web:7b82fd19693d933f3f877c",measurementId:"G-XJN3G8434B"},te=Ue(At);We(te);const N=Te(te),P=Fe(te),Lt=(s,t)=>ze(P,s,t),Rt=(s,t)=>$e(P,s,t),It=()=>_e(P),Ut=s=>P.currentUser&&Ge(P.currentUser,s),Wt=()=>P.currentUser&&Oe(P.currentUser),Tt=Me,Ft=()=>{const s=new Be;return Ve(P,s)},Mt=qe;P.currentUser;const Ot=P,D=s=>{if(!s)return"An unknown error occurred";if(s.code){const r=s;switch(r.code){case"auth/email-already-in-use":return"This email is already registered. Please use a different email or try logging in.";case"auth/invalid-email":return"Invalid email address. Please check your email and try again.";case"auth/weak-password":return"Password is too weak. Please use a stronger password.";case"auth/user-not-found":return"No account found with this email. Please check your email or create a new account.";case"auth/wrong-password":return"Incorrect password. Please try again or reset your password.";case"auth/too-many-requests":return"Too many unsuccessful login attempts. Please try again later or reset your password.";case"auth/user-disabled":return"This account has been disabled. Please contact support for assistance.";case"auth/network-request-failed":return"Network error. Please check your connection and try again.";default:return`Authentication error: ${r.message}`}}return`Error: ${s instanceof Error?s.message:String(s)}`},k=()=>{const s=P.currentUser;if(!s||!s.uid)throw new Error("User not authenticated");return s.uid},Gt=async s=>{const t=E(N,"users",s),r=await K(t);return r.exists()?r.data():null},_t=async(s,t)=>{const r=E(N,"users",s);if(!(await K(r)).exists()){const a=C.now();await Ye(r,{...t,createdAt:a,updatedAt:a})}},zt=async(s,t)=>{const r=E(N,"users",s);await he(r,{...t,updatedAt:C.now()})},qt=async s=>{const t=E(N,"users",s);await fe(t)},$t=async()=>{try{const s=k();return await Gt(s)}catch(s){return console.error("Error getting user profile:",s),null}},$s=async s=>{try{const t=k();await zt(t,s)}catch(t){throw console.error("Error updating user profile:",t),new Error("Failed to update profile")}},le=async s=>{try{const t=k();await _t(t,s)}catch(t){throw console.error("Error creating user profile:",t),new Error("Failed to create profile")}},Bs=async()=>{try{const s=k();await qt(s)}catch(s){throw console.error("Error deleting user profile:",s),new Error("Failed to delete profile")}};function x(...s){return Je(Ze(s))}const A=u.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:x("rounded-xl border bg-card text-card-foreground shadow",s),...t}));A.displayName="Card";const L=u.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:x("flex flex-col space-y-1.5 p-6",s),...t}));L.displayName="CardHeader";const U=u.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:x("font-semibold leading-none tracking-tight",s),...t}));U.displayName="CardTitle";const V=u.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:x("text-sm text-muted-foreground",s),...t}));V.displayName="CardDescription";const R=u.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:x("p-6 pt-0",s),...t}));R.displayName="CardContent";const M=u.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:x("flex items-center p-6 pt-0",s),...t}));M.displayName="CardFooter";function Bt({className:s,...t}){return e.jsx(Ke,{"data-slot":"label",className:x("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}const Vt=Q("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ke({className:s,variant:t,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:x(Vt({variant:t}),s),...r})}function Pe({className:s,...t}){return e.jsx("div",{"data-slot":"alert-description",className:x("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}function Yt({className:s,...t}){return e.jsx(Qe,{"data-slot":"avatar",className:x("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...t})}function Ht({className:s,...t}){return e.jsx(Xe,{"data-slot":"avatar-image",className:x("aspect-square size-full",s),...t})}const Jt=Q("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ce({className:s,variant:t,asChild:r=!1,...n}){const a=r?xe:"span";return e.jsx(a,{"data-slot":"badge",className:x(Jt({variant:t}),s),...n})}const se=Q("inline-flex items-center justify-center gap-2 whitespace-nowrap cursor-pointer rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),v=u.forwardRef(({className:s,variant:t,size:r,asChild:n=!1,...a},l)=>{const o=n?xe:"button";return e.jsx(o,{className:x(se({variant:t,size:r,className:s})),ref:l,...a})});v.displayName="Button";function Zt({...s}){return e.jsx(et,{"data-slot":"dropdown-menu",...s})}function Kt({...s}){return e.jsx(tt,{"data-slot":"dropdown-menu-trigger",...s})}function Qt({className:s,sideOffset:t=4,...r}){return e.jsx(st,{children:e.jsx(rt,{"data-slot":"dropdown-menu-content",sideOffset:t,className:x("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...r})})}function Z({className:s,inset:t,variant:r="default",...n}){return e.jsx(ot,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":r,className:x("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n})}function Xt({className:s,inset:t,...r}){return e.jsx(at,{"data-slot":"dropdown-menu-label","data-inset":t,className:x("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",s),...r})}function de({className:s,...t}){return e.jsx(nt,{"data-slot":"dropdown-menu-separator",className:x("bg-border -mx-1 my-1 h-px",s),...t})}u.createContext({});u.createContext({});const Se=u.forwardRef(({className:s,type:t,...r},n)=>e.jsx("input",{type:t,className:x("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...r}));Se.displayName="Input";function z({className:s,...t}){return e.jsx("div",{"data-slot":"skeleton",className:x("bg-accent animate-pulse rounded-md",s),...t})}const Vs=lt,Ys=ct,es=it,Ce=u.forwardRef(({className:s,...t},r)=>e.jsx(ge,{className:x("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));Ce.displayName=ge.displayName;const ts=u.forwardRef(({className:s,...t},r)=>e.jsxs(es,{children:[e.jsx(Ce,{}),e.jsx(pe,{ref:r,className:x("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));ts.displayName=pe.displayName;const ss=({className:s,...t})=>e.jsx("div",{className:x("flex flex-col space-y-2 text-center sm:text-left",s),...t});ss.displayName="AlertDialogHeader";const rs=({className:s,...t})=>e.jsx("div",{className:x("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});rs.displayName="AlertDialogFooter";const as=u.forwardRef(({className:s,...t},r)=>e.jsx(we,{ref:r,className:x("text-lg font-semibold",s),...t}));as.displayName=we.displayName;const ns=u.forwardRef(({className:s,...t},r)=>e.jsx(be,{ref:r,className:x("text-sm text-muted-foreground",s),...t}));ns.displayName=be.displayName;const os=u.forwardRef(({className:s,...t},r)=>e.jsx(je,{ref:r,className:x(se(),s),...t}));os.displayName=je.displayName;const is=u.forwardRef(({className:s,...t},r)=>e.jsx(ye,{ref:r,className:x(se({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));is.displayName=ye.displayName;const q={userPreferences:{theme:"light",heightUnit:"cm",weightUnit:"kg",dateFormat:"DD/MM/YYYY",notificationsEnabled:!0,workoutDaysPerWeek:3},ui:{sidebarOpen:!0,activeDashboardTab:"home"},dashboardData:{needsRefresh:!1,lastUpdated:null}},De=F.createContext({state:q,setHeightUnit:()=>{},setWeightUnit:()=>{},setDateFormat:()=>{},setSidebarOpen:()=>{},setTheme:()=>{},setWorkoutDaysPerWeek:()=>{}}),ls=()=>{const s=u.useContext(De);if(!s)throw new Error("useAppState must be used within an AppProvider");const{state:t,setHeightUnit:r,setWeightUnit:n,setDateFormat:a,setSidebarOpen:l,setTheme:o,setWorkoutDaysPerWeek:c}=s;return{state:t,setHeightUnit:r,setWeightUnit:n,setDateFormat:a,setSidebarOpen:l,setTheme:o,setWorkoutDaysPerWeek:c}},W=()=>{const s=u.useContext(Ne);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return{...s}},cs=({children:s})=>{const[t,r]=u.useState(null),[n,a]=u.useState("loading"),[l,o]=u.useState(null);u.useEffect(()=>{const d=Tt(Ot,async g=>{if(g){let p=g.displayName;const j=g.photoURL;if(!p||!j){const S=await $t();console.log("userProfile",S),S&&(p=S.displayName)}r({uid:g.uid,email:g.email,displayName:p||"",photoURL:j||""}),a("authenticated")}else r(null),a("unauthenticated")});return()=>d()},[]);const f={isAuthenticated:n==="authenticated",isLoading:n==="loading",user:t,error:l,login:async(d,g)=>{o(null);try{await Rt(d,g)}catch(p){const j=D(p),S=new Error(j);throw o(S),S}},loginWithGoogle:async()=>{o(null);try{const d=await Ft(),g=Mt(d);if(!(g!=null&&g.isNewUser))return;await le({email:d.user.email||"",displayName:d.user.displayName||""}),r({uid:d.user.uid,email:d.user.email,displayName:d.user.displayName||"",photoURL:d.user.photoURL||""})}catch(d){const g=D(d),p=new Error(g);throw o(p),p}},signup:async(d,g,p)=>{o(null);try{const j=await Lt(d,g);j.user&&(await le({email:j.user.email||"",displayName:p}),r({uid:j.user.uid,email:j.user.email,displayName:p,photoURL:j.user.photoURL||""}))}catch(j){const S=D(j),ae=new Error(S);throw o(ae),ae}},logout:async()=>{o(null);try{await It()}catch(d){const g=D(d),p=new Error(g);throw o(p),p}},updateProfile:async d=>{o(null);try{const{displayName:g}=d;g&&await Ut({displayName:g})}catch(g){const p=D(g),j=new Error(p);throw o(j),j}},deleteProfile:async()=>{o(null);try{await Wt()}catch(d){const g=D(d),p=new Error(g);throw o(p),p}}};return e.jsx(Ne.Provider,{value:f,children:s})},ds="modulepreload",us=function(s){return"/grindmode/"+s},ue={},Y=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let o=function(i){return Promise.all(i.map(h=>Promise.resolve(h).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),m=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=o(r.map(i=>{if(i=us(i),i in ue)return;ue[i]=!0;const h=i.endsWith(".css"),b=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${b}`))return;const w=document.createElement("link");if(w.rel=h?"stylesheet":ds,h||(w.as="script"),w.crossOrigin="",w.href=i,m&&w.setAttribute("nonce",m),document.head.appendChild(w),h)return new Promise((f,d)=>{w.addEventListener("load",f),w.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})}))}function l(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return a.then(o=>{for(const c of o||[])c.status==="rejected"&&l(c.reason);return t().catch(l)})},ms=()=>e.jsx("footer",{className:"py-4 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["© ",new Date().getFullYear()," GrindMode"]})}),hs={theme:"light",setTheme:()=>null},Ee=u.createContext(hs),fs=()=>{const s=u.useContext(Ee);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s},xs=({onLogout:s})=>{const{user:t,isAuthenticated:r}=W(),{theme:n,setTheme:a}=fs(),l=$();return e.jsx("header",{className:"sticky top-0 z-30 flex h-16 items-center bg-white dark:bg-background border-b border-gray-200 dark:border-border px-4",children:e.jsx("div",{className:"ml-auto flex items-center space-x-2",children:r?e.jsx(e.Fragment,{children:e.jsxs(Zt,{children:[e.jsx(Kt,{children:e.jsxs("div",{className:"flex items-center gap-2 rounded-full pl-1 cursor-pointer",children:[(t==null?void 0:t.photoURL)&&e.jsx(Yt,{className:"h-8 w-8",children:e.jsx(Ht,{src:t==null?void 0:t.photoURL,alt:"User Avatar"})}),e.jsx("span",{className:"hidden md:inline text-sm font-medium",children:t==null?void 0:t.displayName}),e.jsx(dt,{className:"h-4 w-4 opacity-50"})]})}),e.jsxs(Qt,{align:"end",className:"w-56",children:[e.jsx(Xt,{children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t==null?void 0:t.displayName}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t==null?void 0:t.email})]})}),e.jsx(de,{}),e.jsxs(Z,{onClick:()=>l("profile"),children:[e.jsx(ut,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsx(Z,{onClick:()=>a(n==="dark"?"light":"dark"),children:e.jsxs("span",{className:"flex items-center gap-2",children:[n==="dark"?e.jsx(mt,{className:"h-4 w-4 bg-gray-800 dark:bg-card rounded-full"}):e.jsx(ht,{className:"h-4 w-4 bg-gray-200 dark:bg-card rounded-full"}),e.jsx("span",{children:"Toggle Theme"})]})}),e.jsx(de,{}),e.jsxs(Z,{onClick:s,children:[e.jsx(ft,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>l("/login"),className:"hidden md:inline-flex",children:"Log in"}),e.jsx(v,{size:"sm",onClick:()=>l("/signup"),children:"Sign up"})]})})})},gs=({navItems:s,isCollapsed:t=!1})=>e.jsx("ul",{className:x("space-y-1",t?"px-2":"px-3"),children:s.map(r=>e.jsx("li",{className:"transform transition-all duration-200 ease-in-out",children:e.jsxs(xt,{to:r.path,className:({isActive:n})=>x("flex items-center rounded-md px-3 py-2 text-sm transition-all duration-300 ease-in-out",n?"bg-sidebar-accent text-sidebar-accent-foreground dark:bg-sidebar-accent dark:text-sidebar-accent-foreground":"hover:bg-accent/50 text-muted-foreground hover:text-foreground dark:hover:bg-sidebar-accent/30 dark:text-sidebar-foreground dark:hover:text-sidebar-foreground",t?"justify-center":"justify-start"),children:[e.jsx("div",{className:x("flex items-center transition-all duration-300 ease-in-out",t?"w-full justify-center":"mr-3"),children:e.jsx("span",{className:"flex items-center justify-center w-5 h-5",children:r.icon})}),e.jsx("span",{className:x("whitespace-nowrap transition-all duration-300 ease-in-out",t?"w-0 opacity-0 overflow-hidden":"w-auto opacity-100"),children:r.label})]})},r.path))}),ps=()=>[{path:"/dashboard",label:"Dashboard",icon:e.jsx(gt,{className:"h-4 w-4"})},{path:"/workoutplanner",label:"Workout Planner",icon:e.jsx(ie,{className:"h-4 w-4"})},{path:"/workout",label:"Planned Workouts",icon:e.jsx(ie,{className:"h-4 w-4"})},{path:"/nutrition",label:"Nutrition",icon:e.jsx(pt,{className:"h-4 w-4"})},{path:"/progress",label:"Progress",icon:e.jsx(wt,{className:"h-4 w-4"})},{path:"/goals",label:"Goals",icon:e.jsx(bt,{className:"h-4 w-4"})}],ws=({isCollapsed:s=!1,toggleSidebar:t})=>{const r=ps();return e.jsxs("div",{className:"h-screen flex flex-col bg-white dark:bg-sidebar",children:[e.jsx("div",{className:x("flex h-16 items-center border-b dark:border-sidebar-border",s?"justify-center":"px-4"),children:s?e.jsx("div",{className:"rounded-full bg-primary h-8 w-8 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-primary-foreground",children:"GM"})}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"rounded-full bg-primary h-6 w-6 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-primary-foreground",children:"GM"})}),e.jsx("span",{className:"font-semibold text-lg dark:text-sidebar-foreground",children:"GrindMode"})]})}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-6 no-scrollbar bg-white dark:bg-sidebar",children:e.jsx(gs,{navItems:r,isCollapsed:s})}),e.jsx("div",{className:"flex items-center justify-center border-t dark:border-sidebar-border p-2 bg-white dark:bg-sidebar",children:e.jsx(v,{variant:"ghost",size:"icon",onClick:t,className:"w-full h-10 rounded-full hover:bg-accent/50 dark:hover:bg-sidebar-accent/50","aria-label":"Toggle sidebar",children:s?e.jsx(jt,{className:"h-5 w-5 dark:text-sidebar-foreground"}):e.jsx(yt,{className:"h-5 w-5 dark:text-sidebar-foreground"})})})]})},bs=({isAuthenticated:s})=>s?e.jsx(X,{}):e.jsx(T,{to:"/login"}),js=()=>{const{state:s,setSidebarOpen:t}=ls(),{logout:r}=W(),n=$(),a=s.ui.sidebarOpen,l=()=>{t(!a)},o=u.useCallback(async()=>{try{r&&await r(),n("/login")}catch(c){console.error("Logout failed:",c)}},[r,n]);return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-background",children:[e.jsx("div",{className:`${a?"w-64":"w-20"} transition-all duration-300 ease-in-out bg-white dark:bg-sidebar shadow-lg`,children:e.jsx(ws,{isCollapsed:!a,toggleSidebar:l})}),e.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[e.jsx(xs,{onLogout:o}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 bg-gray-50 dark:bg-background",children:e.jsx("div",{className:"container mx-auto",children:e.jsx(X,{})})})]})]})};function ys(){return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background text-foreground p-4",children:[e.jsxs("header",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4",children:"Welcome to Grind Mode"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Your ultimate companion for tracking fitness and diet, helping you stay motivated and achieve your health goals. Log workouts, monitor nutrition, and see your progress all in one place."})]}),e.jsxs("main",{className:"text-center",children:[e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-3xl font-semibold mb-6",children:"What Grind Mode Offers"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"p-6 bg-card rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-2 text-card-foreground",children:"Fitness Tracking"}),e.jsx("p",{className:"text-muted-foreground",children:"Log your workouts with ease. Track sets, reps and weight for various exercises."})]}),e.jsxs("div",{className:"p-6 bg-card rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-2 text-card-foreground",children:"Diet Logging"}),e.jsx("p",{className:"text-muted-foreground",children:"Keep a detailed record of your meals and nutritional intake. Understand your calorie consumption and macronutrient breakdown."})]})]})]}),e.jsx(B,{to:"/login",children:e.jsx(v,{size:"lg",className:"text-lg px-8 py-4",children:"Get Started"})})]})]})}const vs=()=>e.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-slate-50 to-blue-100 dark:from-background dark:to-card",children:[e.jsx("header",{className:"w-full py-6 px-4",children:e.jsxs("div",{className:"container mx-auto flex justify-center",children:[e.jsx("div",{className:"rounded-full bg-primary h-8 w-8 flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-sm font-bold text-primary-foreground",children:"GM"})}),e.jsx("span",{className:"font-bold text-xl text-gray-900 dark:text-foreground",children:"Grind Mode"})]})}),e.jsx("main",{className:"flex flex-grow items-center justify-center px-4 py-8",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(X,{})})}),e.jsx(ms,{})]}),I=({label:s,id:t,name:r,type:n,autoComplete:a,value:l,onChange:o,className:c})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(Bt,{htmlFor:t,children:s})}),e.jsx(Se,{id:t,name:r,type:n,autoComplete:a,value:l,onChange:o,className:`w-full ${c??""}`})]}),Ae=({text:s,onClick:t,isLoading:r})=>e.jsxs(v,{type:"button",variant:"outline",onClick:t,disabled:r,className:"w-full mt-2",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:e.jsxs("g",{transform:"matrix(1, 0, 0, 1, 27.009001, -39.238998)",children:[e.jsx("path",{fill:"#4285F4",d:"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"}),e.jsx("path",{fill:"#34A853",d:"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"}),e.jsx("path",{fill:"#FBBC05",d:"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"}),e.jsx("path",{fill:"#EA4335",d:"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"})]})}),s]}),Ns=({onSignup:s,onGoogleSignIn:t,isLoading:r,error:n})=>{const[a,l]=F.useState({email:"",password:"",confirmPassword:"",displayName:""}),[o,c]=F.useState(!0),m=h=>{const{name:b,value:w}=h.target;l(f=>({...f,[b]:w})),(b==="password"||b==="confirmPassword")&&c(b==="confirmPassword"?a.password===w:w===a.confirmPassword)},i=async h=>{if(h.preventDefault(),a.password!==a.confirmPassword){c(!1);return}await s(a)};return e.jsxs(A,{className:"w-full max-w-md mx-auto",children:[e.jsx(L,{children:e.jsx(U,{className:"text-2xl text-center font-bold",children:"Sign up"})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsx(I,{label:"Full Name",id:"displayName",name:"displayName",type:"text",autoComplete:"name",value:a.displayName,onChange:m,required:!0}),e.jsx(I,{label:"Email",id:"email",name:"email",type:"email",autoComplete:"email",value:a.email,onChange:m,required:!0}),e.jsx(I,{label:"Password",id:"password",name:"password",type:"password",autoComplete:"new-password",value:a.password,onChange:m}),e.jsx(I,{label:"Confirm Password",id:"confirmPassword",name:"confirmPassword",type:"password",value:a.confirmPassword,onChange:m,className:` ${!o&&a.confirmPassword?"border-destructive":""}`,autoComplete:"new-password"}),!o&&a.confirmPassword&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:"Passwords don't match"}),n&&e.jsx("p",{className:"text-sm text-destructive",children:n}),e.jsx(v,{type:"submit",className:"w-full",disabled:r||!o,children:r?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"})]})}),e.jsx(M,{children:e.jsx(Ae,{text:"Continue with Google",onClick:t,isLoading:r})})]})},ks=({onLogin:s,isLoading:t,onGoogleSignIn:r})=>{const[n,a]=u.useState({email:"",password:""}),l=c=>{const{name:m,value:i}=c.target;a(h=>({...h,[m]:i}))},o=async c=>{c.preventDefault(),s(n)};return e.jsxs(A,{className:"w-full max-w-md mx-auto",children:[e.jsx(L,{children:e.jsx(U,{className:"text-2xl text-center font-bold",children:"Login"})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsx(I,{label:"Email",id:"email",name:"email",type:"email",autoComplete:"email",value:n.email,onChange:l,required:!0}),e.jsx(I,{label:"Password",id:"password",name:"password",type:"password",autoComplete:"current-password",value:n.password,onChange:l,required:!0}),e.jsx(v,{type:"submit",className:"w-full",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):"Login"})]})}),r&&e.jsx(M,{children:e.jsx(Ae,{onClick:r,isLoading:t,text:"Continue with Google"})})]})},Ps=()=>{const[s,t]=F.useState(null),[r,n]=F.useState(!1),{isAuthenticated:a,login:l,loginWithGoogle:o}=W();if(a)return e.jsx(T,{to:"/"});const c=async()=>{t(null),n(!0);try{if(!o)throw new Error("Google Sign-In function is not available");await o()}catch(i){t(D(i))}finally{n(!1)}},m=async i=>{t(null),n(!0);try{if(!l)throw new Error("Login function is not available");await l(i.email,i.password)}catch(h){t(D(h))}finally{n(!1)}};return e.jsxs(A,{children:[e.jsxs(L,{className:"space-y-1",children:[e.jsx(U,{className:"text-2xl font-bold text-center",children:"Welcome Back"}),e.jsx(V,{className:"text-center",children:"Log in to continue your fitness journey"})]}),e.jsxs(R,{children:[s&&e.jsxs(ke,{variant:"destructive",className:"mb-4",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx(Pe,{children:s})]}),e.jsx(ks,{onGoogleSignIn:c,onLogin:m,isLoading:r})]}),e.jsx(M,{className:"flex justify-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dont have an account?"," ",e.jsx(B,{to:"/signup",className:"font-medium text-primary hover:underline",children:"Sign up"})]})})]})},Ss=()=>{const[s,t]=u.useState(!1),[r,n]=u.useState(null),a=$(),{signup:l,loginWithGoogle:o}=W(),c=async i=>{const{email:h,password:b,displayName:w}=i;t(!0),n(null);try{l(h,b,w),a("/dashboard")}catch(f){let d="Failed to create account. Please try again.";f instanceof Error&&(f.message.includes("email-already-in-use")?d="This email is already registered. Please use another email or login.":f.message.includes("weak-password")?d="Password should be at least 6 characters long.":f.message.includes("invalid-email")&&(d="Please enter a valid email address.")),n(d)}finally{t(!1)}},m=async()=>{t(!0),n(null);try{o(),a("/dashboard")}catch(i){n("Google sign-in failed. Please try again."),console.error("Google sign-in error:",i)}finally{t(!1)}};return e.jsxs(A,{children:[e.jsxs(L,{className:"space-y-1",children:[e.jsx(U,{className:"text-2xl font-bold text-center",children:"Create your account"}),e.jsx(V,{className:"text-center",children:"Join GrindMode to track your fitness journey"})]}),e.jsxs(R,{children:[r&&e.jsxs(ke,{variant:"destructive",className:"mb-4",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx(Pe,{children:r})]}),e.jsx(Ns,{onSignup:c,isLoading:s,error:r,onGoogleSignIn:m})]}),e.jsx(M,{className:"flex justify-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx(B,{to:"/login",className:"font-medium text-primary hover:underline",children:"Log in"})]})})]})},me=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[e.jsx(ee,{className:"animate-spin h-12 w-12 text-primary mb-4"}),e.jsx("p",{className:"text-xl font-semibold",children:"Loading..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please wait a moment."})]}),Cs=()=>{const s=vt();return e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground p-4 text-center",children:[e.jsx("h1",{className:"text-6xl font-bold text-primary mb-4",children:"404"}),e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Page Not Found"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["Sorry, the page you are looking for at"," ",e.jsx("code",{className:"bg-muted p-1 rounded-sm text-sm",children:s.pathname})," ","does not exist."]}),e.jsx(v,{asChild:!0,children:e.jsxs(B,{to:"/",children:[e.jsx(Nt,{className:"mr-2 h-4 w-4"}),"Go to Homepage"]})})]})};class Ds{constructor(t){ne(this,"collectionName");this.collectionName=t}async add(t,r=!0){if(!t)throw new Error(`Invalid data for ${this.collectionName}`);const n=k(),a=O(N,"users",n,this.collectionName),l=r?{date:C.now(),createdAt:C.now(),updatedAt:C.now()}:{};return(await He(a,{...t,...l})).id}async getAll(t){const r=k();if(!r)throw new Error("User not authenticated");const n=O(N,"users",r,this.collectionName),a=t?G(n,_("date","desc"),oe(t)):G(n,_("date","desc"));return(await H(a)).docs.map(o=>({id:o.id,...o.data()}))}async getById(t){if(!t)throw new Error(`Invalid ID for fetching ${this.collectionName}`);try{const r=k();if(!r)throw new Error("User not authenticated");const n=E(N,"users",r,this.collectionName,t),a=await K(n);return a.exists()?{id:a.id,...a.data()}:null}catch(r){return console.error(`Error fetching ${this.collectionName} document ${t}:`,r),null}}async update(t,r){if(!t||!r)throw new Error(`Invalid parameters for update ${this.collectionName}`);const n=k(),a=E(N,"users",n,this.collectionName,t);return await he(a,{...r,updatedAt:C.now()}),!0}async delete(t){if(!t)throw new Error(`Invalid ID for delete ${this.collectionName}`);const r=k(),n=E(N,"users",r,this.collectionName,t);return await fe(n),!0}async getByDateRange(t,r,n="date"){if(!t||!r)throw new Error(`Invalid date parameters for ${this.collectionName} date range query`);const a=k(),l=O(N,"users",a,this.collectionName),o=G(l,J(n,">=",C.fromDate(t)),J(n,"<=",C.fromDate(r)),_(n,"desc"));return(await H(o)).docs.map(m=>({id:m.id,...m.data()}))}async getByDate(t,r="date"){const n=new Date(t);n.setHours(0,0,0,0);const a=new Date(t);return a.setHours(23,59,59,999),this.getByDateRange(n,a,r)}async query(t=[],r="date",n="desc",a){const l=k(),o=O(N,"users",l,this.collectionName),c=[...t.map(h=>J(h.field,h.operator,h.value)),_(r,n)];a&&c.push(oe(a));const m=G(o,...c);return(await H(m)).docs.map(h=>({id:h.id,...h.data()}))}}const re=new Ds("plannedWorkouts"),Hs=async s=>{try{return await re.add(s),!0}catch(t){return console.error("Error adding workout:",t),!1}},Es=async()=>{try{return await re.getAll()}catch(s){return console.error("Error fetching workouts:",s),[]}},Js=async s=>{try{return await re.delete(s),!0}catch(t){return console.error("Error deleting workout:",t),!1}},As=()=>{const[s,t]=u.useState([]),[r,n]=u.useState(!0),[a,l]=u.useState(null),o=$();u.useEffect(()=>{(async()=>{try{n(!0);const h=await Es();t(h)}catch(h){l("Failed to fetch planned workouts. Please try again."),console.error("Error fetching planned workouts:",h)}finally{n(!1)}})()},[]);const c=i=>{o(`/workout/start/${i}`)},m=i=>{o(`/workout/edit/${i}`)};return e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Planned Workouts"}),e.jsx(v,{onClick:()=>o("/workoutplanner"),children:"Create New Workout"})]}),r&&e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((i,h)=>e.jsxs(A,{className:"w-full",children:[e.jsxs(L,{children:[e.jsx(z,{className:"h-8 w-1/3"}),e.jsx(z,{className:"h-4 w-1/4"})]}),e.jsxs(R,{children:[e.jsx(z,{className:"h-4 w-full mb-2"}),e.jsx(z,{className:"h-4 w-2/3"})]})]},h))}),a&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:a})}),!r&&!a&&s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"No Planned Workouts"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't created any workout plans yet."}),e.jsx(v,{onClick:()=>o("/workout/create"),children:"Create Your First Workout Plan"})]}),!r&&s.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(i=>e.jsxs(A,{className:"w-full",children:[e.jsxs(L,{children:[e.jsx(U,{children:i.name}),e.jsxs(V,{className:"flex items-center gap-1",children:[e.jsx(Pt,{className:"h-4 w-4"}),i.createdAt?kt(i.createdAt.toDate(),"PPP"):"Date unknown"]})]}),e.jsxs(R,{children:[i.workouts&&i.workouts.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Workouts:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.workouts.slice(0,3).map((h,b)=>e.jsx(ce,{variant:"secondary",children:h.name},b)),i.workouts.length>3&&e.jsxs(ce,{variant:"outline",children:["+",i.workouts.length-3," more"]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(v,{onClick:()=>c(i.id),className:"flex-1",children:"Start"}),e.jsx(v,{onClick:()=>m(i.id),variant:"outline",className:"flex-1",children:"Edit"})]})]})]},i.id))})]})},Ls=u.lazy(()=>Y(()=>import("./Dashboard-DsaUjBRd.js"),__vite__mapDeps([0,1,2,3,4])).then(s=>({default:s.Dashboard}))),Rs=u.lazy(()=>Y(()=>import("./Nutrition-Uzz3yPd2.js"),__vite__mapDeps([5,1,2,6,4,3,7])).then(s=>({default:s.Nutrition}))),Is=u.lazy(()=>Y(()=>import("./index-ClgWgxLO.js"),__vite__mapDeps([8,1,2,7,4])).then(s=>({default:s.WorkoutPlanner}))),Us=u.lazy(()=>Y(()=>import("./index-DnIYC_Xi.js"),__vite__mapDeps([9,1,2,6,4])).then(s=>({default:s.Profile}))),Ws=()=>{const{isAuthenticated:s,isLoading:t}=W();return t?e.jsx(me,{}):e.jsx(u.Suspense,{fallback:e.jsx(me,{}),children:e.jsxs(St,{children:[e.jsx(y,{path:"/",element:s?e.jsx(T,{to:"/dashboard"}):e.jsx(ys,{})}),e.jsxs(y,{element:e.jsx(vs,{}),children:[e.jsx(y,{path:"/login",element:s?e.jsx(T,{to:"/dashboard"}):e.jsx(Ps,{})}),e.jsx(y,{path:"/signup",element:s?e.jsx(T,{to:"/dashboard"}):e.jsx(Ss,{})})]},"auth-layout"),e.jsx(y,{element:e.jsx(bs,{isAuthenticated:s}),children:e.jsxs(y,{element:e.jsx(js,{}),children:[e.jsx(y,{path:"/dashboard",element:e.jsx(Ls,{})}),e.jsx(y,{path:"/nutrition",element:e.jsx(Rs,{})}),e.jsx(y,{path:"/workoutplanner",element:e.jsx(Is,{})}),e.jsx(y,{path:"/workout",element:e.jsx(As,{})}),e.jsx(y,{path:"/profile",element:e.jsx(Us,{})}),e.jsx(y,{path:"/progress",element:e.jsx("div",{children:"Progress Tracking"})})]})}),e.jsx(y,{path:"*",element:e.jsx(Cs,{})})]})})},Ts=({children:s})=>{const[t,r]=u.useState(()=>{const f=localStorage.getItem("appState");if(f)try{return JSON.parse(f)}catch(d){console.error("Failed to parse saved app state",d)}return q}),{user:n}=W();u.useEffect(()=>{localStorage.setItem("appState",JSON.stringify(t))},[t]),u.useEffect(()=>{n||r(f=>({...f,ui:q.ui,dashboardData:q.dashboardData}))},[n]);const w={state:t,setTheme:f=>{r(d=>({...d,userPreferences:{...d.userPreferences,theme:f}}))},setSidebarOpen:f=>{r(d=>({...d,ui:{...d.ui,sidebarOpen:f}}))},setHeightUnit:f=>{r(d=>({...d,userPreferences:{...d.userPreferences,heightUnit:f}}))},setWeightUnit:f=>{r(d=>({...d,userPreferences:{...d.userPreferences,weightUnit:f}}))},setDateFormat:f=>{r(d=>({...d,userPreferences:{...d.userPreferences,dateFormat:f}}))},markDashboardNeedsRefresh:()=>{r(f=>({...f,dashboardData:{...f.dashboardData,needsRefresh:!0}}))},resetDashboardRefreshState:()=>{r(f=>({...f,dashboardData:{needsRefresh:!1,lastUpdated:new Date}}))},setWorkoutDaysPerWeek:f=>{r(d=>({...d,userPreferences:{...d.userPreferences,workoutDaysPerWeek:f}}))}};return e.jsx(De.Provider,{value:w,children:s})};function Fs({children:s,defaultTheme:t="light",storageKey:r="appState",...n}){const[a,l]=u.useState(()=>{var c;try{const m=localStorage.getItem(r);if(m){const i=JSON.parse(m);return((c=i==null?void 0:i.userPreferences)==null?void 0:c.theme)||t}}catch(m){console.error("Error reading theme from localStorage:",m)}return t});u.useEffect(()=>{const c=window.document.documentElement;if(c.classList.remove("light","dark"),a==="system"){const m=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";c.classList.add(m);return}c.classList.add(a)},[a]);const o={theme:a,setTheme:c=>{try{const m=localStorage.getItem(r),i=m?JSON.parse(m):{};i.userPreferences||(i.userPreferences={heightUnit:"cm",weightUnit:"kg",dateFormat:"DD/MM/YYYY",workoutDaysPerWeek:3,theme:c,notificationsEnabled:!0}),i.userPreferences.theme=c,localStorage.setItem(r,JSON.stringify(i)),l(c)}catch(m){console.error("Error saving theme to localStorage:",m),l(c)}}};return e.jsx(Ee.Provider,{...n,value:o,children:s})}const Ms=()=>e.jsx(cs,{children:e.jsx(Fs,{children:e.jsxs(Ts,{children:[e.jsx(Ws,{}),e.jsx(Ct,{})]})})}),Os="/grindmode/";Ie.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(Dt,{basename:Os,children:e.jsx(Ms,{})})}));export{Vs as A,v as B,A as C,zt as D,qt as E,Ds as F,Se as I,Bt as L,z as S,L as a,U as b,R as c,x as d,M as e,ce as f,ls as g,Hs as h,Es as i,Js as j,V as k,Ys as l,ts as m,ss as n,as as o,ns as p,rs as q,is as r,os as s,$s as t,W as u,$t as v,Bs as w,le as x,Gt as y,_t as z};
