import{r as l,j as r,w as S,y as W,z as te,ad as re,A as D,aE as se,k as F,o as ne,C as ae,b as oe,d as ie,B as N,p as le,e as ce,I as O,aF as de,G as y,a2 as ue,a3 as pe,a4 as fe,a5 as me,a6 as he,a7 as xe,a8 as ve,a9 as ge,aa as be}from"./index-MKLLRtOd.js";import{u as Ce}from"./useActiveWorkout-BYPLJcUU.js";import{u as je,C as ye}from"./chevron-up-CqJ6puT7.js";import{C as Ne}from"./circle-plus-UnoKZIFD.js";function ke(e){const t=Se(e),a=l.forwardRef((n,s)=>{const{children:o,...d}=n,c=l.Children.toArray(o),i=c.find(Ee);if(i){const u=i.props.children,f=c.map(p=>p===i?l.Children.count(u)>1?l.Children.only(null):l.isValidElement(u)?u.props.children:null:p);return r.jsx(t,{...d,ref:s,children:l.isValidElement(u)?l.cloneElement(u,void 0,f):null})}return r.jsx(t,{...d,ref:s,children:o})});return a.displayName=`${e}.Slot`,a}function Se(e){const t=l.forwardRef((a,n)=>{const{children:s,...o}=a,d=l.isValidElement(s)?Re(s):void 0,c=S(d,n);if(l.isValidElement(s)){const i=Pe(o,s.props);return s.type!==l.Fragment&&(i.ref=c),l.cloneElement(s,i)}return l.Children.count(s)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var we=Symbol("radix.slottable");function Ee(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===we}function Pe(e,t){const a={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?a[n]=(...c)=>{const i=o(...c);return s(...c),i}:s&&(a[n]=s):n==="style"?a[n]={...s,...o}:n==="className"&&(a[n]=[s,o].filter(Boolean).join(" "))}return{...e,...a}}function Re(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}var Ie=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],R=Ie.reduce((e,t)=>{const a=ke(`Primitive.${t}`),n=l.forwardRef((s,o)=>{const{asChild:d,...c}=s,i=d?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(i,{...c,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),w="Checkbox",[_e,at]=W(w),[Ae,I]=_e(w);function $e(e){const{__scopeCheckbox:t,checked:a,children:n,defaultChecked:s,disabled:o,form:d,name:c,onCheckedChange:i,required:u,value:f="on",internal_do_not_use_render:p}=e,[h,v]=re({prop:a,defaultProp:s??!1,onChange:i,caller:w}),[b,C]=l.useState(null),[j,m]=l.useState(null),x=l.useRef(!1),E=b?!!d||!!b.closest("form"):!0,P={checked:h,disabled:o,setChecked:v,control:b,setControl:C,name:c,form:d,value:f,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:g(s)?!1:s,isFormControl:E,bubbleInput:j,setBubbleInput:m};return r.jsx(Ae,{scope:t,...P,children:De(p)?p(P):n})}var B="CheckboxTrigger",M=l.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...n},s)=>{const{control:o,value:d,disabled:c,checked:i,required:u,setControl:f,setChecked:p,hasConsumerStoppedPropagationRef:h,isFormControl:v,bubbleInput:b}=I(B,e),C=S(s,f),j=l.useRef(i);return l.useEffect(()=>{const m=o==null?void 0:o.form;if(m){const x=()=>p(j.current);return m.addEventListener("reset",x),()=>m.removeEventListener("reset",x)}},[o,p]),r.jsx(R.button,{type:"button",role:"checkbox","aria-checked":g(i)?"mixed":i,"aria-required":u,"data-state":X(i),"data-disabled":c?"":void 0,disabled:c,value:d,...n,ref:C,onKeyDown:D(t,m=>{m.key==="Enter"&&m.preventDefault()}),onClick:D(a,m=>{p(x=>g(x)?!0:!x),b&&v&&(h.current=m.isPropagationStopped(),h.current||m.stopPropagation())})})});M.displayName=B;var L=l.forwardRef((e,t)=>{const{__scopeCheckbox:a,name:n,checked:s,defaultChecked:o,required:d,disabled:c,value:i,onCheckedChange:u,form:f,...p}=e;return r.jsx($e,{__scopeCheckbox:a,checked:s,defaultChecked:o,disabled:c,required:d,onCheckedChange:u,name:n,form:f,value:i,internal_do_not_use_render:({isFormControl:h})=>r.jsxs(r.Fragment,{children:[r.jsx(M,{...p,ref:t,__scopeCheckbox:a}),h&&r.jsx(q,{__scopeCheckbox:a})]})})});L.displayName=w;var z="CheckboxIndicator",H=l.forwardRef((e,t)=>{const{__scopeCheckbox:a,forceMount:n,...s}=e,o=I(z,a);return r.jsx(te,{present:n||g(o.checked)||o.checked===!0,children:r.jsx(R.span,{"data-state":X(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});H.displayName=z;var G="CheckboxBubbleInput",q=l.forwardRef(({__scopeCheckbox:e,...t},a)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:d,required:c,disabled:i,name:u,value:f,form:p,bubbleInput:h,setBubbleInput:v}=I(G,e),b=S(a,v),C=je(o),j=se(n);l.useEffect(()=>{const x=h;if(!x)return;const E=window.HTMLInputElement.prototype,$=Object.getOwnPropertyDescriptor(E,"checked").set,Y=!s.current;if(C!==o&&$){const ee=new Event("click",{bubbles:Y});x.indeterminate=g(o),$.call(x,g(o)?!1:o),x.dispatchEvent(ee)}},[h,C,o,s]);const m=l.useRef(g(o)?!1:o);return r.jsx(R.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??m.current,required:c,disabled:i,name:u,value:f,form:p,...t,tabIndex:-1,ref:b,style:{...t.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});q.displayName=G;function De(e){return typeof e=="function"}function g(e){return e==="indeterminate"}function X(e){return g(e)?"indeterminate":e?"checked":"unchecked"}function Oe({className:e,...t}){return r.jsx(L,{"data-slot":"checkbox",className:F("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(H,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:r.jsx(ne,{className:"size-3.5"})})})}function Te(e){const t=Ve(e),a=l.forwardRef((n,s)=>{const{children:o,...d}=n,c=l.Children.toArray(o),i=c.find(Fe);if(i){const u=i.props.children,f=c.map(p=>p===i?l.Children.count(u)>1?l.Children.only(null):l.isValidElement(u)?u.props.children:null:p);return r.jsx(t,{...d,ref:s,children:l.isValidElement(u)?l.cloneElement(u,void 0,f):null})}return r.jsx(t,{...d,ref:s,children:o})});return a.displayName=`${e}.Slot`,a}function Ve(e){const t=l.forwardRef((a,n)=>{const{children:s,...o}=a,d=l.isValidElement(s)?Me(s):void 0,c=S(d,n);if(l.isValidElement(s)){const i=Be(o,s.props);return s.type!==l.Fragment&&(i.ref=c),l.cloneElement(s,i)}return l.Children.count(s)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var We=Symbol("radix.slottable");function Fe(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===We}function Be(e,t){const a={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?a[n]=(...c)=>{const i=o(...c);return s(...c),i}:s&&(a[n]=s):n==="style"?a[n]={...s,...o}:n==="className"&&(a[n]=[s,o].filter(Boolean).join(" "))}return{...e,...a}}function Me(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}var Le=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],U=Le.reduce((e,t)=>{const a=Te(`Primitive.${t}`),n=l.forwardRef((s,o)=>{const{asChild:d,...c}=s,i=d?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(i,{...c,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),_="Progress",A=100,[ze,ot]=W(_),[He,Ge]=ze(_),K=l.forwardRef((e,t)=>{const{__scopeProgress:a,value:n=null,max:s,getValueLabel:o=qe,...d}=e;(s||s===0)&&!T(s)&&console.error(Xe(`${s}`,"Progress"));const c=T(s)?s:A;n!==null&&!V(n,c)&&console.error(Ue(`${n}`,"Progress"));const i=V(n,c)?n:null,u=k(i)?o(i,c):void 0;return r.jsx(He,{scope:a,value:i,max:c,children:r.jsx(U.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":k(i)?i:void 0,"aria-valuetext":u,role:"progressbar","data-state":Q(i,c),"data-value":i??void 0,"data-max":c,...d,ref:t})})});K.displayName=_;var Z="ProgressIndicator",J=l.forwardRef((e,t)=>{const{__scopeProgress:a,...n}=e,s=Ge(Z,a);return r.jsx(U.div,{"data-state":Q(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:t})});J.displayName=Z;function qe(e,t){return`${Math.round(e/t*100)}%`}function Q(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function k(e){return typeof e=="number"}function T(e){return k(e)&&!isNaN(e)&&e>0}function V(e,t){return k(e)&&!isNaN(e)&&e<=t&&e>=0}function Xe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${A}\`.`}function Ue(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${A} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ke=K,Ze=J;function Je({className:e,value:t,...a}){return r.jsx(Ke,{"data-slot":"progress",className:F("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...a,children:r.jsx(Ze,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const Qe=({exercise:e,exerciseIndex:t,onUpdateSet:a,onAddSet:n})=>{const[s,o]=l.useState(!1);return r.jsxs(ae,{className:"mb-4",children:[r.jsx(oe,{className:"pb-2",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(ie,{className:"text-lg",children:e.name}),r.jsx(N,{variant:"ghost",size:"sm",onClick:()=>o(!s),className:"h-8 w-8 p-0",children:s?r.jsx(ye,{size:16}):r.jsx(le,{size:16})})]})}),s&&r.jsx(ce,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-12 text-sm font-medium text-muted-foreground",children:[r.jsx("div",{className:"col-span-1",children:"Set"}),r.jsx("div",{className:"col-span-4",children:"Weight (kg)"}),r.jsx("div",{className:"col-span-4",children:"Reps"}),r.jsx("div",{className:"col-span-3",children:"Done"})]}),e.sets.map((d,c)=>r.jsxs("div",{className:"grid grid-cols-12 items-center",children:[r.jsx("div",{className:"col-span-1",children:c+1}),r.jsx("div",{className:"col-span-4",children:r.jsx(O,{type:"number",value:d.weight,onChange:i=>a(t,c,{weight:parseFloat(i.target.value)||0}),className:"h-8"})}),r.jsx("div",{className:"col-span-4",children:r.jsx(O,{type:"number",value:d.reps,onChange:i=>a(t,c,{reps:parseInt(i.target.value)||0}),className:"h-8"})}),r.jsx("div",{className:"col-span-3 flex justify-center",children:r.jsx(Oe,{checked:d.isCompleted,onCheckedChange:i=>a(t,c,{isCompleted:i===!0})})})]},c)),r.jsxs(N,{variant:"outline",size:"sm",onClick:()=>n(t),className:"w-full mt-2",children:[r.jsx(Ne,{size:16,className:"mr-1"})," Add Set"]})]})})]})},Ye=({stats:e})=>{const t=e.totalSets>0?Math.round(e.totalCompletedSets/e.totalSets*100):0;return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-sm font-medium",children:[e.totalCompletedSets," of ",e.totalSets," sets completed"]}),r.jsxs("span",{className:"text-sm font-medium",children:[t,"%"]})]}),r.jsx(Je,{value:t,className:"h-2"})]})},et=({startTime:e,className:t=""})=>{const[a,n]=l.useState(0);l.useEffect(()=>{if(!e)return;const o=()=>{const i=Math.floor((new Date().getTime()-e.getTime())/1e3);n(i)};o();const d=setInterval(o,1e3);return()=>clearInterval(d)},[e]);const s=o=>{const d=Math.floor(o/3600),c=Math.floor(o%3600/60),i=o%60;return`${d>0?`${d}:`:""}${c.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`};return r.jsx("div",{className:`text-lg font-mono ${t}`,children:e?s(a):"00:00"})},it=()=>{var p;const{workoutId:e}=de(),{workout:t,loading:a,error:n,updateSet:s,addSet:o,finishWorkout:d,calculateStats:c}=Ce(e),[i,u]=l.useState(!1);if(a)return r.jsxs("div",{className:"container py-8 space-y-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(y,{className:"h-8 w-1/3"}),r.jsx(y,{className:"h-8 w-1/4"})]}),r.jsx(y,{className:"h-4 w-full"}),r.jsx(y,{className:"h-32 w-full"}),r.jsx(y,{className:"h-32 w-full"})]});if(n||!t)return r.jsx("div",{className:"container py-8",children:r.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:[r.jsxs("p",{children:["Error: ",n||"Workout not found"]}),r.jsx(N,{variant:"outline",className:"mt-4",onClick:()=>window.history.back(),children:"Go Back"})]})});const f=c();return r.jsx("div",{className:"container py-8",children:r.jsxs("div",{className:"flex flex-col space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[r.jsx("h1",{className:"text-2xl font-bold",children:t.name}),r.jsx(et,{startTime:(p=t.startTime)==null?void 0:p.toDate(),className:"text-xl font-mono"})]}),r.jsx(Ye,{stats:f}),r.jsx("div",{className:"space-y-4",children:t.exercises.map((h,v)=>r.jsx(Qe,{exercise:h,exerciseIndex:v,onUpdateSet:s,onAddSet:o},h.exerciseId||v))}),r.jsx("div",{className:"flex justify-center pt-4",children:r.jsxs(ue,{open:i,onOpenChange:u,children:[r.jsx(pe,{asChild:!0,children:r.jsx(N,{size:"lg",className:"px-8",children:"Finish Workout"})}),r.jsxs(fe,{children:[r.jsxs(me,{children:[r.jsx(he,{children:"Finish Workout"}),r.jsx(xe,{children:"Are you sure you want to finish this workout? This action cannot be undone."})]}),r.jsxs(ve,{children:[r.jsx(ge,{children:"Cancel"}),r.jsx(be,{onClick:d,children:"Finish"})]})]})]})})]})})};export{it as ActiveWorkoutPage};
//# sourceMappingURL=ActiveWorkout-D0u8_0T6.js.map
