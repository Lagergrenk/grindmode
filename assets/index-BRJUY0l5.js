import{j as e,C as S,a as A,b as I,a2 as M,d as E,h as Y,c as g,D as se,R as _,a3 as te,a4 as ne,a5 as re,a6 as oe,a7 as le,a8 as ie,I as ce,a9 as de,aa as ue,ab as he,ac as $,B as p,ad as me,r as x,o as xe,w as ge,p as pe,ae as fe,P as N,af as W,ag as je,ah as ve,s as P,q as ye,ai as be,aj as we,u as Ne,e as Ce,H as ke,ak as Pe}from"./index-D4A55r9M.js";import{al as ea,an as aa,ap as sa,am as ta,ao as na}from"./index-D4A55r9M.js";import{S as f,a as j,b as v,c as y,d as b}from"./select-CAsNgvUz.js";import"./check-eVLZ_fta.js";const H=({title:s,description:r,children:o})=>e.jsxs(S,{children:[e.jsxs(A,{children:[e.jsx(I,{children:s}),e.jsx(M,{children:r})]}),e.jsx(E,{className:"space-y-6",children:e.jsx("div",{className:"grid gap-4",children:o})})]}),w=({icon:s,label:r,description:o,inputId:n,children:l})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s,e.jsxs("div",{children:[e.jsx(Y,{htmlFor:n,children:r}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})]}),l]});/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],Te=g("calendar-clock",De);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ae=g("lock",Se);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Me=g("mail",Ie);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],R=g("scale",Ee);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Ue=g("trash",_e);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Le=g("user-cog",Fe),Ve=[1,2,3,4,5,6,7],He=["kg","lb"],Re=["cm","ft"],Ye=["DD/MM/YYYY","MM/DD/YYYY","YYYY-MM-DD"],$e=({dateFormat:s,heightUnit:r,weightUnit:o,workoutDaysPerWeek:n=3,onDateFormatChange:l,onHeightUnitChange:d,onWeightUnitChange:i,onWorkoutDaysChange:c})=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{title:"Workout Preferences",description:"Customize your workout planning settings",children:e.jsx(w,{icon:e.jsx(se,{className:"h-5 w-5 text-muted-foreground"}),label:"Workout Days Per Week",description:"How many days per week you plan to work out",inputId:"workout-days",children:e.jsxs(f,{value:(n==null?void 0:n.toString())||"3",onValueChange:t=>c(parseInt(t)),children:[e.jsx(j,{className:"w-40",id:"workout-days",children:e.jsx(v,{placeholder:"Days Per Week"})}),e.jsx(y,{children:Ve.map(t=>e.jsxs(b,{value:t.toString(),children:[t," ",t===1?"day":"days"]},t))})]})})}),e.jsxs(H,{title:"Units & Formatting",description:"Customize measurement units and date formats",children:[e.jsx(w,{icon:e.jsx(Te,{className:"h-5 w-5 text-muted-foreground"}),label:"Date Format",description:"How dates should be displayed",inputId:"date-format",children:e.jsxs(f,{value:s,onValueChange:l,children:[e.jsx(j,{className:"w-40",children:e.jsx(v,{placeholder:"Date Format"})}),e.jsx(y,{children:Ye.map(t=>e.jsx(b,{value:t,children:t},t))})]})}),e.jsx(w,{icon:e.jsx(R,{className:"h-5 w-5 text-muted-foreground"}),label:"Height Unit",description:"Choose your preferred height measurement",inputId:"height-unit",children:e.jsxs(f,{value:r,onValueChange:d,children:[e.jsx(j,{className:"w-40",children:e.jsx(v,{placeholder:"Height Unit"})}),e.jsx(y,{children:Re.map(t=>e.jsx(b,{value:t,children:t==="cm"?"Centimeters (cm)":"Feet (ft)"},t))})]})}),e.jsx(w,{icon:e.jsx(R,{className:"h-5 w-5 text-muted-foreground"}),label:"Weight Unit",description:"Choose your preferred weight measurement",inputId:"weight-unit",children:e.jsxs(f,{value:o,onValueChange:i,children:[e.jsx(j,{className:"w-40",children:e.jsx(v,{placeholder:"Weight Unit"})}),e.jsx(y,{children:He.map(t=>e.jsx(b,{value:t,children:t==="kg"?"Kilograms (kg)":"Pounds (lb)"},t))})]})})]})]}),D=({icon:s,label:r,value:o,action:n})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s,e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:r}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})]}),n]}),T=({trigger:s,title:r,description:o,fields:n,onSubmit:l,cancelLabel:d="Cancel",actionLabel:i="Update"})=>{const[c,t]=_.useState({}),u=a=>{t({...c,[a.target.name]:a.target.value})},h=()=>{l(c)};return e.jsxs(te,{children:[e.jsx(ne,{asChild:!0,children:s}),e.jsxs(re,{className:"w-full max-w-md",children:[e.jsxs(oe,{children:[e.jsx(le,{children:r}),e.jsx(ie,{children:o})]}),n.map(a=>e.jsxs("div",{className:"mb-4",children:[e.jsx(Y,{htmlFor:a.name,className:"block mb-2",children:a.label}),e.jsx(ce,{id:a.name,type:a.type||"text",name:a.name,className:"w-full",onChange:u,value:c[a.name]||""})]},a.name)),e.jsxs(de,{children:[e.jsx(ue,{children:d}),e.jsx(he,{type:"submit",onClick:h,children:i})]})]})]})},We=({email:s,displayName:r,isLoading:o,onChangeEmail:n,onChangePassword:l,onSignOut:d,onDeleteAccount:i})=>{const c=u=>{u==="DELETE"?i():alert('Please type "DELETE" to confirm account deletion.')},t=(u,h)=>{if(u!==h){alert("Passwords do not match!");return}l(u)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsxs(A,{children:[e.jsx(I,{children:"Account Information"}),e.jsx(M,{children:"Manage your personal account details"})]}),e.jsxs(E,{className:"space-y-6",children:[e.jsx(D,{icon:e.jsx($,{className:"h-5 w-5 text-muted-foreground"}),label:"Name",value:r||"Not set"}),e.jsx(D,{icon:e.jsx(Ae,{className:"h-5 w-5 text-muted-foreground"}),label:"Password",value:"********",action:e.jsx(T,{trigger:e.jsx(p,{variant:"outline",size:"sm",disabled:o,children:"Change"}),title:"Change Password",description:"Please enter your new password.",onSubmit:u=>t(u.newPassword,u.confirmPassword),fields:[{name:"newPassword",label:"New Password",type:"password"},{name:"confirmPassword",label:"Confirm Password",type:"password"}],actionLabel:"Update Password"})}),e.jsx(D,{icon:e.jsx(Me,{className:"h-5 w-5 text-muted-foreground"}),label:"Email",value:s||"Not set",action:e.jsx(T,{trigger:e.jsx(p,{variant:"outline",size:"sm",disabled:o,children:"Change"}),title:"Change Email",description:"Please enter your new email address.",fields:[{name:"newEmail",label:"New Email",type:"email"}],actionLabel:"Update Email",onSubmit:u=>n(u.newEmail),cancelLabel:"Cancel"})})]})]}),e.jsxs(S,{children:[e.jsxs(A,{children:[e.jsx(I,{children:"Account Management"}),e.jsx(M,{children:"Manage your account access and data"})]}),e.jsxs(E,{className:"flex flex-col gap-4",children:[e.jsxs(p,{variant:"outline",className:"w-full sm:w-auto flex items-center gap-2",onClick:d,disabled:o,children:[e.jsx(me,{className:"h-4 w-4"}),"Sign out"]}),e.jsx(T,{trigger:e.jsxs(p,{variant:"destructive",className:"w-full sm:w-auto flex items-center gap-2",disabled:o,children:[e.jsx(Ue,{className:"h-4 w-4"}),"Delete account"]}),title:"Are you absolutely sure?",description:"This action cannot be undone. This will permanently delete your account and remove your data from our servers.",actionLabel:"Delete account",cancelLabel:"Cancel",onSubmit:u=>c(u.confirmDelete),fields:[{name:"confirmDelete",label:'Type "DELETE" to confirm',type:"text"}]})]})]})]})};var C="Tabs",[ze,Ze]=pe(C,[W]),z=W(),[Oe,L]=ze(C),O=x.forwardRef((s,r)=>{const{__scopeTabs:o,value:n,onValueChange:l,defaultValue:d,orientation:i="horizontal",dir:c,activationMode:t="automatic",...u}=s,h=xe(c),[a,m]=ge({prop:n,onChange:l,defaultProp:d??"",caller:C});return e.jsx(Oe,{scope:o,baseId:fe(),value:a,onValueChange:m,orientation:i,dir:h,activationMode:t,children:e.jsx(N.div,{dir:h,"data-orientation":i,...u,ref:r})})});O.displayName=C;var G="TabsList",q=x.forwardRef((s,r)=>{const{__scopeTabs:o,loop:n=!0,...l}=s,d=L(G,o),i=z(o);return e.jsx(je,{asChild:!0,...i,orientation:d.orientation,dir:d.dir,loop:n,children:e.jsx(N.div,{role:"tablist","aria-orientation":d.orientation,...l,ref:r})})});q.displayName=G;var K="TabsTrigger",U=x.forwardRef((s,r)=>{const{__scopeTabs:o,value:n,disabled:l=!1,...d}=s,i=L(K,o),c=z(o),t=Z(i.baseId,n),u=J(i.baseId,n),h=n===i.value;return e.jsx(ve,{asChild:!0,...c,focusable:!l,active:h,children:e.jsx(N.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:t,...d,ref:r,onMouseDown:P(s.onMouseDown,a=>{!l&&a.button===0&&a.ctrlKey===!1?i.onValueChange(n):a.preventDefault()}),onKeyDown:P(s.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&i.onValueChange(n)}),onFocus:P(s.onFocus,()=>{const a=i.activationMode!=="manual";!h&&!l&&a&&i.onValueChange(n)})})})});U.displayName=K;var B="TabsContent",F=x.forwardRef((s,r)=>{const{__scopeTabs:o,value:n,forceMount:l,children:d,...i}=s,c=L(B,o),t=Z(c.baseId,n),u=J(c.baseId,n),h=n===c.value,a=x.useRef(h);return x.useEffect(()=>{const m=requestAnimationFrame(()=>a.current=!1);return()=>cancelAnimationFrame(m)},[]),e.jsx(ye,{present:l||h,children:({present:m})=>e.jsx(N.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":t,hidden:!m,id:u,tabIndex:0,...i,ref:r,style:{...s.style,animationDuration:a.current?"0s":void 0},children:m&&d})})});F.displayName=B;function Z(s,r){return`${s}-trigger-${r}`}function J(s,r){return`${s}-content-${r}`}const Ge=()=>{const[s,r]=x.useState(null),[o,n]=x.useState(!0),[l,d]=x.useState(null),[i,c]=x.useState(!1),t=async()=>{try{n(!0);const a=await we();r(a)}catch(a){d(`Failed to fetch profile: ${a}`)}finally{n(!1)}},u=x.useCallback(async a=>{c(!0),d(null);try{await be(a),r(m=>m?{...m,...a}:null)}catch(m){d(`Failed to update profile: ${m}`)}finally{c(!1)}},[]),h=x.useCallback(async()=>{d(null);try{await t()}catch(a){d(`Failed to refresh profile: ${a}`)}},[]);return{profile:s,isLoading:o,error:l,isSaving:i,updateProfile:u,refreshProfile:h}},Je=()=>{const s=Ne(),{logout:r,deleteProfile:o}=Ce(),[n,l]=_.useState(!1),[d,i]=_.useState("profile"),{state:{userPreferences:c},setDateFormat:t,setHeightUnit:u,setWeightUnit:h,setWorkoutDaysPerWeek:a}=ke(),{profile:m,refreshProfile:V}=Ge();x.useEffect(()=>{V()},[V]);const Q=()=>{r&&(r(),s("/login"))},X=()=>{console.log("Change email clicked")},ee=k=>{console.log("Change password clicked",k)},ae=async()=>{if(o){l(!0);try{await o(),await Pe(),s("/login")}finally{l(!1)}}};return m?e.jsx("div",{className:"container mx-auto py-6 max-w-4xl",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Profile"})}),e.jsxs(O,{value:d,onValueChange:i,className:"w-full",children:[e.jsxs(q,{className:"grid grid-cols-2 mb-8",children:[e.jsxs(U,{value:"profile",className:"flex items-center gap-2",children:[e.jsx($,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Account"})]}),e.jsxs(U,{value:"preferences",className:"flex items-center gap-2",children:[e.jsx(Le,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Preferences"})]})]}),e.jsx(F,{value:"preferences",children:e.jsx($e,{dateFormat:c.dateFormat,heightUnit:c.heightUnit,weightUnit:c.weightUnit,workoutDaysPerWeek:c.workoutDaysPerWeek,onDateFormatChange:t,onHeightUnitChange:u,onWeightUnitChange:h,onWorkoutDaysChange:a})}),e.jsx(F,{value:"profile",children:e.jsx(We,{email:m.email,displayName:m.displayName,isLoading:n,onChangeEmail:X,onChangePassword:k=>ee(k),onSignOut:Q,onDeleteAccount:ae})})]})]})}):e.jsx("div",{className:"p-6",children:"Loading user data..."})};export{H as PreferenceSection,$e as PreferencesSettings,Je as Profile,T as ProfileAlertDialog,We as ProfileSettings,ea as createUserProfile,aa as createUserProfileDoc,Pe as deleteUserProfile,sa as deleteUserProfileDoc,we as getUserProfile,ta as getUserProfileDoc,be as updateUserProfile,na as updateUserProfileDoc,Ge as useProfileState};
