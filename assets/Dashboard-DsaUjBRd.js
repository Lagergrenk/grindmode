import{j as e,r as g}from"./vendor-react-BG_21XCX.js";import{C as p,a as N,b as y,B as d,c as f,u as v}from"./index-RZU90Lwd.js";import{H as k,W as b,a0 as x,v as w,w as C,a1 as L,u as S}from"./vendor-DdkT1QD4.js";import{f as W,u as T}from"./useNutritionEntry-ie2rJQF5.js";import"./vendor-firebase-TzzhK1Gx.js";const i=({title:s,subtitle:t,value:a,unit:r,className:l=""})=>e.jsxs("div",{className:`border rounded-md p-3 flex justify-between items-center ${l}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s}),t&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t})]}),a!==void 0&&e.jsxs("p",{className:"text-lg font-semibold",children:[a,r&&e.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:r})]})]}),m=({label:s,value:t,unit:a,valueSize:r="lg",className:l=""})=>{const o={sm:"text-sm",md:"text-md",lg:"text-lg",xl:"text-xl"};return e.jsxs("div",{className:l,children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:s}),e.jsxs("p",{className:`${o[r]} font-bold`,children:[t,a&&e.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-1",children:a})]})]})},u=({children:s,className:t=""})=>e.jsx("div",{className:`flex items-center justify-between ${t}`,children:s}),j=({title:s,actionLabel:t,actionIcon:a,onAction:r,isLoading:l=!1,loadingText:o="Loading data...",className:n="",children:c})=>e.jsxs(p,{className:n,children:[e.jsx(N,{className:"pb-2",children:e.jsxs(y,{className:"text-lg flex justify-between items-center",children:[e.jsx("span",{children:s}),r&&e.jsxs(d,{size:"sm",variant:"outline",onClick:r,className:"flex items-center gap-1 h-8",disabled:l,children:[a,t]})]})}),e.jsx(f,{children:l?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(k,{className:"h-5 w-5 animate-spin mr-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:o})]}):c})]}),F=({userName:s})=>{const t=new Date,a={weekday:"long",year:"numeric",month:"long",day:"numeric"},r=t.toLocaleDateString("en-US",a);return e.jsx("header",{className:"mb-6 space-y-2",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Welcome back, ",s]}),e.jsx("p",{className:"text-muted-foreground",children:"Track your fitness journey and reach your goals"})]}),e.jsxs("div",{className:"mt-2 sm:mt-0 flex items-center text-sm text-muted-foreground",children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:r})]})]})})},E=({nutritionData:s,isLoading:t=!1,latestEntries:a=[],onLogFood:r})=>{var o,n;const l=a[0];return e.jsx(j,{title:"Nutrition",actionLabel:"Log",actionIcon:e.jsx(x,{className:"h-4 w-4 mr-1"}),onAction:r,isLoading:t,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(u,{children:[e.jsx(m,{label:"Today",value:(s==null?void 0:s.today.calories.toFixed(0))||"0",unit:"cal",valueSize:"lg"}),e.jsx(m,{label:"Protein",value:(s==null?void 0:s.today.protein.toFixed(0))||"0",unit:"g",valueSize:"md",className:"text-right"})]}),l&&e.jsxs("div",{className:"pt-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Last Entry"}),e.jsx(i,{title:l.date?W(l.date.toDate()):"Recent",subtitle:`${((o=l.meals)==null?void 0:o.length)||0} meals logged`,value:((n=l.dailyTotals)==null?void 0:n.calories.toFixed(0))||"0",unit:"cal"})]}),s&&s.weekly.daysTracked>0&&e.jsxs("div",{className:"pt-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Weekly Average"}),e.jsx(i,{title:`${s.weekly.averageCalories.toFixed(0)} cal/day`,subtitle:`${s.weekly.daysTracked} days tracked this week`})]})]})})},z=({workoutData:s={today:{completed:!1,duration:0,exercises:0},weekly:{workouts:0,totalDuration:0}},isLoading:t=!1,onLogWorkout:a})=>e.jsx(j,{title:"Workouts",actionLabel:"Log",actionIcon:e.jsx(x,{className:"h-4 w-4 mr-1"}),onAction:a,isLoading:t,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(u,{children:[e.jsx(m,{label:"This Week",value:s.weekly.workouts,unit:"workouts"}),e.jsx(m,{label:"Total Time",value:s.weekly.totalDuration,unit:"min",className:"text-right"})]}),e.jsx("div",{className:"pt-2",children:s.today.completed?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Today's Workout"}),e.jsx(i,{title:"Completed",subtitle:`${s.today.exercises} exercises`,value:s.today.duration,unit:"min"})]}):e.jsx(i,{title:"No workout yet today",subtitle:"Log your workout to track progress"})})]})}),R=({onAddWorkout:s,onLogFood:t,onRecordMeasurement:a})=>e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsxs(d,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:s,children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Workout"})]}),e.jsxs(d,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:t,children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"Log Food"})]}),e.jsxs(d,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:a,children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:"Measurements"})]})]}),U=()=>{const s=S(),{user:t}=v(),[a]=g.useState(()=>new Date),{isLoading:r,allNutritionEntries:l,nutritionSummary:o}=T(a),n=()=>{s("/workoutplanner")},c=()=>{s("/nutrition")},h=()=>{s("/progress")};return e.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[e.jsx(F,{userName:(t==null?void 0:t.displayName)||"User"}),e.jsx(R,{onAddWorkout:n,onLogFood:c,onRecordMeasurement:h}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(z,{onLogWorkout:n}),e.jsx(E,{isLoading:r,nutritionData:o,latestEntries:l.slice(0,3),onLogFood:c})]})]})};export{U as Dashboard};
